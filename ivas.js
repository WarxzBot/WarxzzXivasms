
/* * PROJECT: KILLUA NEW 
 * PROTECTED MANUAL 
 */

const _0x_src = 
  "Y29uc3QgeyBUZWxlZ3JhZiwgTWFya3VwIH0gPSByZXF1aXJlKCd0ZWxlZ3JhZicpOwpjb2" +
  "5zdCBwdXBwZXRlZXIgPSByZXF1aXJlKCdwdXBwZXRlZXItZXh0cmEnKTsKY29uc3QgcHVw" +
  "cGV0ZWVyRXh0cmEgPSByZXF1aXJlKCdwdXBwZXRlZXItZXh0cmEnKTsKY29uc3QgU3RlYW" +
  "x0aFBsdWdpbiA9IHJlcXVpcmUoJ3B1cHBldGVlci1leHRyYS1wbHVnaW4tc3RlYWx0aCcp" +
  "Owpjb25zdCB7IHBhcnNlUGhvbmVOdW1iZXIgfSA9IHJlcXVpcmUoJ2xpYnBob25lbnVtYm" +
  "VyLWpzJyk7CmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTsKY29uc3QgcGF0aCA9IHJlcXVp" +
  "cmUoJ3BhdGgnKTsKY29uc3QgcmwgPSByZXF1aXJlKCdyZWFkbGluZS9wcm9taXNlcycpOw" +
  "pjb25zdCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTsKY29uc3QgWExTWCA9" +
  "IHJlcXVpcmUoJ3hsc3gnKTsKY29uc3QgY3N2ID0gcmVxdWlyZSgnY3N2LXBhcnNlcicpOw" +
  "pjb25zdCB7IFBhc3NUaHJvdWdoIH0gPSByZXF1aXJlKCdzdHJlYW0nKTsKY29uc3QgY2hh" +
  "bGsgPSByZXF1aXJlKCdjaGFsaycpOwpjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJy" +
  "k7CgpwdXBwZXRlZXJFeHRyYS51c2UoU3RlYWx0aFBsdWdpbigpKTsKCmNvbnN0IEFMTE9X" +
  "RURfVE9LRU5TX1VSTCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRG" +
  "F5dXRhbTAzL2J1a2FuLWFwYS1hcGEvbWFpbi9hbGxvd2VkLXRva2Vucy5qc29uJzsKCmFz" +
  "eW5jIGZ1bmN0aW9uIGdldEFsbG93ZWRUb2tlbnMoKSB7CiAgICB0cnkgewogICAgICAgIG" +
  "NvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KEFMTE9XRURfVE9LRU5TX1VSTCwg" +
  "ewogICAgICAgICAgICB0aW1lb3V0OiAxMDAwMCwKICAgICAgICAgICAgaGVhZGVyczogey" +
  "AnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCcgfQogICAgICAgIH0pOwogICAgICAgIGxl" +
  "dCBhbGxvd2VkVG9rZW5zID0gW107CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG" +
  "9uc2UuZGF0YSkpIHsKICAgICAgICAgICAgYWxsb3dlZFRva2VucyA9IHJlc3BvbnNlLmRh" +
  "dGE7CiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdG" +
  "EuYWxsb3dlZF90b2tlbnMgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhLmFsbG93" +
  "ZWRfdG9rZW5zKSkgewogICAgICAgICAgICBhbGxvd2VkVG9rZW5zID0gcmVzcG9uc2UuZG" +
  "F0YS5hbGxvd2VkX3Rva2VuczsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXNwb25z" +
  "ZS5kYXRhID09PSAnb2JqZWN0JykgewogICAgICAgICAgICBhbGxvd2VkVG9rZW5zID0gT2" +
  "JqZWN0LnZhbHVlcyhyZXNwb25zZS5kYXRhKS5maWx0ZXIodG9rZW4gPT4gdHlwZW9mIHRv" +
  "a2VuID09PSAnc3RyaW5nJyAmJiB0b2tlbi5sZW5ndGggPiAxMCk7CiAgICAgICAgfQogIC" +
  "AgICAgIGlmIChhbGxvd2VkVG9rZW5zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBj" +
  "b25zb2xlLmVycm9yKGNoYWxrLnJlZChgW1RPS0VOIFZBTElEQVRJT05dIERhZnRhciB0b2" +
  "tlbiBrb3NvbmcgZGkgZGF0YWJhc2VgKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBh" +
  "bGxvd2VkVG9rZW5zOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLm" +
  "Vycm9yKGNoYWxrLnJlZChgW1RPS0VOIFZBTElEQVRJT05dIEdhZ2FsIG1lbmdhbWJpbCBk" +
  "YWZ0YXIgdG9rZW4gZGFyaSBkYXRhYmFzZTpgKSwgZXJyb3IubWVzc2FnZSk7CiAgICAgIC" +
  "AgcmV0dXJuIFtdOwogICAgfQp9CgoKCi8vIC0tLSBGVU5HU0kgVVBEQVRFIFRPS0VOIChT" +
  "aWthdCBzZW11YSBkdXBsaWthdCkgLS0tCmZ1bmN0aW9uIHNhdmVUb2tlblRvU2V0dGluZ3" +
  "ModG9rZW4pIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc2V0dGluZ3NGaWxlUGF0aCA9" +
  "IHBhdGguam9pbihfX2Rpcm5hbWUsICdzZXR0aW5ncy5qcycpOwogICAgICAgIGxldCBmaW" +
  "xlQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhzZXR0aW5nc0ZpbGVQYXRoLCAndXRmOCcp" +
  "OwogICAgICAgCiAgICAgICAgY29uc3QgdG9rZW5SZWdleCA9IC8oIlRPS0VOInxUT0tFTi" +
  "lccypbOj1dXHMqWyciXShbXiciXSopWyciXS9nOwogICAgICAgIAogICAgICAgIGlmICh0" +
  "b2tlblJlZ2V4LnRlc3QoZmlsZUNvbnRlbnQpKSB7CiAgICAgICAgICAgIGZpbGVDb250ZW" +
  "50ID0gZmlsZUNvbnRlbnQucmVwbGFjZSh0b2tlblJlZ2V4LCAobWF0Y2gsIHAxKSA9PiBg" +
  "JHtwMX06ICcke3Rva2VufSdgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaW" +
  "xlQ29udGVudCA9IGZpbGVDb250ZW50LnJlcGxhY2UoL307P1xzKiQvLCBgICBUT0tFTjog" +
  "JyR7dG9rZW59Jyxcbn07YCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZzLndyaX" +
  "RlRmlsZVN5bmMoc2V0dGluZ3NGaWxlUGF0aCwgZmlsZUNvbnRlbnQsICd1dGY4Jyk7CiAg" +
  "ICAgICAgLy8gVXBkYXRlIG1lbW9yaSBzdXBheWEgbGFuZ3N1bmcgc2lua3JvbgogICAgIC" +
  "AgIHNldHRpbmdzLlRPS0VOID0gdG9rZW47IAogICAgICAgIGNvbnNvbGUubG9nKGNoYWxr" +
  "LmdyZWVuKCLinIUgVG9rZW4gYmVyaGFzaWwgZGl1cGRhdGUgZGkgc2V0dGluZ3MuanMiKS" +
  "k7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAg" +
  "IGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkKCLinYwgR2FnYWwgbWVueWltcGFuIHRva2VuOi" +
  "IpLCBlcnJvci5tZXNzYWdlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCgph" +
  "c3luYyBmdW5jdGlvbiB2YWxpZGF0ZUJvdFRva2VuKHRva2VuKSB7CiAgICBjb25zdCBhbG" +
  "xvd2VkVG9rZW5zID0gYXdhaXQgZ2V0QWxsb3dlZFRva2VucygpOwogICAgaWYgKGFsbG93" +
  "ZWRUb2tlbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihjaGFsay" +
  "5yZWQoJ1tUT0tFTiBWQUxJREFUSU9OXSBUaWRhayBkYXBhdCBtZW5nYW1iaWwgZGFmdGFy" +
  "IHRva2VuIGRhcmkgR2l0SHViJykpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KIC" +
  "AgIGNvbnN0IGlzVmFsaWQgPSBhbGxvd2VkVG9rZW5zLmluY2x1ZGVzKHRva2VuLnRyaW0o" +
  "KSk7CiAgICByZXR1cm4gaXNWYWxpZDsKfQoKYXN5bmMgZnVuY3Rpb24gYXNrRm9yVG9rZW" +
  "4oKSB7CiAgICBjb25zdCByZWFkbGluZSA9IHJsLmNyZWF0ZUludGVyZmFjZSh7IGlucHV0" +
  "OiBwcm9jZXNzLnN0ZGluLCBvdXRwdXQ6IHByb2Nlc3Muc3Rkb3V0IH0pOwogICAgY29uc2" +
  "9sZS5sb2coY2hhbGsuY3lhbigi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXIikpOwogICAgY29uc29sZS5s" +
  "b2coY2hhbGsuY3lhbigi4pWRICAgICAgU0VUVVAgQk9UIFRFTEVHUkFNIFRPS0VOICAgIC" +
  "AgICDilZEiKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5jeWFuKCLilZrilZDilZDilZDi" +
  "lZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ" +
  "DilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDi" +
  "lZ0iKSk7CiAgICBsZXQgdG9rZW4gPSAnJzsKICAgIHdoaWxlICghdG9rZW4gfHwgIXRva2" +
  "VuLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICB0b2tlbiA9IGF3YWl0IHJlYWRsaW5lLnF1" +
  "ZXN0aW9uKGNoYWxrLmN5YW4oIk1hc3Vra2FuIFRva2VuIEJvdCAoZGFyaSBCb3RGYXRoZX" +
  "IpOiAiKSk7CiAgICAgICAgdG9rZW4gPSB0b2tlbi50cmltKCk7CiAgICAgICAgaWYgKCF0" +
  "b2tlbikgY29uc29sZS5sb2coY2hhbGsucmVkKCLinYwgVG9rZW4gdGlkYWsgYm9sZWgga2" +
  "9zb25nIikpOwogICAgICAgIGVsc2UgaWYgKCF0b2tlbi5pbmNsdWRlcygnOicpKSBjb25z" +
  "b2xlLmxvZyhjaGFsay5yZWQoIuKdjCBGb3JtYXQgdG9rZW4gdGlkYWsgdmFsaWQhIikpOw" +
  "ogICAgfQogICAgcmVhZGxpbmUuY2xvc2UoKTsKICAgIHJldHVybiB0b2tlbjsKfQoKCi8v" +
  "IC0tLSBGVU5HU0kgVVBEQVRFIE9XTkVSIElEIChTaW1wYW4ga2UgaWQgb3duZXIvT1dORV" +
  "JfSUQpIC0tLQphc3luYyBmdW5jdGlvbiBhc2tGb3JPd25lcklkKCkgewogICAgY29uc3Qg" +
  "cmVhZGxpbmUgPSBybC5jcmVhdGVJbnRlcmZhY2UoeyBpbnB1dDogcHJvY2Vzcy5zdGRpbi" +
  "wgb3V0cHV0OiBwcm9jZXNzLnN0ZG91dCB9KTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLmN5" +
  "YW4oIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkO" +
  "KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKV" +
  "kOKVkOKVkOKVkOKVkOKVkOKVlyIpKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLmN5YW4oIu" +
  "KVkSAgICAgIFNFVFVQIElEIFRFTEVHUkFNIE9XTkVSICAgICAgICAg4pWRIikpOwogICAg" +
  "Y29uc29sZS5sb2coY2hhbGsuY3lhbigi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIikpOwogICAgbGV0IG" +
  "93bmVySWQgPSAnJzsKICAgIHdoaWxlICghb3duZXJJZCB8fCBpc05hTihvd25lcklkKSkg" +
  "ewogICAgICAgIG93bmVySWQgPSBhd2FpdCByZWFkbGluZS5xdWVzdGlvbihjaGFsay5jeW" +
  "FuKCJNYXN1a2thbiBJRCBUZWxlZ3JhbSBBbmRhOiAiKSk7CiAgICAgICAgb3duZXJJZCA9" +
  "IG93bmVySWQudHJpbSgpOwogICAgICAgIGlmICghb3duZXJJZCkgY29uc29sZS5sb2coY2" +
  "hhbGsucmVkKCLinYwgSUQgdGlkYWsgYm9sZWgga29zb25nIikpOwogICAgICAgIGVsc2Ug" +
  "aWYgKGlzTmFOKG93bmVySWQpKSBjb25zb2xlLmxvZyhjaGFsay5yZWQoIuKdjCBJRCBoYX" +
  "J1cyBhbmdrYSEiKSk7CiAgICB9CiAgICByZWFkbGluZS5jbG9zZSgpOwogICAgcmV0dXJu" +
  "IG93bmVySWQ7Cn0KCmZ1bmN0aW9uIHNhdmVPd25lcklkVG9TZXR0aW5ncyhvd25lcklkKS" +
  "B7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHNldHRpbmdzRmlsZVBhdGggPSBwYXRoLmpv" +
  "aW4oX19kaXJuYW1lLCAnc2V0dGluZ3MuanMnKTsKICAgICAgICBsZXQgZmlsZUNvbnRlbn" +
  "QgPSBmcy5yZWFkRmlsZVN5bmMoc2V0dGluZ3NGaWxlUGF0aCwgJ3V0ZjgnKTsKICAgICAg" +
  "ICAKICAgICAgICAvLyBQYXN0aWthbiBuaWxhaSB5YW5nIGRpc2ltcGFuIGFkYWxhaCBhbm" +
  "drYSwgamlrYSBrb3NvbmcgamFkaWthbiAwCiAgICAgICAgY29uc3QgZmluYWxJZCA9IChv" +
  "d25lcklkICYmICFpc05hTihvd25lcklkKSkgPyBvd25lcklkIDogMDsKCiAgICAgICAgY2" +
  "9uc3QgaWRSZWdleCA9IC8oIk9XTkVSX0lEInxPV05FUl9JRClccypbOj1dXHMqWyciXT8o" +
  "W14nIixcc31dKilbJyJdPy9nOwogICAgICAgIAogICAgICAgIGlmIChpZFJlZ2V4LnRlc3" +
  "QoZmlsZUNvbnRlbnQpKSB7CiAgICAgICAgICAgIC8vIFNpbXBhbiBTRUJBR0FJIEFOR0tB" +
  "ICh0YW5wYSB0YW5kYSBrdXRpcCkKICAgICAgICAgICAgZmlsZUNvbnRlbnQgPSBmaWxlQ2" +
  "9udGVudC5yZXBsYWNlKGlkUmVnZXgsIGAiT1dORVJfSUQiOiAke2ZpbmFsSWR9YCk7CiAg" +
  "ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmlsZUNvbnRlbnQgPSBmaWxlQ29udGVudC" +
  "5yZXBsYWNlKC99Oz9ccyokLywgYCAgIk9XTkVSX0lEIjogJHtmaW5hbElkfSxcbn07YCk7" +
  "CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZzLndyaXRlRmlsZVN5bmMoc2V0dGluZ3" +
  "NGaWxlUGF0aCwgZmlsZUNvbnRlbnQsICd1dGY4Jyk7CiAgICAgICAgc2V0dGluZ3MuT1dO" +
  "RVJfSUQgPSBOdW1iZXIoZmluYWxJZCk7IC8vIFVwZGF0ZSBtZW1vcmkgc2ViYWdhaSBhbm" +
  "drYQogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAg" +
  "ICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCgovLyAtLS0gQUxVUiBWQUxJREFTSSBVVEFNQS" +
  "AtLS0KYXN5bmMgZnVuY3Rpb24gc2V0dXBBbmRWYWxpZGF0ZVRva2VuKCkgewogICAgY29u" +
  "c29sZS5sb2coY2hhbGsuYmx1ZSgi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXIikpOwogICAgY29uc29sZS" +
  "5sb2coY2hhbGsuYmx1ZSgi4pWRICAgICBUT0tFTiBWQUxJREFUSU9OIFNZU1RFTSAgICAg" +
  "ICAgICDilZEiKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5ibHVlKCLilZrilZDilZDilZ" +
  "DilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDi" +
  "lZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ" +
  "DilZ0iKSk7CiAgICAKICAgIGxldCB0b2tlbiA9IHNldHRpbmdzLlRPS0VOIHx8ICcnOwog" +
  "ICAgCiAgICAvLyAxLiBDZWsgVG9rZW4KICAgIGlmICghdG9rZW4gfHwgdG9rZW4ubGVuZ3" +
  "RoIDwgMTApIHsKICAgICAgICBjb25zb2xlLmxvZyhjaGFsay55ZWxsb3coIuKaoO+4jyBU" +
  "b2tlbiBiZWx1bSB2YWxpZCBkaSBzZXR0aW5ncy5qcyIpKTsKICAgICAgICB0b2tlbiA9IG" +
  "F3YWl0IGFza0ZvclRva2VuKCk7CiAgICAgICAgaWYgKCF0b2tlbi5pbmNsdWRlcygnOicp" +
  "KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgi4p2MIEZvcm1hdCB0b2" +
  "tlbiBzYWxhaCEiKSk7CiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgICAgICB9" +
  "CiAgICAgICAgY29uc3Qgc2F2ZWQgPSBzYXZlVG9rZW5Ub1NldHRpbmdzKHRva2VuKTsKIC" +
  "AgICAgICBpZiAoIXNhdmVkKSBwcm9jZXNzLmV4aXQoMSk7CiAgICB9CiAgICAKICAgIC8v" +
  "IDIuIFZhbGlkYXNpIFRva2VuIGtlIFNlcnZlcgogICAgY29uc3QgaXNWYWxpZCA9IGF3YW" +
  "l0IHZhbGlkYXRlQm90VG9rZW4odG9rZW4pOwogICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAg" +
  "ICAgY29uc29sZS5sb2coY2hhbGsucmVkKCLilZTilZDilZDilZDilZDilZDilZDilZDilZ" +
  "DilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDi" +
  "lZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZciKSk7CiAgICAgIC" +
  "AgY29uc29sZS5sb2coY2hhbGsucmVkKCLilZEgICAgIFRPS0VOIFRJREFLIFRFUkRBRlRB" +
  "UiAgICAgICAgICAg4pWRIikpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgi4p" +
  "Wa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWdIikpOwogICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgIH0KICAg" +
  "IAogICAgY29uc29sZS5sb2coY2hhbGsuZ3JlZW4oIuKVlOKVkOKVkOKVkOKVkOKVkOKVkO" +
  "KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKV" +
  "kOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlyIpKTsKIC" +
  "AgIGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKCLilZEgICAgIFRPS0VOIFZBTElEQVRJT04g" +
  "QkVSSEFTSUwgICAgICAgIOKVkSIpKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKC" +
  "LilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDi" +
  "lZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ" +
  "DilZDilZDilZDilZDilZ0iKSk7CgogICAgbGV0IG93bmVySWQgPSBzZXR0aW5ncy5PV05F" +
  "Ul9JRCB8fCAnJzsKICAgIGlmICghb3duZXJJZCB8fCBvd25lcklkID09PSAnMCcgfHwgb3" +
  "duZXJJZCA9PT0gMCkgewogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdygi4pqg" +
  "77iPIE93bmVyIElEIGJlbHVtIGRpc2V0ISIpKTsKICAgICAgICBvd25lcklkID0gYXdhaX" +
  "QgYXNrRm9yT3duZXJJZCgpOwogICAgICAgIGNvbnN0IHNhdmVkSWQgPSBzYXZlT3duZXJJ" +
  "ZFRvU2V0dGluZ3Mob3duZXJJZCk7CiAgICAgICAgaWYgKCFzYXZlZElkKSBwcm9jZXNzLm" +
  "V4aXQoMSk7CiAgICB9CiAgICAKICAgIHJldHVybiB0b2tlbjsKfQoKKGFzeW5jICgpID0+" +
  "IHsKICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc2V0dXBBbmRWYWxpZGF0ZVRva2VuKCk7Ci" +
  "AgICAgICAgCiAgICAgICAgY29uc29sZS5jbGVhcigpOyAKICAgICAgICAKICAgICAgICBj" +
  "b25zb2xlLmxvZyhjaGFsay5ib2xkLnllbGxvdygi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXIikpOwogIC" +
  "AgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJvbGQueWVsbG93KCLilZEgICAgICBJVkFTTVMg" +
  "Qk9UIFJFQ0lFVkUgQUNUSVZFRCAgICAgIOKVkSIpKTsKICAgICAgICBjb25zb2xlLmxvZy" +
  "hjaGFsay5ib2xkLnllbGxvdygi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ" +
  "4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p" +
  "WQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIikpOwogICAgICAgIAogICAg" +
  "ICAgIGNvbnNvbGUubG9nKGNoYWxrLmJvbGQuZ3JlZW4oIlxu8J+agCBTRU1VQSBWQUxJRE" +
  "FTSSBCRVJIQVNJTCwgTUVOWUFMQUtBTiBCT1QuLi4iKSk7CgogICAgICAgIGF3YWl0IGlu" +
  "aXRpYWxpemVCb3QoKTsKCiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcn" +
  "JvcihjaGFsay5yZWQoIuKdjCBFUlJPUjoiKSwgZS5tZXNzYWdlKTsKICAgICAgICBwcm9j" +
  "ZXNzLmV4aXQoMSk7CiAgICB9Cn0pKCk7CgoKCmNvbnN0IHNldHRpbmdzRmlsZVBhdGggPS" +
  "BwYXRoLmpvaW4oX19kaXJuYW1lLCAnc2V0dGluZ3MuanMnKTsKY29uc3QgVEVNUF9ESVIg" +
  "PSBwYXRoLmpvaW4oX19kaXJuYW1lLCAndGVtcCcpOwpjb25zdCBTU19ESVIgPSBwYXRoLm" +
  "pvaW4oVEVNUF9ESVIsICdzY3JlZW5zaG90cycpOwpjb25zdCBQUk9KRUNUX05BTUUgPSBz" +
  "ZXR0aW5ncy5QUk9KRUNUX05BTUUgfHwgIktJTExVQSBORVciOwpjb25zdCBMSVZFX1NNU1" +
  "9VUkwgPSAiaHR0cHM6Ly93d3cuaXZhc21zLmNvbS9wb3J0YWwvbGl2ZS9teV9zbXMiOwpj" +
  "b25zdCBSQU5HRV9CQVNFX1VSTCA9ICJodHRwczovL3d3dy5pdmFzbXMuY29tL3BvcnRhbC" +
  "9zbXMvdGVzdC9zbXMiOwpjb25zdCBEQVNIX1VSTCA9ICJodHRwczovL3d3dy5pdmFzbXMu" +
  "Y29tL3BvcnRhbCI7CmNvbnN0IENIRUNLX0lOVEVSVkFMX01TID0gMTUwMDA7CmNvbnN0IE" +
  "xPR19JTlRFUlZBTF9NUyA9IDUwMDA7CmNvbnN0IElOSVRJQUxfQ09OTkVDVF9USU1FT1VU" +
  "X01TID0gNjAwMDA7CmNvbnN0IFNDUkVFTlNIT1RfVElNRU9VVF9NUyA9IDYwMDAwOwpjb2" +
  "5zdCBNQUNCT09LX1VTRVJfQUdFTlQgPSAiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50" +
  "ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaW" +
  "tlIEdlY2tvKSBWZXJzaW9uLzE3LjAgU2FmYXJpLzYwNS4xLjE1IjsKY29uc3QgTUFDQk9P" +
  "S19WSUVXUE9SVCA9IHsgd2lkdGg6IDE0NDAsIGhlaWdodDogOTAwIH07CgpsZXQgaXNQb2" +
  "xsaW5nQWN0aXZlID0gZmFsc2U7CmxldCBsaXZlU21zUGFnZSA9IG51bGw7CmNvbnN0IHNl" +
  "bnRPdHBzID0gbmV3IFNldCgpOwpsZXQgbGFzdExvZ2dlZFN0YXR1cyA9ICdJbml0aWFsaX" +
  "ppbmcnOwpsZXQgbGFzdENoZWNrVGltZSA9ICJOL0EiOwpsZXQgZGlzY29ubmVjdEFsZXJ0" +
  "U2VudCA9IGZhbHNlOwpsZXQgYm90U3RhdHVzID0gJ0luaXRpYWxpemluZyc7CmxldCBicm" +
  "93c2VyID0gbnVsbDsKbGV0IGlzQnJvd3NlclJlYWR5ID0gZmFsc2U7CmxldCBkaXNjb25u" +
  "ZWN0UmV0cnlDb3VudCA9IDA7CmNvbnN0IE1BWF9GQVRBTF9GQUlMVVJFUyA9IDU7CmNvbn" +
  "N0IGJvdCA9IG5ldyBUZWxlZ3JhZihzZXR0aW5ncy5UT0tFTik7CmNvbnN0IE9XTkVSX0lE" +
  "ID0gTnVtYmVyKHNldHRpbmdzLk9XTkVSX0lEKTsKY29uc3QgQ0hBVF9JRCA9IE51bWJlci" +
  "hzZXR0aW5ncy5DSEFUX0lEKTsKbGV0IGxhc3RTdGF0dXNMb2cgPSAwOwpjb25zdCBTVEFU" +
  "VVNfTE9HX0lOVEVSVkFMID0gMzAwMDAwOwoKYm90LmNhdGNoKChlcnIsIGN0eCkgPT4gew" +
  "ogICAgY29uc29sZS5lcnJvcihjaGFsay5yZWQoYFtCT1QgRVJST1JdYCksIGVycik7CiAg" +
  "ICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZChgVXBkYXRlIHlhbmcgZXJyb3I6YCksIGN0eC" +
  "51cGRhdGUpOwp9KTsKCnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFz" +
  "b24sIHByb21pc2UpID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkKCdVbmhhbm" +
  "RsZWQgUmVqZWN0aW9uIGF0OicpLCBwcm9taXNlLCAncmVhc29uOicsIHJlYXNvbik7Cn0p" +
  "OwoKcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyb3IpID0+IHsKICAgIG" +
  "NvbnNvbGUuZXJyb3IoY2hhbGsucmVkKCdbU1RBVFVTXSBVbmNhdWdodCBFeGNlcHRpb246" +
  "JyksIGVycm9yKTsKfSk7Cgpjb25zdCBvd25lck9ubHkgPSBhc3luYyAoY3R4LCBuZXh0KS" +
  "A9PiB7CiAgICBjb25zdCB1c2VySWQgPSBjdHguZnJvbS5pZDsKICAgIGlmICh1c2VySWQg" +
  "PT09IE9XTkVSX0lEKSByZXR1cm4gbmV4dCgpOwogICAgaWYgKGN0eC51cGRhdGVUeXBlID" +
  "09PSAnbWVzc2FnZScgfHwgY3R4LnVwZGF0ZVR5cGUgPT09ICdjYWxsYmFja19xdWVyeScp" +
  "IHsKICAgICAgICBpZiAoY3R4LmNhbGxiYWNrUXVlcnkpIHsKICAgICAgICAgICAgYXdhaX" +
  "QgY3R4LmFuc3dlckNiUXVlcnkoIuKaoO+4jyBBa3NlcyBEaXRvbGFrLiBIYW55YSBPd25l" +
  "ciB5YW5nIGJpc2EgbWVuZ2d1bmFrYW4gcGVyaW50YWggaW5pLiIpOwogICAgICAgIH0gZW" +
  "xzZSB7CiAgICAgICAgICAgIGN0eC5yZXBseSgi4pqg77iPIEFrc2VzIERpdG9sYWsuIEhh" +
  "bnlhIE93bmVyIHlhbmcgYmlzYSBtZW5nZ3VuYWthbiBwZXJpbnRhaCBpbmkuIik7CiAgIC" +
  "AgICAgfQogICAgfQp9OwoKY29uc3QgcmVwbHlIVE1MID0gKGN0eCwgdGV4dCwga2V5Ym9h" +
  "cmQgPSB7fSkgPT4gewogICAgcmV0dXJuIGN0eC5yZXBseVdpdGhIVE1MKHRleHQsIHsgCi" +
  "AgICAgICAgcmVwbHlfbWFya3VwOiBrZXlib2FyZC5yZXBseV9tYXJrdXAsCiAgICAgICAg" +
  "cmVwbHlfdG9fbWVzc2FnZV9pZDogY3R4Lm1lc3NhZ2UgPyBjdHgubWVzc2FnZS5tZXNzYW" +
  "dlX2lkIDogdW5kZWZpbmVkCiAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNv" +
  "bGUuZXJyb3IoY2hhbGsucmVkKGBbUkVQTFkgRVJST1JdICR7ZXJyLm1lc3NhZ2V9YCkpOw" +
  "ogICAgICAgIC8vIEZhbGxiYWNrOiBjb2JhIGtpcmltIHRhbnBhIHJlcGx5CiAgICAgICAg" +
  "cmV0dXJuIGN0eC5yZXBseVdpdGhIVE1MKHRleHQsIHsgCiAgICAgICAgICAgIHJlcGx5X2" +
  "1hcmt1cDoga2V5Ym9hcmQucmVwbHlfbWFya3VwIAogICAgICAgIH0pLmNhdGNoKGNvbnNv" +
  "bGUuZXJyb3IpOwogICAgfSk7Cn07Cgpjb25zdCBkZWxldGVNZXNzYWdlID0gYXN5bmMgKG" +
  "N0eCkgPT4gewogICAgdHJ5IHsKICAgICAgICBpZiAoY3R4Lm1lc3NhZ2UgJiYgY3R4Lm1l" +
  "c3NhZ2UubWVzc2FnZV9pZCkgewogICAgICAgICAgICBhd2FpdCBjdHguZGVsZXRlTWVzc2" +
  "FnZShjdHgubWVzc2FnZS5tZXNzYWdlX2lkKTsKICAgICAgICB9IGVsc2UgaWYgKGN0eC5j" +
  "YWxsYmFja1F1ZXJ5ICYmIGN0eC5jYWxsYmFja1F1ZXJ5Lm1lc3NhZ2UpIHsKICAgICAgIC" +
  "AgICAgYXdhaXQgY3R4LmRlbGV0ZU1lc3NhZ2UoY3R4LmNhbGxiYWNrUXVlcnkubWVzc2Fn" +
  "ZS5tZXNzYWdlX2lkKTsKICAgICAgICB9CiAgICB9IGNhdGNoIChlKSB7fQp9OwoKY29uc3" +
  "QgZWRpdE9yUmVwbHlIVE1MID0gYXN5bmMgKGN0eCwgdGV4dCwga2V5Ym9hcmQsIG1lc3Nh" +
  "Z2VJZFRvRWRpdCkgPT4gewogICAgdHJ5IHsKICAgICAgICBpZiAoY3R4LmNhbGxiYWNrUX" +
  "VlcnkpIHsKICAgICAgICAgICAgYXdhaXQgY3R4LmFuc3dlckNiUXVlcnkoKS5jYXRjaCgo" +
  "KSA9PiB7fSk7CiAgICAgICAgfQogICAgICAgIGlmIChtZXNzYWdlSWRUb0VkaXQpIHsKIC" +
  "AgICAgICAgICAgY29uc3QgZWRpdGVkTWVzc2FnZSA9IGF3YWl0IGN0eC50ZWxlZ3JhbS5l" +
  "ZGl0TWVzc2FnZVRleHQoY3R4LmNoYXQuaWQsIG1lc3NhZ2VJZFRvRWRpdCwgbnVsbCwgdG" +
  "V4dCwgeyBwYXJzZV9tb2RlOiAnSFRNTCcsIHJlcGx5X21hcmt1cDoga2V5Ym9hcmQucmVw" +
  "bHlfbWFya3VwIH0pOwogICAgICAgICAgICByZXR1cm4gZWRpdGVkTWVzc2FnZTsKICAgIC" +
  "AgICB9CiAgICB9IGNhdGNoIChlKSB7fQogICAgcmV0dXJuIHJlcGx5SFRNTChjdHgsIHRl" +
  "eHQsIGtleWJvYXJkKTsKfTsKCmNvbnN0IGNodW5rQXJyYXkgPSAoYXJyLCBzaXplKSA9Pi" +
  "B7CiAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJy" +
  "Lmxlbmd0aDsgaSArPSBzaXplKSB7CiAgICAgICAgcmVzdWx0LnB1c2goYXJyLnNsaWNlKG" +
  "ksIGkgKyBzaXplKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0Owp9OwoKY29uc3QgZG93" +
  "bmxvYWRGaWxlID0gYXN5bmMgKGZpbGVJZCwgZmlsZU5hbWUpID0+IHsKICAgIGZzLm1rZG" +
  "lyU3luYyhURU1QX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7CiAgICBjb25zdCBsb2Nh" +
  "bFBhdGggPSBwYXRoLmpvaW4oVEVNUF9ESVIsIGZpbGVOYW1lKTsKICAgIHRyeSB7CiAgIC" +
  "AgICAgY29uc3QgZmlsZUxpbmsgPSBhd2FpdCBib3QudGVsZWdyYW0uZ2V0RmlsZUxpbmso" +
  "ZmlsZUlkKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zKHsKICAgIC" +
  "AgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgdXJsOiBmaWxlTGluay5ocmVm" +
  "LAogICAgICAgICAgICByZXNwb25zZVR5cGU6ICdzdHJlYW0nCiAgICAgICAgfSk7CiAgIC" +
  "AgICAgY29uc3Qgd3JpdGVyID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0obG9jYWxQYXRoKTsK" +
  "ICAgICAgICByZXNwb25zZS5kYXRhLnBpcGUod3JpdGVyKTsKICAgICAgICByZXR1cm4gbm" +
  "V3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICB3cml0ZXIu" +
  "b24oJ2ZpbmlzaCcsICgpID0+IHJlc29sdmUobG9jYWxQYXRoKSk7CiAgICAgICAgICAgIH" +
  "dyaXRlci5vbignZXJyb3InLCByZWplY3QpOwogICAgICAgIH0pOwogICAgfSBjYXRjaCAo" +
  "ZSkgewogICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2FsUGF0aCkpIHsKICAgICAgIC" +
  "AgICAgdHJ5IHsgZnMudW5saW5rU3luYyhsb2NhbFBhdGgpOyB9IGNhdGNoKGVycikgeyB9" +
  "CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBFcnJvcihgR2FnYWwgbWVuZ3VuZHVoIG" +
  "ZpbGUgZGFyaSBUZWxlZ3JhbTogJHtlLm1lc3NhZ2V9YCk7CiAgICB9Cn07Cgpjb25zdCBk" +
  "ZXRlY3RUeXBlQnlOYW1lID0gKGZpbGVOYW1lKSA9PiB7CiAgICBjb25zdCBleHQgPSBwYX" +
  "RoLmV4dG5hbWUoZmlsZU5hbWUpLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoWycuY3N2Jywg" +
  "Jy50eHQnXS5pbmNsdWRlcyhleHQpKSByZXR1cm4gJ2Nzdic7CiAgICBpZiAoWycueGxzeC" +
  "csICcueGxzJ10uaW5jbHVkZXMoZXh0KSkgcmV0dXJuICd4bHN4JzsKICAgIGlmIChbJy52" +
  "Y2YnLCAnLnZjYXJkJ10uaW5jbHVkZXMoZXh0KSkgcmV0dXJuICd2Y2YnOwogICAgcmV0dX" +
  "JuIG51bGw7Cn07Cgpjb25zdCBnZXRDb3VudHJ5SW5mbyA9IChudW1iZXIpID0+IHsKICAg" +
  "IHRyeSB7CiAgICAgICAgY29uc3QgbnVtID0gbnVtYmVyLnN0YXJ0c1dpdGgoJysnKSA/IG" +
  "51bWJlciA6IGArJHtudW1iZXJ9YDsKICAgICAgICBjb25zdCBwID0gcGFyc2VQaG9uZU51" +
  "bWJlcihudW0pOwogICAgICAgIGlmIChwICYmIHAuaXNWYWxpZCgpICYmIHAuY291bnRyeS" +
  "kgewogICAgICAgICAgICByZXR1cm4gbmV3IEludGwuRGlzcGxheU5hbWVzKFsnZW4nXSwg" +
  "eyB0eXBlOiAncmVnaW9uJyB9KS5vZihwLmNvdW50cnkpIHx8IHAuY291bnRyeTsKICAgIC" +
  "AgICB9CiAgICB9IGNhdGNoIChlKSB7fQogICAgcmV0dXJuICJVTktOT1dOIjsKfTsKCmNv" +
  "bnN0IGlzTGlrZWx5UGhvbmVOdW1iZXIgPSAodmFsdWUpID0+IHsKICAgIGlmICh0eXBlb2" +
  "YgdmFsdWUgIT09ICdzdHJpbmcnKSB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7CiAgICBjb25z" +
  "dCBjbGVhblZhbHVlID0gdmFsdWUudHJpbSgpLnJlcGxhY2UoL1tcc1woXCktXS9nLCAnJy" +
  "k7CiAgICByZXR1cm4gL15cKz9cZHs4LDE1fSQvLnRlc3QoY2xlYW5WYWx1ZSk7Cn07Cgpj" +
  "b25zdCBnZXRDb3VudHJ5RmxhZyA9IChjb3VudHJ5TmFtZSkgPT4gewogICAgY29uc3QgZm" +
  "xhZ01hcCA9IHsKICAgICAgICAnSU5ET05FU0lBJzogJ/Cfh67wn4epJywgJ01PWkFNQklR" +
  "VUUnOiAn8J+HsvCfh78nLCAnU1JJIExBTktBJzogJ/Cfh7Hwn4ewJywKICAgICAgICAnTU" +
  "FMQVlTSUEnOiAn8J+HsvCfh74nLCAnVEhBSUxBTkQnOiAn8J+HufCfh60nLCAnVklFVE5B" +
  "TSc6ICfwn4e78J+HsycsCiAgICAgICAgJ1BISUxJUFBJTkVTJzogJ/Cfh7Xwn4etJywgJ1" +
  "NJTkdBUE9SRSc6ICfwn4e48J+HrCcsICdJTkRJQSc6ICfwn4eu8J+HsycsCiAgICAgICAg" +
  "J1BBS0lTVEFOJzogJ/Cfh7Xwn4ewJywgJ0JBTkdMQURFU0gnOiAn8J+Hp/Cfh6knLCAnTk" +
  "VQQUwnOiAn8J+Hs/Cfh7UnLAogICAgICAgICdDSElOQSc6ICfwn4eo8J+HsycsICdKQVBB" +
  "Tic6ICfwn4ev8J+HtScsICdTT1VUSCBLT1JFQSc6ICfwn4ew8J+HtycsCiAgICAgICAgJ1" +
  "JVU1NJQSc6ICfwn4e38J+HuicsICdVS1JBSU5FJzogJ/Cfh7rwn4emJywgJ1BPTEFORCc6" +
  "ICfwn4e18J+HsScsCiAgICAgICAgJ0dFUk1BTlknOiAn8J+HqfCfh6onLCAnRlJBTkNFJz" +
  "ogJ/Cfh6vwn4e3JywgJ0lUQUxZJzogJ/Cfh67wn4e5JywKICAgICAgICAnU1BBSU4nOiAn" +
  "8J+HqvCfh7gnLCAnUE9SVFVHQUwnOiAn8J+HtfCfh7knLCAnTkVUSEVSTEFORFMnOiAn8J" +
  "+Hs/Cfh7EnLAogICAgICAgICdCRUxHSVVNJzogJ/Cfh6fwn4eqJywgJ1NXSVRaRVJMQU5E" +
  "JzogJ/Cfh6jwn4etJywgJ0FVU1RSSUEnOiAn8J+HpvCfh7knLAogICAgICAgICdVTklURU" +
  "QgS0lOR0RPTSc6ICfwn4es8J+HpycsICdJUkVMQU5EJzogJ/Cfh67wn4eqJywgJ1NXRURF" +
  "Tic6ICfwn4e48J+HqicsCiAgICAgICAgJ05PUldBWSc6ICfwn4ez8J+HtCcsICdERU5NQV" +
  "JLJzogJ/Cfh6nwn4ewJywgJ0ZJTkxBTkQnOiAn8J+Hq/Cfh64nLAogICAgICAgICdVU0En" +
  "OiAn8J+HuvCfh7gnLCAnQ0FOQURBJzogJ/Cfh6jwn4emJywgJ01FWElDTyc6ICfwn4ey8J" +
  "+HvScsCiAgICAgICAgJ0JSQVpJTCc6ICfwn4en8J+HtycsICdBUkdFTlRJTkEnOiAn8J+H" +
  "pvCfh7cnLCAnQ09MT01CSUEnOiAn8J+HqPCfh7QnLAogICAgICAgICdQRVJVJzogJ/Cfh7" +
  "Xwn4eqJywgJ0NISUxFJzogJ/Cfh6jwn4exJywgJ1ZFTkVaVUVMQSc6ICfwn4e78J+Hqics" +
  "CiAgICAgICAgJ1NPVVRIIEFGUklDQSc6ICfwn4e/8J+HpicsICdOSUdFUklBJzogJ/Cfh7" +
  "Pwn4esJywgJ0VHWVBUJzogJ/Cfh6rwn4esJywKICAgICAgICAnS0VOWUEnOiAn8J+HsPCf" +
  "h6onLCAnRVRISU9QSUEnOiAn8J+HqvCfh7knLCAnR0hBTkEnOiAn8J+HrPCfh60nLAogIC" +
  "AgICAgICdBVVNUUkFMSUEnOiAn8J+HpvCfh7onLCAnTkVXIFpFQUxBTkQnOiAn8J+Hs/Cf" +
  "h78nLAogICAgICAgICdBRkdIQU5JU1RBTic6ICfwn4em8J+HqycsICdBTEJBTklBJzogJ/" +
  "Cfh6bwn4exJywgJ0FMR0VSSUEnOiAn8J+HqfCfh78nLAogICAgICAgICdBTkRPUlJBJzog" +
  "J/Cfh6bwn4epJywgJ0FOR09MQSc6ICfwn4em8J+HtCcsICdBTlRJR1VBIEFORCBCQVJCVU" +
  "RBJzogJ/Cfh6bwn4esJywKICAgICAgICAnQVJNRU5JQSc6ICfwn4em8J+HsicsICdBWkVS" +
  "QkFJSkFOJzogJ/Cfh6bwn4e/JywgJ0JBSEFNQVMnOiAn8J+Hp/Cfh7gnLAogICAgICAgIC" +
  "dCQUhSQUlOJzogJ/Cfh6fwn4etJywgJ0JBUkJBRE9TJzogJ/Cfh6fwn4enJywgJ0JFTEFS" +
  "VVMnOiAn8J+Hp/Cfh74nLAogICAgICAgICdCRUxJWkUnOiAn8J+Hp/Cfh78nLCAnQkVOSU" +
  "4nOiAn8J+Hp/Cfh68nLCAnQkhVVEFOJzogJ/Cfh6fwn4e5JywKICAgICAgICAnQk9MSVZJ" +
  "QSc6ICfwn4en8J+HtCcsICdCT1NOSUEgQU5EIEhFUlpFR09WSU5BJzogJ/Cfh6fwn4emJy" +
  "wgJ0JPVFNXQU5BJzogJ/Cfh6fwn4e8JywKICAgICAgICAnQlJVTkVJJzogJ/Cfh6fwn4ez" +
  "JywgJ0JVTEdBUklBJzogJ/Cfh6fwn4esJywgJ0JVUktJTkEgRkFTTyc6ICfwn4en8J+Hqy" +
  "csCiAgICAgICAgJ0JVUlVOREknOiAn8J+Hp/Cfh64nLCAnQ0FNQk9ESUEnOiAn8J+HsPCf" +
  "h60nLCAnQ0FNRVJPT04nOiAn8J+HqPCfh7InLAogICAgICAgICdDQVBFIFZFUkRFJzogJ/" +
  "Cfh6jwn4e7JywgJ0NFTlRSQUwgQUZSSUNBTiBSRVBVQkxJQyc6ICfwn4eo8J+HqycsICdD" +
  "SEFEJzogJ/Cfh7nwn4epJywKICAgICAgICAnQ09NT1JPUyc6ICfwn4ew8J+HsicsICdDT0" +
  "5HTyAoQlJBWlpBVklMTEUpJzogJ/Cfh6jwn4esJywgJ0NPTkdPIChLSU5TSEFTQSknOiAn" +
  "8J+HqPCfh6knLAogICAgICAgICdDT1NUQSBSSUNBJzogJ/Cfh6jwn4e3JywgJ0NST0FUSU" +
  "EnOiAn8J+HrfCfh7cnLCAnQ1VCQSc6ICfwn4eo8J+HuicsCiAgICAgICAgJ0NZUFJVUyc6" +
  "ICfwn4eo8J+HvicsICdDWkVDSElBJzogJ/Cfh6jwn4e/JywgJ0RKSUJPVVRJJzogJ/Cfh6" +
  "nwn4evJywKICAgICAgICAnRE9NSU5JQ0EnOiAn8J+HqfCfh7InLCAnRE9NSU5JQ0FOIFJF" +
  "UFVCTElDJzogJ/Cfh6nwn4e0JywgJ0VBU1QgVElNT1InOiAn8J+HufCfh7EnLAogICAgIC" +
  "AgICdFQ1VBRE9SJzogJ/Cfh6rwn4eoJywgJ0VMIFNBTFZBRE9SJzogJ/Cfh7jwn4e7Jywg" +
  "J0VRVUFUT1JJQUwgR1VJTkVBJzogJ/Cfh6zwn4e2JywKICAgICAgICAnRVJJVFJFQSc6IC" +
  "fwn4eq8J+HtycsICdFU1RPTklBJzogJ/Cfh6rwn4eqJywgJ0VTV0FUSU5JJzogJ/Cfh7jw" +
  "n4e/JywKICAgICAgICAnRklKSSc6ICfwn4er8J+HrycsICdHQUJPTic6ICfwn4es8J+Hpi" +
  "csICdHQU1CSUEnOiAn8J+HrPCfh7InLAogICAgICAgICdHRU9SR0lBJzogJ/Cfh6zwn4eq" +
  "JywgJ0dSRUVDRSc6ICfwn4es8J+HtycsICdHUkVOQURBJzogJ/Cfh6zwn4epJywKICAgIC" +
  "AgICAnR1VBVEVNQUxBJzogJ/Cfh6zwn4e5JywgJ0dVSU5FQSc6ICfwn4es8J+HsycsICdH" +
  "VUlORUEtQklTU0FVJzogJ/Cfh6zwn4e8JywKICAgICAgICAnR1VZQU5BJzogJ/Cfh6zwn4" +
  "e+JywgJ0hBSVRJJzogJ/Cfh63wn4e5JywgJ0hPTkRVUkFTJzogJ/Cfh63wn4ezJywKICAg" +
  "ICAgICAnSFVOR0FSWSc6ICfwn4et8J+HuicsICdJQ0VMQU5EJzogJ/Cfh67wn4e4JywgJ0" +
  "lSQU4nOiAn8J+HrvCfh7cnLAogICAgICAgICdJUkFRJzogJ/Cfh67wn4e2JywgJ0lTUkFF" +
  "TCc6ICfwn4eu8J+HsScsICdKQU1BSUNBJzogJ/Cfh6/wn4eyJywKICAgICAgICAnSk9SRE" +
  "FOJzogJ/Cfh6/wn4e0JywgJ0tBWkFLSFNUQU4nOiAn8J+HsPCfh78nLCAnS0lSSUJBVEkn" +
  "OiAn8J+HsPCfh64nLAogICAgICAgICdLVVdBSVQnOiAn8J+HsPCfh7wnLCAnS1lSR1laU1" +
  "RBTic6ICfwn4ew8J+HrCcsICdMQU9TJzogJ/Cfh7Hwn4emJywKICAgICAgICAnTEFUVklB" +
  "JzogJ/Cfh7Hwn4e7JywgJ0xFQkFOT04nOiAn8J+HsfCfh6cnLCAnTEVTT1RITyc6ICfwn4" +
  "ex8J+HuCcsCiAgICAgICAgJ0xJQkVSSUEnOiAn8J+HsfCfh7cnLCAnTElCWUEnOiAn8J+H" +
  "sfCfh74nLCAnTElFQ0hURU5TVEVJTic6ICfwn4ex8J+HricsCiAgICAgICAgJ0xJVEhVQU" +
  "5JQSc6ICfwn4ex8J+HuScsICdMVVhFTUJPVVJHJzogJ/Cfh7Hwn4e6JywgJ01BREFHQVND" +
  "QVInOiAn8J+HsvCfh6wnLAogICAgICAgICdNQUxBV0knOiAn8J+HsvCfh7wnLCAnTUFMRE" +
  "lWRVMnOiAn8J+HsvCfh7snLCAnTUFMSSc6ICfwn4ey8J+HsScsCiAgICAgICAgJ01BTFRB" +
  "JzogJ/Cfh7Lwn4e5JywgJ01BUlNIQUxMIElTTEFORFMnOiAn8J+HsvCfh60nLCAnTUFVUk" +
  "lUQU5JQSc6ICfwn4ey8J+HtycsCiAgICAgICAgJ01BVVJJVElVUyc6ICfwn4ey8J+Huics" +
  "ICdNSUNST05FU0lBJzogJ/Cfh6vwn4eyJywgJ01PTERPVkEnOiAn8J+HsvCfh6knLAogIC" +
  "AgICAgICdNT05BQ08nOiAn8J+HsvCfh6gnLCAnTU9OR09MSUEnOiAn8J+HsvCfh7MnLCAn" +
  "TU9OVEVORUdSTyc6ICfwn4ey8J+HqicsCiAgICAgICAgJ01PUk9DQ08nOiAn8J+HsvCfh6" +
  "YnLCAnTVlBTk1BUic6ICfwn4ey8J+HsicsICdOQU1JQklBJzogJ/Cfh7Pwn4emJywKICAg" +
  "ICAgICAnTkFVUlUnOiAn8J+Hs/Cfh7cnLCAnTklDQVJBR1VBJzogJ/Cfh7Pwn4euJywgJ0" +
  "5JR0VSJzogJ/Cfh7Pwn4eqJywKICAgICAgICAnTk9SVEggS09SRUEnOiAn8J+HsPCfh7Un" +
  "LCAnTk9SVEggTUFDRURPTklBJzogJ/Cfh7Lwn4ewJywgJ09NQU4nOiAn8J+HtPCfh7InLA" +
  "ogICAgICAgICdQQUxBVSc6ICfwn4e18J+HvCcsICdQQU5BTUEnOiAn8J+HtfCfh6YnLCAn" +
  "UEFQVUEgTkVXIEdVSU5FQSc6ICfwn4e18J+HrCcsCiAgICAgICAgJ1BBUkFHVUFZJzogJ/" +
  "Cfh7Xwn4e+JywgJ1FBVEFSJzogJ/Cfh7bwn4emJywgJ1JPTUFOSUEnOiAn8J+Ht/Cfh7Qn" +
  "LAogICAgICAgICdSV0FOREEnOiAn8J+Ht/Cfh7wnLCAnU0FJTlQgS0lUVFMgQU5EIE5FVk" +
  "lTJzogJ/Cfh7Dwn4ezJywgJ1NBSU5UIExVQ0lBJzogJ/Cfh7Hwn4eoJywKICAgICAgICAn" +
  "U0FJTlQgVklOQ0VOVCBBTkQgVEhFIEdSRU5BRElORVMnOiAn8J+Hu/Cfh6gnLCAnU0FNT0" +
  "EnOiAn8J+HvPCfh7gnLCAnU0FOIE1BUklOTyc6ICfwn4e48J+HsicsCiAgICAgICAgJ1NB" +
  "TyBUT01FIEFORCBQUklOQ0lQRSc6ICfwn4e48J+HuScsICdTQVVESSBBUkFCSUEnOiAn8J" +
  "+HuPCfh6YnLCAnU0VORUdBTCc6ICfwn4e48J+HsycsCiAgICAgICAgJ1NFUkJJQSc6ICfw" +
  "n4e38J+HuCcsICdTRVlDSEVMTEVTJzogJ/Cfh7jwn4eoJywgJ1NJRVJSQSBMRU9ORSc6IC" +
  "fwn4e48J+HsScsCiAgICAgICAgJ1NMT1ZBS0lBJzogJ/Cfh7jwn4ewJywgJ1NMT1ZFTklB" +
  "JzogJ/Cfh7jwn4euJywgJ1NPTE9NT04gSVNMQU5EUyc6ICfwn4e48J+HpycsCiAgICAgIC" +
  "AgJ1NPTUFMSUEnOiAn8J+HuPCfh7QnLCAnU09VVEggU1VEQU4nOiAn8J+HuPCfh7gnLCAn" +
  "U1VEQU4nOiAn8J+HuPCfh6knLAogICAgICAgICdTVVJJTkFNRSc6ICfwn4e48J+HtycsIC" +
  "dTWVJJQSc6ICfwn4e48J+HvicsICdUQUpJS0lTVEFOJzogJ/Cfh7nwn4evJywKICAgICAg" +
  "ICAnVEFOWkFOSUEnOiAn8J+HufCfh78nLCAnVE9HTyc6ICfwn4e58J+HrCcsICdUT05HQS" +
  "c6ICfwn4e58J+HtCcsCiAgICAgICAgJ1RSSU5JREFEIEFORCBUT0JBR08nOiAn8J+HufCf" +
  "h7knLCAnVFVOSVNJQSc6ICfwn4e58J+HsycsICdUVVJLRVknOiAn8J+HufCfh7cnLAogIC" +
  "AgICAgICdUVVJLTUVOSVNUQU4nOiAn8J+HufCfh7InLCAnVFVWQUxVJzogJ/Cfh7nwn4e7" +
  "JywgJ1VHQU5EQSc6ICfwn4e68J+HrCcsCiAgICAgICAgJ1VOSVRFRCBBUkFCIEVNSVJBVE" +
  "VTJzogJ/Cfh6bwn4eqJywgJ1VSVUdVQVknOiAn8J+HuvCfh74nLCAnVVpCRUtJU1RBTic6" +
  "ICfwn4e68J+HvycsCiAgICAgICAgJ1ZBTlVBVFUnOiAn8J+Hu/Cfh7onLCAnVkFUSUNBTi" +
  "BDSVRZJzogJ/Cfh7vwn4emJywgJ1lFTUVOJzogJ/Cfh77wn4eqJywKICAgICAgICAnWkFN" +
  "QklBJzogJ/Cfh7/wn4eyJywgJ1pJTUJBQldFJzogJ/Cfh7/wn4e8JwogICAgfTsKICAgIG" +
  "NvbnN0IGNsZWFuQ291bnRyeSA9IGNvdW50cnlOYW1lLnJlcGxhY2UoL1xzK1xkKyQvLCAn" +
  "JykudG9VcHBlckNhc2UoKTsKICAgIHJldHVybiBmbGFnTWFwW2NsZWFuQ291bnRyeV0gfH" +
  "wgJ/Cfj7QnOwp9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "IC8vCi8vID09PT09PT09PT0gU0VUVElOR1MgSEVMUEVSID09PT09PT09PSAvLwovLyA9PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCmNvbnN0IHJlbG9hZFNl" +
  "dHRpbmdzID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgICAvLyBDbGVhciBjYWNoZQogIC" +
  "AgICAgIGRlbGV0ZSByZXF1aXJlLmNhY2hlW3JlcXVpcmUucmVzb2x2ZSgnLi9zZXR0aW5n" +
  "cy5qcycpXTsKICAgICAgICAKICAgICAgICAvLyBMb2FkIGZyZXNoIHNldHRpbmdzCiAgIC" +
  "AgICAgY29uc3QgZnJlc2hTZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MuanMnKTsK" +
  "ICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgZ2xvYmFsIHNldHRpbmdzIG9iamVjdAogIC" +
  "AgICAgIE9iamVjdC5rZXlzKGZyZXNoU2V0dGluZ3MpLmZvckVhY2goa2V5ID0+IHsKICAg" +
  "ICAgICAgICAgc2V0dGluZ3Nba2V5XSA9IGZyZXNoU2V0dGluZ3Nba2V5XTsKICAgICAgIC" +
  "B9KTsKICAgICAgICAKICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbignW1NFVFRJ" +
  "TkdTXSDinIUgU2V0dGluZ3MgcmVsb2FkZWQgc3VjY2Vzc2Z1bGx5JykpOwogICAgICAgIH" +
  "JldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVy" +
  "cm9yKGNoYWxrLnJlZCgnW1NFVFRJTkdTXSDinYwgRmFpbGVkIHRvIHJlbG9hZCBzZXR0aW" +
  "5nczonKSwgZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfTsKCmNvbnN0" +
  "IHdyaXRlU2V0dGluZ1RvRmlsZVN5bmMgPSAoa2V5LCB2YWx1ZSkgPT4gewogICAgdHJ5IH" +
  "sKICAgICAgICBjb25zdCBzZXR0aW5nc0ZpbGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFt" +
  "ZSwgJ3NldHRpbmdzLmpzJyk7CiAgICAgICAgCiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW" +
  "5jKHNldHRpbmdzRmlsZVBhdGgpKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2hh" +
  "bGsucmVkKGBbU0VUVElOR1NdIOKdjCBGaWxlIHNldHRpbmdzLmpzIHRpZGFrIGRpdGVtdW" +
  "thbiFgKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAg" +
  "CiAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHNldHRpbmdzRm" +
  "lsZVBhdGgsICd1dGY4Jyk7CiAgICAgICAgY29uc3QgY2xlYW5WYWx1ZSA9IHZhbHVlID8g" +
  "dmFsdWUudHJpbSgpIDogIiI7CiAgICAgICAgCiAgICAgICAgLy8gRXNjYXBlIGthcmFrdG" +
  "VyIGtodXN1cyB1bnR1ayBzdHJpbmcgSmF2YVNjcmlwdAogICAgICAgIGNvbnN0IGVzY2Fw" +
  "ZWRWYWx1ZSA9IGNsZWFuVmFsdWUucmVwbGFjZSgvXFwvZywgJ1xcXFwnKS5yZXBsYWNlKC" +
  "8nL2csICJcXCciKTsKICAgICAgICAKICAgICAgICAvLyBQYXR0ZXJuIGxlYmloIHNwZXNp" +
  "ZmlrIHVudHVrIG1lbmNhcmkga2V5IGRpIGRhbGFtIG1vZHVsZS5leHBvcnRzCiAgICAgIC" +
  "AgY29uc3QgZXhwb3J0UGF0dGVybiA9IC9tb2R1bGVcLmV4cG9ydHNccyo9XHMqeyhbXHNc" +
  "U10qPyl9LzsKICAgICAgICBjb25zdCBtYXRjaCA9IGZpbGVDb250ZW50Lm1hdGNoKGV4cG" +
  "9ydFBhdHRlcm4pOwogICAgICAgIAogICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAg" +
  "ICAgY29uc29sZS5lcnJvcihjaGFsay5yZWQoYFtTRVRUSU5HU10g4p2MIEZvcm1hdCBtb2" +
  "R1bGUuZXhwb3J0cyB0aWRhayBkaXRlbXVrYW4hYCkpOwogICAgICAgICAgICByZXR1cm4g" +
  "ZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IGlubmVyQ29udGVudC" +
  "A9IG1hdGNoWzFdOwogICAgICAgIGNvbnN0IGtleVBhdHRlcm4gPSBuZXcgUmVnRXhwKGAo" +
  "JHtrZXl9XFxzKls9Ol1cXHMqWyciXSkoW14nIl0qKShbJyJdKWAsICdpJyk7CiAgICAgIC" +
  "AgY29uc3Qga2V5TWF0Y2ggPSBpbm5lckNvbnRlbnQubWF0Y2goa2V5UGF0dGVybik7CiAg" +
  "ICAgICAgCiAgICAgICAgbGV0IG5ld0lubmVyQ29udGVudDsKICAgICAgICAKICAgICAgIC" +
  "BpZiAoa2V5TWF0Y2gpIHsKICAgICAgICAgICAgLy8gS2V5IHN1ZGFoIGFkYSwgcmVwbGFj" +
  "ZSB2YWx1ZS1ueWEKICAgICAgICAgICAgbmV3SW5uZXJDb250ZW50ID0gaW5uZXJDb250ZW" +
  "50LnJlcGxhY2Uoa2V5UGF0dGVybiwgYCQxJHtlc2NhcGVkVmFsdWV9JDNgKTsKICAgICAg" +
  "ICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gS2V5IGJlbHVtIGFkYS" +
  "wgdGFtYmFoa2FuIGtlIGFraGlyIG9iamVjdCBzZWJlbHVtIHBlbnV0dXAgfQogICAgICAg" +
  "ICAgICBsZXQgdHJpbW1lZElubmVyID0gaW5uZXJDb250ZW50LnRyaW0oKTsKICAgICAgIC" +
  "AgICAgCiAgICAgICAgICAgIC8vIFRhbWJhaGthbiBrb21hIGppa2EgaW5uZXIgY29udGVu" +
  "dCB0aWRhayBrb3NvbmcgZGFuIHRpZGFrIGJlcmFraGlyIGRlbmdhbiBrb21hCiAgICAgIC" +
  "AgICAgIGlmICh0cmltbWVkSW5uZXIubGVuZ3RoID4gMCAmJiAhdHJpbW1lZElubmVyLmVu" +
  "ZHNXaXRoKCcsJykgJiYgIXRyaW1tZWRJbm5lci5lbmRzV2l0aCgneycpKSB7CiAgICAgIC" +
  "AgICAgICAgICB0cmltbWVkSW5uZXIgKz0gJywnOwogICAgICAgICAgICB9CiAgICAgICAg" +
  "ICAgIAogICAgICAgICAgICAvLyBUYW1iYWhrYW4ga2V5IGJhcnUKICAgICAgICAgICAgbm" +
  "V3SW5uZXJDb250ZW50ID0gdHJpbW1lZElubmVyICsgYFxuICAgICR7a2V5fTogJyR7ZXNj" +
  "YXBlZFZhbHVlfScsYDsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgIC" +
  "AgIC8vIFJlY29uc3RydWN0IHRoZSBlbnRpcmUgZmlsZSBjb250ZW50CiAgICAgICAgY29u" +
  "c3QgbmV3Q29udGVudCA9IGZpbGVDb250ZW50LnJlcGxhY2UoZXhwb3J0UGF0dGVybiwgYG" +
  "1vZHVsZS5leHBvcnRzID0geyR7bmV3SW5uZXJDb250ZW50fVxufWApOwogICAgICAgIAog" +
  "ICAgICAgIGZzLndyaXRlRmlsZVN5bmMoc2V0dGluZ3NGaWxlUGF0aCwgbmV3Q29udGVudC" +
  "wgJ3V0ZjgnKTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgY2FjaGUgc2V0dGluZ3MK" +
  "ICAgICAgICBpZiAoc2V0dGluZ3Nba2V5XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgIC" +
  "AgIHNldHRpbmdzW2tleV0gPSBjbGVhblZhbHVlOwogICAgICAgIH0KICAgICAgICAKICAg" +
  "ICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgIH0gY2F0Y2ggKGVycikgewogICAgIC" +
  "AgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkKGBbU0VUVElOR1NdIOKdjCBHYWdhbCB1cGRh" +
  "dGUgJHtrZXl9OmApLCBlcnIubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogIC" +
  "AgfQp9OwoKY29uc3QgdXBkYXRlU2V0dGluZ1NpbGVudCA9IChrZXksIHZhbHVlKSA9PiB7" +
  "CiAgICBjb25zdCBjbGVhblZhbHVlID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiAiIjsKIC" +
  "AgIAogICAgLy8gQ2xlYXIgY2FjaGUgc2ViZWx1bSBtZW1iYWNhIHVsYW5nCiAgICBkZWxl" +
  "dGUgcmVxdWlyZS5jYWNoZVtyZXF1aXJlLnJlc29sdmUoJy4vc2V0dGluZ3MuanMnKV07Ci" +
  "AgICAKICAgIGNvbnN0IHN1Y2Nlc3MgPSB3cml0ZVNldHRpbmdUb0ZpbGVTeW5jKGtleSwg" +
  "Y2xlYW5WYWx1ZSk7CiAgICAKICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgLy8gRm9yY2" +
  "UgcmVsb2FkIHNldHRpbmdzCiAgICAgICAgZGVsZXRlIHJlcXVpcmUuY2FjaGVbcmVxdWly" +
  "ZS5yZXNvbHZlKCcuL3NldHRpbmdzLmpzJyldOwogICAgICAgIGNvbnN0IG5ld1NldHRpbm" +
  "dzID0gcmVxdWlyZSgnLi9zZXR0aW5ncy5qcycpOwogICAgICAgIAogICAgICAgIC8vIFVw" +
  "ZGF0ZSBnbG9iYWwgc2V0dGluZ3Mgb2JqZWN0CiAgICAgICAgT2JqZWN0LmtleXMobmV3U2" +
  "V0dGluZ3MpLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgIHNldHRpbmdzW2tdID0gbmV3" +
  "U2V0dGluZ3Nba107CiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIHJldHVybiBzdWNjZX" +
  "NzOwp9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCi8v" +
  "ID09PT09PT09PT0gU1RBVEUgTUFOQUdFTUVOVCA9PT09PT09PSAvLwovLyA9PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCmxldCB1c2VyU3RhdGUgPSBuZXcg" +
  "TWFwKCk7IC8vIEd1bmFrYW4gTWFwIHVudHVrIGxlYmloIGVmaXNpZW4KCmNvbnN0IHJlc2" +
  "V0VXNlclN0YXRlID0gKHVzZXJJZCkgPT4gewogICAgdXNlclN0YXRlLmRlbGV0ZSh1c2Vy" +
  "SWQpOwp9OwoKY29uc3Qgc2V0VXNlclN0YXRlID0gKHVzZXJJZCwgdHlwZSwgZGF0YSA9IH" +
  "t9KSA9PiB7CiAgICBjb25zdCBzdGF0ZSA9IHsKICAgICAgICB0eXBlOiB0eXBlLAogICAg" +
  "ICAgIGRhdGE6IGRhdGEsCiAgICAgICAgc3RlcDogJ2F3YWl0aW5nX2lucHV0JywKICAgIC" +
  "AgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgIH07CiAgICB1c2VyU3RhdGUuc2V0KHVz" +
  "ZXJJZCwgc3RhdGUpOwogICAgcmV0dXJuIHN0YXRlOwp9OwoKY29uc3QgZ2V0VXNlclN0YX" +
  "RlID0gKHVzZXJJZCkgPT4gewogICAgcmV0dXJuIHVzZXJTdGF0ZS5nZXQodXNlcklkKTsK" +
  "fTsKCi8vIENsZWFudXAgb2xkIHN0YXRlcyBzZXRpYXAgMzAgbWVuaXQKc2V0SW50ZXJ2YW" +
  "woKCkgPT4gewogICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgIGNvbnN0IFRISVJU" +
  "WV9NSU5VVEVTID0gMzAgKiA2MCAqIDEwMDA7CiAgICAKICAgIGZvciAoY29uc3QgW3VzZX" +
  "JJZCwgc3RhdGVdIG9mIHVzZXJTdGF0ZS5lbnRyaWVzKCkpIHsKICAgICAgICBpZiAobm93" +
  "IC0gc3RhdGUudGltZXN0YW1wID4gVEhJUlRZX01JTlVURVMpIHsKICAgICAgICAgICAgdX" +
  "NlclN0YXRlLmRlbGV0ZSh1c2VySWQpOwogICAgICAgIH0KICAgIH0KfSwgMTgwMDAwMCk7" +
  "Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwovLyA9PT09PT" +
  "09PT09IEJPVCBJTklUSUFMSVpFID09PT09PT09PT0gLy8KLy8gPT09PT09PT09PT09PT09" +
  "PT09PT09PT09PT09PT09PT09PT09IC8vCgpjb25zdCBpbml0aWFsaXplQm90ID0gYXN5bm" +
  "MgKCkgPT4gewogICAgZnMubWtkaXJTeW5jKFRFTVBfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1" +
  "ZSB9KTsKICAgIGZzLm1rZGlyU3luYyhTU19ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pOw" +
  "ogICAgCiAgICB0cnkgewogICAgICAgIC8vIERldGVrc2kgZGlzcGxheSBWTkMKICAgICAg" +
  "ICBsZXQgaGVhZGxlc3NNb2RlID0gJ25ldyc7CiAgICAgICAgbGV0IGRpc3BsYXlBcmdzID" +
  "0gW107CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgeyBleGVj" +
  "U3luYyB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpOwogICAgICAgICAgICBleGVjU3" +
  "luYygneGRweWluZm8gLWRpc3BsYXkgOjEgPiAvZGV2L251bGwgMj4mMScpOwogICAgICAg" +
  "ICAgICBoZWFkbGVzc01vZGUgPSBmYWxzZTsKICAgICAgICAgICAgZGlzcGxheUFyZ3MgPS" +
  "BbJy0tZGlzcGxheT06MSddOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAg" +
  "aGVhZGxlc3NNb2RlID0gJ25ldyc7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gUEVSQk" +
  "FJS0FOIFBBVEggQ0hST01JVU0gLS0tCiAgICAgICAgbGV0IGNocm9tZVBhdGggPSAnL3Vz" +
  "ci9iaW4vY2hyb21pdW0nOwogICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhjaHJvbWVQYX" +
  "RoKSkgewogICAgICAgICAgICBjaHJvbWVQYXRoID0gJy91c3IvYmluL2Nocm9taXVtLWJy" +
  "b3dzZXInOyAvLyBDb2JhIG5hbWEgYWx0ZXJuYXRpZgogICAgICAgIH0KICAgICAgICAvLy" +
  "AtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgCiAgICAgICAgLy8g" +
  "TGF1bmNoIGJyb3dzZXIgZGVuZ2FuIGFyZ3MKICAgICAgICBjb25zdCBicm93c2VyQXJncy" +
  "A9IFsKICAgICAgICAgICAgLi4uZGlzcGxheUFyZ3MsCiAgICAgICAgICAgICctLW5vLXNh" +
  "bmRib3gnLAogICAgICAgICAgICAnLS1kaXNhYmxlLXNldHVpZC1zYW5kYm94JywKICAgIC" +
  "AgICAgICAgJy0tZGlzYWJsZS1kZXYtc2htLXVzYWdlJywKICAgICAgICAgICAgJy0tbm8t" +
  "enlnb3RlJywKICAgICAgICAgICAgJy0td2luZG93LXNpemU9MTkyMCwxMDgwJywKICAgIC" +
  "AgICAgICAgJy0tc3RhcnQtbWF4aW1pemVkJywKICAgICAgICAgICAgJy0taW5jb2duaXRv" +
  "JywKICAgICAgICAgICAgJy0tZGlzYWJsZS1ibGluay1mZWF0dXJlcz1BdXRvbWF0aW9uQ2" +
  "9udHJvbGxlZCcsCiAgICAgICAgICAgICctLWxhbmc9ZW4tVVMsZW4nLAogICAgICAgICAg" +
  "ICAnLS1uby1kZWZhdWx0LWJyb3dzZXItY2hlY2snLAogICAgICAgICAgICAnLS1uby1maX" +
  "JzdC1ydW4nLAogICAgICAgICAgICAnLS10aW1lem9uZS1pZD1Bc2lhL0pha2FydGEnLAog" +
  "ICAgICAgICAgICAnLS1kaXNhYmxlLWZlYXR1cmVzPUlzb2xhdGVPcmlnaW5zLHNpdGUtcG" +
  "VyLXByb2Nlc3MnCiAgICAgICAgXTsKICAgICAgICAKICAgICAgICBicm93c2VyID0gYXdh" +
  "aXQgcHVwcGV0ZWVyRXh0cmEubGF1bmNoKHsKICAgICAgICAgICAgZXhlY3V0YWJsZVBhdG" +
  "g6IGNocm9tZVBhdGgsIC8vIE1lbmdndW5ha2FuIHZhcmlhYmVsIGNocm9tZVBhdGgKICAg" +
  "ICAgICAgICAgaGVhZGxlc3M6IGhlYWRsZXNzTW9kZSwKICAgICAgICAgICAgYXJnczogYn" +
  "Jvd3NlckFyZ3MsCiAgICAgICAgICAgIGlnbm9yZURlZmF1bHRBcmdzOiBbJy0tZW5hYmxl" +
  "LWF1dG9tYXRpb24nXSwKICAgICAgICAgICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsCiAgIC" +
  "AgICAgfSk7CiAgICAgICAgCiAgICAgICAgaXNCcm93c2VyUmVhZHkgPSB0cnVlOwogICAg" +
  "ICAgIGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKGBbU1RBVFVTXSDinJTvuI8gQlJPV1NFUi" +
  "BBQ1RJVkVEYCkpOwogICAgICAgIAogICAgICAgIC8vIENlayBhcGFrYWggc3VkYWggYWRh" +
  "IGNyZWRlbnRpYWxzCiAgICAgICAgaWYgKCFzZXR0aW5ncy5JVkFTX1VTRVJOQU1FIHx8IC" +
  "FzZXR0aW5ncy5JVkFTX1BBU1NXT1JEKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNo" +
  "YWxrLnllbGxvdygiW1NUQVRVU10g4pqg77iPIExvZ2luIGNyZWRlbnRpYWxzIG5vdCBmb3" +
  "VuZCIpKTsKICAgICAgICAgICAgY29uc3QgcmVhZGxpbmUgPSBybC5jcmVhdGVJbnRlcmZh" +
  "Y2UoeyBpbnB1dDogcHJvY2Vzcy5zdGRpbiwgb3V0cHV0OiBwcm9jZXNzLnN0ZG91dCB9KT" +
  "sKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCB1c2VybmFtZSA9ICcnOwogICAgICAg" +
  "ICAgICB3aGlsZSAoIXVzZXJuYW1lKSB7CiAgICAgICAgICAgICAgICB1c2VybmFtZSA9IG" +
  "F3YWl0IChhd2FpdCByZWFkbGluZS5xdWVzdGlvbihjaGFsay5jeWFuKCJNYXN1a2thbiBV" +
  "c2VybmFtZS9FbWFpbCBJVkFTTVM6ICIpKSkudHJpbSgpOwogICAgICAgICAgICAgICAgaW" +
  "YgKCF1c2VybmFtZSkgY29uc29sZS5sb2coY2hhbGsucmVkKCLinYwgVXNlcm5hbWUgdGlk" +
  "YWsgYm9sZWgga29zb25nIikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgIC" +
  "AgICAgICBsZXQgcGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgd2hpbGUgKCFwYXNzd29y" +
  "ZCkgewogICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBhd2FpdCAoYXdhaXQgcmVhZGxpbm" +
  "UucXVlc3Rpb24oY2hhbGsuY3lhbigiTWFzdWtrYW4gUGFzc3dvcmQgSVZBU01TOiAiKSwg" +
  "eyBoaWRlRWNob0JhY2s6IHRydWUgfSkpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlmIC" +
  "ghcGFzc3dvcmQpIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgi4p2MIFBhc3N3b3JkIHRpZGFr" +
  "IGJvbGVoIGtvc29uZyIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgIC" +
  "AgICAgcmVhZGxpbmUuY2xvc2UoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHdyaXRl" +
  "U2V0dGluZ1RvRmlsZVN5bmMoJ0lWQVNfVVNFUk5BTUUnLCB1c2VybmFtZSk7CiAgICAgIC" +
  "AgICAgIHdyaXRlU2V0dGluZ1RvRmlsZVN5bmMoJ0lWQVNfUEFTU1dPUkQnLCBwYXNzd29y" +
  "ZCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbi" +
  "giW1NUQVRVU10g4pyFIENyZWRlbnRpYWxzIHNhdmVkIikpOwogICAgICAgIH0KICAgICAg" +
  "ICAKICAgICAgICAvLyBDZWsgVXNlciBBZ2VudCAoU2VzdWFpIHBlcm1pbnRhYW46IEppa2" +
  "Ega29zb25nIGF0YXUga3VyYW5nIGRhcmkgMjAga2FyYWt0ZXIpCiAgICAgICAgaWYgKCFz" +
  "ZXR0aW5ncy5DVVJSRU5UX1VTRVJfQUdFTlQgfHwgc2V0dGluZ3MuQ1VSUkVOVF9VU0VSX0" +
  "FHRU5UID09PSAnJyB8fCBzZXR0aW5ncy5DVVJSRU5UX1VTRVJfQUdFTlQubGVuZ3RoIDwg" +
  "MjApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCJbU1RBVFVTXS" +
  "DimqDvuI8gVXNlciBBZ2VudCBub3QgZm91bmQgb3IgZW1wdHkgaW4gc2V0dGluZ3MuanMi" +
  "KSk7CiAgICAgICAgICAgIGNvbnN0IHJlYWRsaW5lID0gcmwuY3JlYXRlSW50ZXJmYWNlKH" +
  "sgaW5wdXQ6IHByb2Nlc3Muc3RkaW4sIG91dHB1dDogcHJvY2Vzcy5zdGRvdXQgfSk7CiAg" +
  "ICAgICAgICAgIAogICAgICAgICAgICBsZXQgdmFsaWQgPSBmYWxzZTsKICAgICAgICAgIC" +
  "AgbGV0IHVzZXJBZ2VudCA9ICIiOwogICAgICAgICAgICB3aGlsZSAoIXZhbGlkKSB7CiAg" +
  "ICAgICAgICAgICAgICB1c2VyQWdlbnQgPSBhd2FpdCAoYXdhaXQgcmVhZGxpbmUucXVlc3" +
  "Rpb24oY2hhbGsuY3lhbigiTWFzdWtrYW4gVXNlciBBZ2VudCAoRnVsbCk6ICIpKSkudHJp" +
  "bSgpOwogICAgICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC5sZW5ndGggPj0gMjApIHZhbG" +
  "lkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coY2hhbGsucmVk" +
  "KCLinYwgVXNlciBBZ2VudCB0ZXJsYWx1IHBlbmRlayIpKTsKICAgICAgICAgICAgfQogIC" +
  "AgICAgICAgICAKICAgICAgICAgICAgcmVhZGxpbmUuY2xvc2UoKTsKICAgICAgICAgICAg" +
  "d3JpdGVTZXR0aW5nVG9GaWxlU3luYygnQ1VSUkVOVF9VU0VSX0FHRU5UJywgdXNlckFnZW" +
  "50KTsKICAgICAgICAgICAgc2V0dGluZ3MuQ1VSUkVOVF9VU0VSX0FHRU5UID0gdXNlckFn" +
  "ZW50OyAvLyBVcGRhdGUgbWVtb3JpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLm" +
  "dyZWVuKCJbU1RBVFVTXSDinIUgVXNlciBBZ2VudCBzYXZlZCIpKTsKICAgICAgICB9CiAg" +
  "ICAgICAgCiAgICAgICAgYXdhaXQgYm90LmxhdW5jaCh7CiAgICAgICAgICAgIGRyb3BQZW" +
  "5kaW5nVXBkYXRlczogdHJ1ZSwKICAgICAgICAgICAgcG9sbGluZzogewogICAgICAgICAg" +
  "ICAgICAgdGltZW91dDogNjAKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgIC" +
  "AvLyBQYW5nZ2lsIGxhbmdzdW5nIGNvbm5lY3RSb2J1c3RMaXZlU21zIHNldGVsYWggYnJv" +
  "d3NlciBzaWFwCiAgICAgICAgY29uc29sZS5sb2coY2hhbGsuY3lhbigiW1NUQVRVU10g8J" +
  "+UjSBBdXRvLWNvbm5lY3RpbmcgdG8gTGl2ZSBTTVMuLi4iKSk7CiAgICAgICAgCiAgICAg" +
  "ICAgLy8gQXV0by1jb25uZWN0IGxhbmdzdW5nIHRhbnBhIHRpbWVvdXQKICAgICAgICB0cn" +
  "kgewogICAgICAgICAgICBjb25zdCBjb25uZWN0ZWQgPSBhd2FpdCBjb25uZWN0Um9idXN0" +
  "TGl2ZVNtcygpOwogICAgICAgICAgICBpZiAoY29ubmVjdGVkKSB7CiAgICAgICAgICAgIC" +
  "AgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbigiW1NUQVRVU10g4pyFIEF1dG8tY29ubmVj" +
  "dCBzdWNjZXNzZnVsISIpKTsKICAgICAgICAgICAgICAgIGlzUG9sbGluZ0FjdGl2ZSA9IH" +
  "RydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxv" +
  "ZyhjaGFsay55ZWxsb3coIltTVEFUVVNdIOKaoO+4jyBBdXRvLWNvbm5lY3QgZmFpbGVkLi" +
  "BVc2UgL2xvZ2luIHRvIGNvbm5lY3QgbWFudWFsbHkuIikpOwogICAgICAgICAgICB9CiAg" +
  "ICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbG" +
  "sucmVkKCJbU1RBVFVTXSDinYwgQXV0by1jb25uZWN0IGVycm9yOiIpLCBlcnJvci5tZXNz" +
  "YWdlKTsKICAgICAgICB9CiAgICAgICAgCiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaX" +
  "NCcm93c2VyUmVhZHkgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJl" +
  "ZCgi4p2MIEluaXRpYWxpemF0aW9uIGZhaWxlZDoiKSwgZS5tZXNzYWdlKTsKICAgICAgIC" +
  "Bwcm9jZXNzLmV4aXQoMSk7CiAgICB9CgogICAgY29uc29sZS5sb2coY2hhbGsuYmx1ZShg" +
  "W1NUQVRVU10g8J+agCAke1BST0pFQ1RfTkFNRX0gU3RhcnRlZC4uLmApKTsgIAp9OwoKCg" +
  "ovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09" +
  "PT09PSBQT1BVUCBIQU5ETEVSID09PT09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PSAvLwoKY29uc3QgaGFuZGxlUG9wdXBBbmRUdXRvcmlh" +
  "bCA9IGFzeW5jIChwYWdlKSA9PiB7CiAgICB0cnkgewogICAgICAKICAgICAgICAKICAgIC" +
  "AgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwg" +
  "MzAwMCkpOwogICAgICAgIAogICAgICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4gew" +
  "ogICAgICAgICAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4gewogICAgICAgICAgICAg" +
  "ICAgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsJy" +
  "k7CiAgICAgICAgICAgICAgICBtb2RhbHMuZm9yRWFjaChtb2RhbCA9PiB7CiAgICAgICAg" +
  "ICAgICAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZG" +
  "F0YS1kaXNtaXNzPSJtb2RhbCJdLCAuY2xvc2UsIFthcmlhLWxhYmVsPSJDbG9zZSJdJyk7" +
  "CiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlQnRuKSB7CiAgICAgICAgICAgICAgIC" +
  "AgICAgICAgIGNsb3NlQnRuLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNl" +
  "IGlmIChtb2RhbC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snIHx8IG1vZGFsLmNsYXNzTG" +
  "lzdC5jb250YWlucygnc2hvdycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFs" +
  "LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vZG" +
  "FsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgICAgICB9CiAg" +
  "ICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY2" +
  "9uc3QgYmFja2Ryb3BzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWJh" +
  "Y2tkcm9wJyk7CiAgICAgICAgICAgICAgICBiYWNrZHJvcHMuZm9yRWFjaChiYWNrZHJvcC" +
  "A9PiB7CiAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3AucmVtb3ZlKCk7CiAgICAgICAg" +
  "ICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG" +
  "Nsb3NlTW9kYWwoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICh3aW5kb3cuZHJp" +
  "dmVyICYmIHdpbmRvdy5kcml2ZXJPYmopIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgIC" +
  "AgICAgICAgICAgICAgICAgd2luZG93LmRyaXZlck9iai5yZXNldCgpOwogICAgICAgICAg" +
  "ICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIC" +
  "AgICAgICAgY29uc3QgZHJpdmVyRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9y" +
  "QWxsKCcuZHJpdmVyLXBvcG92ZXIsIC5kcml2ZXItb3ZlcmxheScpOwogICAgICAgICAgIC" +
  "Bkcml2ZXJFbGVtZW50cy5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgICAgIGVsLnJl" +
  "bW92ZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIC" +
  "h3aW5kb3cuU3dhbCAmJiBTd2FsLmdldFBvcHVwKCkpIHsKICAgICAgICAgICAgICAgIFN3" +
  "YWwuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZG" +
  "9jdW1lbnQuYm9keS5jbGljaygpOwogICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2" +
  "ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXk6ICdFc2NhcGUnIH0pKT" +
  "sKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzbXMt" +
  "dG90b3JpYWwtY29tcGxldGVkJywgJ3RydWUnKTsKICAgICAgICAgICAgbG9jYWxTdG9yYW" +
  "dlLnNldEl0ZW0oJ3Ntcy10b3RvcmlhbC1zdGF0dXMnLCAnY2xvc2VkJyk7CiAgICAgICAg" +
  "fSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZX" +
  "RUaW1lb3V0KHJlc29sdmUsIDIwMDApKTsKICAgICAgICAKICAgICAgICBhd2FpdCBwYWdl" +
  "LmV2YWx1YXRlKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bW" +
  "VudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaXNtaXNzPSJtb2RhbCJdJyk7CiAgICAgICAg" +
  "ICAgIGlmIChjbG9zZUJ0bikgewogICAgICAgICAgICAgICAgY2xvc2VCdG4uY2xpY2soKT" +
  "sKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGF3YWl0IG5l" +
  "dyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgIC" +
  "AgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJv" +
  "cikgewogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBoYW5kbGluZyBwb3B1cDonLCBlcn" +
  "Jvci5tZXNzYWdlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn07CgovLyA9PT09" +
  "PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBWQV" +
  "JJQUJMRVMgPT09PT09PT09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PT09PSAvLwoKbGV0IHNlbnRNZXNzYWdlSGFzaGVzID0gbmV3IFNldCgpOw" +
  "psZXQgaXNGaXJzdFBvbGwgPSB0cnVlOwpsZXQgaGFzU2NyZWVuc2hvdEJlZW5TZW50ID0g" +
  "ZmFsc2U7CmxldCBpc0Nvbm5lY3RpbmcgPSBmYWxzZTsKbGV0IGNvbm5lY3Rpb25BdHRlbX" +
  "B0cyA9IDA7CmNvbnN0IE1BWF9DT05ORUNUSU9OX0FUVEVNUFRTID0gMzsKbGV0IGxhc3RD" +
  "b25uZWN0aW9uRXJyb3IgPSBudWxsOwpsZXQgY29ubmVjdGlvbkVycm9yTG9nVGltZSA9ID" +
  "A7CmNvbnN0IENPTk5FQ1RJT05fRVJST1JfQ09PTERPV04gPSAxMjAwMDA7CmxldCB3ZWJT" +
  "b2NrZXRNb25pdG9yQWN0aXZlID0gZmFsc2U7CmxldCBzdGFibGVDb25uZWN0aW9uU3Rhcn" +
  "RUaW1lID0gMDsKbGV0IGxhc3RTdWNjZXNzZnVsQ2hlY2sgPSAwOwpsZXQgaXNDb25uZWN0" +
  "aW9uU3RhYmxlID0gZmFsc2U7CmxldCBwYWdlVmFsaWRhdGlvbkludGVydmFsID0gbnVsbD" +
  "sKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwovLyA9PT09" +
  "PT09PT09IEhFTFBFUlMgPT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09IC8vCgpjb25zdCBtYXNrUGhvbmVOdW1iZXIgPSAo" +
  "bnVtKSA9PiB7CiAgICBpZiAoIW51bSkgcmV0dXJuICdOL0EnOwogICAgCiAgICAvLyBQRV" +
  "JCQUlLQU4gTE9HSUtBIE1BU0tJTkc6IFNlc3VhaSBpbnN0cnVrc2kgbHUKICAgIC8vIEpp" +
  "a2EgcGFuamFuZyBub21vciBrdXJhbmcgZGFyaSA4IC0+IDMgZGVwYW4sIHNpc2FueWEgYm" +
  "ludGFuZywgNCBiZWxha2FuZwogICAgaWYgKG51bS5sZW5ndGggPCA4KSB7CiAgICAgICAg" +
  "cmV0dXJuIG51bS5zbGljZSgwLCAzKSArICcqJy5yZXBlYXQoTWF0aC5tYXgoMCwgbnVtLm" +
  "xlbmd0aCAtIDcpKSArIG51bS5zbGljZSgtNCk7CiAgICB9IAogICAgCiAgICAvLyBKaWth" +
  "IHBhbmphbmcgbm9tb3IgOCBhdGF1IGxlYmloIC0+IDQgZGVwYW4sIHNpc2FueWEgYmludG" +
  "FuZywgNCBiZWxha2FuZwogICAgcmV0dXJuIG51bS5zbGljZSgwLCA0KSArICcqJy5yZXBl" +
  "YXQoTWF0aC5tYXgoMCwgbnVtLmxlbmd0aCAtIDgpKSArIG51bS5zbGljZSgtNCk7Cn07Cg" +
  "pjb25zdCBlc2NhcGVIdG1sID0gKHRleHQpID0+IHRleHQgPyB0ZXh0LnJlcGxhY2UoL1sm" +
  "PD4iJ10vZyxtPT4oeyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6Ii" +
  "ZxdW90OyIsIiciOiImIzAzOTsifVttXSkpIDogJyc7CgovLyA9PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBDT05ORUNUSU9OID09PT" +
  "09PT09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PSAvLwoKY29uc3QgbWFya0Nvbm5lY3Rpb25TdGFibGUgPSAoKSA9PiB7IAogICAgaXNDb2" +
  "5uZWN0aW9uU3RhYmxlPXRydWU7IAogICAgc3RhYmxlQ29ubmVjdGlvblN0YXJ0VGltZT1E" +
  "YXRlLm5vdygpOyAKICAgIGNvbm5lY3Rpb25BdHRlbXB0cz0wOyAKICAgIGRpc2Nvbm5lY3" +
  "RBbGVydFNlbnQ9ZmFsc2U7IAp9OwoKY29uc3QgbWFya0Nvbm5lY3Rpb25VbnN0YWJsZSA9" +
  "ICgpID0+IHsgCiAgICBpc0Nvbm5lY3Rpb25TdGFibGU9ZmFsc2U7IAogICAgY29uc29sZS" +
  "5sb2coY2hhbGsueWVsbG93KCdbU1RBQklMSVRZXSDimqDvuI8gQ29ubmVjdGlvbiBVTlNU" +
  "QUJMRScpKTsgCn07Cgpjb25zdCBzaG91bGRBdHRlbXB0UmVjb25uZWN0ID0gKCkgPT4gew" +
  "ogICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgIAogICAgLy8gSmlrYSBzdWRhaCBz" +
  "dGFibGUsIGphbmdhbiByZWNvbm5lY3Qga2VjdWFsaSBiZW5hci1iZW5hciBkaXNjb25uZW" +
  "N0CiAgICBpZiAoaXNDb25uZWN0aW9uU3RhYmxlICYmIChub3cgLSBsYXN0U3VjY2Vzc2Z1" +
  "bENoZWNrIDwgMzAwMDApKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgCi" +
  "AgICAvLyBDb29sZG93biBzZXRlbGFoIGVycm9yCiAgICBpZiAoKG5vdyAtIGNvbm5lY3Rp" +
  "b25FcnJvckxvZ1RpbWUpIDwgMTIwMDAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogIC" +
  "AgfQogICAgCiAgICAvLyBCYXRhc2kganVtbGFoIGF0dGVtcHRzCiAgICBpZiAoY29ubmVj" +
  "dGlvbkF0dGVtcHRzID49IE1BWF9DT05ORUNUSU9OX0FUVEVNUFRTKSB7CiAgICAgICAgcm" +
  "V0dXJuIGZhbHNlOwogICAgfQogICAgCiAgICAvLyBIYW55YSByZWNvbm5lY3QgamlrYSBw" +
  "b2xsaW5nIGFrdGlmCiAgICByZXR1cm4gaXNQb2xsaW5nQWN0aXZlOwp9OwoKY29uc3QgbW" +
  "FpbnRhaW5Db25uZWN0aW9uID0gYXN5bmMgKCkgPT4gewogICAgaWYgKGlzQ29ubmVjdGlu" +
  "ZyB8fCAhaXNQb2xsaW5nQWN0aXZlKSByZXR1cm47CiAgICAKICAgIC8vIEppa2EgY29ubm" +
  "VjdGlvbiBzdGFibGUsIGN1a3VwIHZhbGlkYXNpIHNlc2VrYWxpCiAgICBpZiAoaXNDb25u" +
  "ZWN0aW9uU3RhYmxlICYmIGxpdmVTbXNQYWdlKSB7CiAgICAgICAgLy8gVmFsaWRhc2kgc2" +
  "V0aWFwIDIgbWVuaXQgc2FqYQogICAgICAgIGlmIChEYXRlLm5vdygpIC0gbGFzdFN1Y2Nl" +
  "c3NmdWxDaGVjayA+IDEyMDAwMCkgewogICAgICAgICAgICBhd2FpdCB2YWxpZGF0ZVBhZ2" +
  "UoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBKaWth" +
  "IHVuc3RhYmxlIGF0YXUgdGlkYWsgYWRhIGNvbm5lY3Rpb24sIGNvYmEgcmVjb25uZWN0Ci" +
  "AgICBpZiAoc2hvdWxkQXR0ZW1wdFJlY29ubmVjdCgpKSB7CiAgICAgICAgY29uc29sZS5s" +
  "b2coY2hhbGsueWVsbG93KCdbTUFJTlRFTkFOQ0VdIPCflIQgQXR0ZW1wdGluZyByZWNvbm" +
  "5lY3Rpb24uLi4nKSk7CiAgICAgICAgYXdhaXQgY29ubmVjdFJvYnVzdExpdmVTbXMoKTsK" +
  "ICAgIH0KfTsKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLw" +
  "ovLyA9PT09PT09PT09IFBBR0UgVkFMSURBVElPTiA9PT09PT09PT0gLy8KLy8gPT09PT09" +
  "PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCgpjb25zdCB2YWxpZGF0ZVBhZ2" +
  "UgPSBhc3luYyAoKSA9PiB7CiAgICBpZiAoIWxpdmVTbXNQYWdlKSB7IAogICAgICAgIG1h" +
  "cmtDb25uZWN0aW9uVW5zdGFibGUoKTsgCiAgICAgICAgcmV0dXJuIGZhbHNlOyAKICAgIH" +
  "0KICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFnZVN0YXRlID0gYXdhaXQgbGl2ZVNtc1Bh" +
  "Z2UuZXZhbHVhdGUoKCkgPT4gKHsKICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb2" +
  "4uaHJlZiwKICAgICAgICAgICAgaGFzV2ViU29ja2V0OiB0eXBlb2YgV2ViU29ja2V0IT09" +
  "J3VuZGVmaW5lZCcKICAgICAgICB9KSkuY2F0Y2goKCk9Pm51bGwpOwogICAgICAgIGlmIC" +
  "ghcGFnZVN0YXRlfHwhcGFnZVN0YXRlLnVybC5pbmNsdWRlcyhMSVZFX1NNU19VUkwpfHwh" +
  "cGFnZVN0YXRlLmhhc1dlYlNvY2tldCl7IAogICAgICAgICAgICBtYXJrQ29ubmVjdGlvbl" +
  "Vuc3RhYmxlKCk7IAogICAgICAgICAgICByZXR1cm4gZmFsc2U7IAogICAgICAgIH0KICAg" +
  "ICAgICBsYXN0U3VjY2Vzc2Z1bENoZWNrPURhdGUubm93KCk7CiAgICAgICAgaWYgKCFpc0" +
  "Nvbm5lY3Rpb25TdGFibGUgJiYgKERhdGUubm93KCktc3RhYmxlQ29ubmVjdGlvblN0YXJ0" +
  "VGltZT4zMDAwMDApKSBtYXJrQ29ubmVjdGlvblN0YWJsZSgpOwogICAgICAgIHJldHVybi" +
  "B0cnVlOwogICAgfSBjYXRjaCB7IAogICAgICAgIG1hcmtDb25uZWN0aW9uVW5zdGFibGUo" +
  "KTsgCiAgICAgICAgcmV0dXJuIGZhbHNlOyAKICAgIH0KfTsKCi8vID09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PSAvLwovLyA9PT09PT09PT09IEZFVENIICYgUEFS" +
  "U0UgPT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT" +
  "09PT09IC8vCgpjb25zdCBmZXRjaFNpbXBsZVNNUyA9IGFzeW5jICgpID0+IHsKICAgIGlm" +
  "KCFsaXZlU21zUGFnZSkgcmV0dXJuIFtdOwogICAgY29uc3Qgd2luTXNncyA9IGF3YWl0IG" +
  "xpdmVTbXNQYWdlLmV2YWx1YXRlKCgpID0+IHdpbmRvdy5fc2ltcGxlU01TIHx8IFtdKS5j" +
  "YXRjaCgoKSA9PiBbXSk7CiAgICBsZXQgZ2xvYk1zZ3MgPSBbXTsgCiAgICBpZihnbG9iYW" +
  "wuc2ltcGxlU01TQnVmZmVyKSB7IAogICAgICAgIGdsb2JNc2dzID0gZ2xvYmFsLnNpbXBs" +
  "ZVNNU0J1ZmZlci5tYXAoaSA9PiBpLmRhdGEpOyAKICAgICAgICBnbG9iYWwuc2ltcGxlU0" +
  "1TQnVmZmVyID0gW107IAogICAgfQogICAgcmV0dXJuIFsuLi53aW5Nc2dzLCAuLi5nbG9i" +
  "TXNnc107Cn07Cgpjb25zdCBwYXJzZVNpbXBsZVNNUyA9IGRhdGEgPT4gewogICAgdHJ5IH" +
  "sKICAgICAgICBjb25zdCBtc2cgPSBkYXRhLm1lc3NhZ2UgfHwgJyc7CiAgICAgICAgY29u" +
  "c3Qgb3JpZyA9IGRhdGEub3JpZ2luYXRvciB8fCAnJzsKICAgICAgICBjb25zdCByZWMgPS" +
  "BkYXRhLnJlY2lwaWVudCB8fCAnJzsKICAgICAgICBjb25zdCByYW5nZSA9IGRhdGEucmFu" +
  "Z2UgfHwgJyc7CiAgICAgICAgbGV0IGNvdW50cnkgPSByYW5nZS5yZXBsYWNlKC9ccytcZC" +
  "skLywgJycpLnRyaW0oKSB8fCAnVW5rbm93bic7CiAgICAgICAgbGV0IG90cCA9IChtc2cu" +
  "bWF0Y2goLyhcZHszfVstIF0/XGR7M30pfChcZHs0LDh9KS8pIHx8IFtdKVswXT8ucmVwbG" +
  "FjZSgvWy1cc10vZywgJycpIHx8ICcnOwogICAgICAgIGxldCBzZXJ2aWNlID0gb3JpZy50" +
  "b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3aGF0c2FwcCcpIHx8IG1zZy50b0xvd2VyQ2FzZS" +
  "gpLmluY2x1ZGVzKCd3aGF0c2FwcCcpID8gJ1doYXRzQXBwJyA6CiAgICAgICAgICAgICAg" +
  "ICAgICAgb3JpZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0ZWxlZ3JhbScpIHx8IG1zZy" +
  "50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0ZWxlZ3JhbScpID8gJ1RlbGVncmFtJyA6CiAg" +
  "ICAgICAgICAgICAgICAgICAgb3JpZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnb29nbG" +
  "UnKSB8fCBtc2cudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ29vZ2xlJykgPyAnR29vZ2xl" +
  "JyA6CiAgICAgICAgICAgICAgICAgICAgb3JpZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKC" +
  "dmYWNlYm9vaycpIHx8IG1zZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdmYWNlYm9vaycp" +
  "ID8gJ0ZhY2Vib29rJyA6IG9yaWc7CiAgICAgICAgcmV0dXJuIHsgCiAgICAgICAgICAgIH" +
  "RpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdpZC1JRCcpLAogICAgICAg" +
  "ICAgICBjb3VudHJ5LCAKICAgICAgICAgICAgbnVtYmVyOiByZWMsIAogICAgICAgICAgIC" +
  "Btc2csIAogICAgICAgICAgICBzZXJ2aWNlLCAKICAgICAgICAgICAgb3RwLCAKICAgICAg" +
  "ICAgICAgb3JpZ2luYXRvcjogb3JpZywgCiAgICAgICAgICAgIHJhbmdlLCAKICAgICAgIC" +
  "AgICAgc291cmNlOiAnd2Vic29ja2V0JyAKICAgICAgICB9OwogICAgfSBjYXRjaCB7IAog" +
  "ICAgICAgIHJldHVybiBudWxsOyAKICAgIH0KfTsKCi8vID09PT09PT09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PSAvLwovLyA9PT09PT09PT09IFNPQ0tFVC5JTyBNT05JVE9S" +
  "ID09PT09PT0gLy8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC" +
  "8vCgpjb25zdCBzZXR1cEVuaGFuY2VkU29ja2V0SU9Nb25pdG9yaW5nID0gYXN5bmMgKCkg" +
  "PT4gewogICAgaWYgKCFsaXZlU21zUGFnZSkgcmV0dXJuOwogICAgCiAgICB0cnkgewogIC" +
  "AgICAgIC8vIDEuIEVrc3BvcyBmdW5nc2kga2UgTm9kZS5qcyB1bnR1ayBub3RpZmlrYXNp" +
  "IFRlbGVncmFtCiAgICAgICAgLy8gUEVSQkFJS0FOOiBNZW5nZ3VuYWthbiAncGFyc2VkJy" +
  "BrYXJlbmEgJ21zZycgYmVsdW0gZGlkZWZpbmlzaWthbiBkaSBjb25zb2xlLmxvZyBhd2Fs" +
  "CiAgICAgICAgYXdhaXQgbGl2ZVNtc1BhZ2UuZXhwb3NlRnVuY3Rpb24oJ29uU01TUmVjZW" +
  "l2ZWQnLCAoc21zRGF0YSkgPT4gewogICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJz" +
  "ZVNpbXBsZVNNUyhzbXNEYXRhKTsKICAgICAgICAgICAgaWYgKHBhcnNlZCkgewogICAgIC" +
  "AgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsuYm9sZC5ncmVlbihgXG5bIPCfkqwgXSBb" +
  "IE5FVyBTTVMgUkVDSUVWRUQgXSAke3BhcnNlZC5jb3VudHJ5fSAtICR7cGFyc2VkLnNlcn" +
  "ZpY2V9IFxuYCkpOwogICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2VOb3RpZmljYXRpb24o" +
  "cGFyc2VkKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCBsaX" +
  "ZlU21zUGFnZS5ldmFsdWF0ZU9uTmV3RG9jdW1lbnQoKCkgPT4gewogICAgICAgICAgICBj" +
  "b25zdCBPcmlnaW5hbFdlYlNvY2tldCA9IHdpbmRvdy5XZWJTb2NrZXQ7CiAgICAgICAgIC" +
  "AgIHdpbmRvdy5XZWJTb2NrZXQgPSBmdW5jdGlvbih1cmwsIHByb3RvY29scykgewogICAg" +
  "ICAgICAgICAgICAgY29uc3Qgd3MgPSBuZXcgT3JpZ2luYWxXZWJTb2NrZXQodXJsLCBwcm" +
  "90b2NvbHMpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxv" +
  "ZygnJWNbU1lTVEVNXSBXZWJTb2NrZXQgQ29ubmVjdGlvbiBBdHRlbXB0OiAnICsgdXJsLC" +
  "AnY29sb3I6IGJsdWUnKTsKCiAgICAgICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVy" +
  "KCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm" +
  "F3RGF0YSA9IGV2ZW50LmRhdGE7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAg" +
  "ICAgICAgICAgLy8gQ2VrIGFwYWthaCBkYXRhIG1lbmdhbmR1bmcgbGl2ZXNtcyBzZXBlcn" +
  "RpIGRpIHNjcmVlbnNob3QgbG9nIEFuZGEKICAgICAgICAgICAgICAgICAgICBpZiAodHlw" +
  "ZW9mIHJhd0RhdGEgPT09ICdzdHJpbmcnICYmIHJhd0RhdGEuaW5jbHVkZXMoJ2xpdmVzbX" +
  "MnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnJWNbREVCVUct" +
  "V1NdIERhdGEgTWFzdWs6ICcgKyByYXdEYXRhLCAnY29sb3I6IGN5YW4nKTsKICAgICAgIC" +
  "AgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAvLyBFa3N0cmFrIGFycmF5IEpTT04gZGFyaSBmb3" +
  "JtYXQgNDIvbGl2ZXNtcyxbLi4uXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u" +
  "c3QganNvbk1hdGNoID0gcmF3RGF0YS5tYXRjaCgvXFsuKlxdLyk7CiAgICAgICAgICAgIC" +
  "AgICAgICAgICAgICAgICBpZiAoanNvbk1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAg" +
  "ICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKT" +
  "sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShw" +
  "YXlsb2FkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYX" +
  "JpIG9iamVrIHlhbmcgcHVueWEgcHJvcGVydHkgbWVzc2FnZQogICAgICAgICAgICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgICBjb25zdCBzbXNPYmogPSBwYXlsb2FkLmZpbmQoaSA9Pi" +
  "BpICYmIHR5cGVvZiBpID09PSAnb2JqZWN0JyAmJiBpLm1lc3NhZ2UpOwogICAgICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc21zT2JqKSB7CiAgICAgICAgICAgIC" +
  "AgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub25TTVNSZWNlaXZlZChzbXNP" +
  "YmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgIC" +
  "AgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAg" +
  "fQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC" +
  "AgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYXJzZSBFcnJvcjonLCBlKTsKICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgIC" +
  "AgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHdzOwogICAgICAgICAgICB9" +
  "OwogICAgICAgICAgICB3aW5kb3cuV2ViU29ja2V0LnByb3RvdHlwZSA9IE9yaWdpbmFsV2" +
  "ViU29ja2V0LnByb3RvdHlwZTsKICAgICAgICB9KTsKCiAgICAgICAgYXdhaXQgbGl2ZVNt" +
  "c1BhZ2UucmVsb2FkKHsgd2FpdFVudGlsOiAnbmV0d29ya2lkbGUyJyB9KTsKICAgICAgIC" +
  "AKICAgICAgICB3ZWJTb2NrZXRNb25pdG9yQWN0aXZlID0gdHJ1ZTsKICAgICAgICBjb25z" +
  "b2xlLmxvZyhjaGFsay5ib2xkLmdyZWVuKCdbU09DS0VUXSDinIUgUkVDSUVWRUQgQk9UIE" +
  "FDVElWQVRFRCcpKTsKCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUu" +
  "bG9nKGNoYWxrLnJlZCgnW1NPQ0tFVF0g4p2MIEVSUk9SOiAnICsgZXJyb3IubWVzc2FnZS" +
  "kpOwogICAgfQp9OwoKCgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT0gLy8KLy8gPT09PT09PT09PSBST0JVU1QgQ09OTkVDVCA9PT09PT09PT09IC8vCi8vID" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwoKY29uc3QgdXBkYXRl" +
  "Qm90U3RhdHVzID0gKHN0YXR1cywgaXNFcnJvciA9IGZhbHNlKSA9PiB7CiAgICBjb25zdC" +
  "BwcmV2U3RhdHVzID0gYm90U3RhdHVzOwogICAgYm90U3RhdHVzID0gc3RhdHVzOwogICAg" +
  "bGFzdENoZWNrVGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdpZC1JRC" +
  "cpOwogICAgCiAgICAvLyBMb2cgaGFueWEgamlrYSBzdGF0dXMgYmVydWJhaCBhdGF1IGVy" +
  "cm9yCiAgICBpZiAocHJldlN0YXR1cyAhPT0gc3RhdHVzIHx8IGlzRXJyb3IpIHsKICAgIC" +
  "AgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygn" +
  "aWQtSUQnKTsKICAgICAgICBpZiAoaXNFcnJvcikgewogICAgICAgICAgICBjb25zb2xlLm" +
  "xvZyhjaGFsay5yZWQoYFtTVEFUVVNdIOKdjCAke3N0YXR1c30gLSAke3RpbWVzdGFtcH1g" +
  "KSk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgfQogICAgfQp9OwoKY29uc3QgY29ubm" +
  "VjdFJvYnVzdExpdmVTbXMgPSBhc3luYyAoKSA9PiB7CiAgICBpZiAoaXNDb25uZWN0aW5n" +
  "KSB7CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCdbQ09OTkVDVF0g4o+zIE" +
  "FMUkVBRFkgQ09OTkVDVElORy4uLicpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9" +
  "CiAgICAKICAgIGlzQ29ubmVjdGluZyA9IHRydWU7CiAgICBjb25uZWN0aW9uQXR0ZW1wdH" +
  "MrKzsKCiAgICB0cnkgewogICAgICAgIHVwZGF0ZUJvdFN0YXR1cygnQ09OTkVDVElORy4u" +
  "LicpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdyhgW0NPTk5FQ1RdIPCflI" +
  "QgQ09OTkVDVElORy4uLiAke2Nvbm5lY3Rpb25BdHRlbXB0c30vJHtNQVhfQ09OTkVDVElP" +
  "Tl9BVFRFTVBUU31gKSk7CgogICAgICAgIGlmICghc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1" +
  "ZBTFVFIHx8IHNldHRpbmdzLkNGX0NMRUFSQU5DRV9WQUxVRS5sZW5ndGggPCAxMCkgewog" +
  "ICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NGIENsZWFyYW5jZSB0aWRhayB2YWxpZC" +
  "cpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxpdmVTbXNQYWdlKSB7CiAgICAgICAgICAg" +
  "IHRyeSB7IGF3YWl0IGxpdmVTbXNQYWdlLmNsb3NlKCk7IH0gY2F0Y2ggKGUpIHt9CiAgIC" +
  "AgICAgfQoKICAgICAgICBsaXZlU21zUGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgp" +
  "OwogICAgICAgIAogICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLnNldERlZmF1bHRUaW1lb3" +
  "V0KDIwMDAwKTsKICAgICAgICBhd2FpdCBsaXZlU21zUGFnZS5zZXREZWZhdWx0TmF2aWdh" +
  "dGlvblRpbWVvdXQoMzAwMDApOwphd2FpdCBsaXZlU21zUGFnZS5zZXRWaWV3cG9ydCh7IH" +
  "dpZHRoOiAxOTIwLCBoZWlnaHQ6IDEwODAgfSk7CiAgICAgICAgYXdhaXQgbGl2ZVNtc1Bh" +
  "Z2Uuc2V0VXNlckFnZW50KHNldHRpbmdzLkNVUlJFTlRfVVNFUl9BR0VOVCk7CiAgICAgIC" +
  "AgCiAgICAgICAgYXdhaXQgbGl2ZVNtc1BhZ2UuZXZhbHVhdGVPbk5ld0RvY3VtZW50KCgp" +
  "ID0+IHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3" +
  "dlYmRyaXZlcicsIHsgZ2V0OiAoKSA9PiB1bmRlZmluZWQgfSk7CiAgICAgICAgfSk7Cgog" +
  "ICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLnNldENvb2tpZSh7CiAgICAgICAgICAgIG5hbW" +
  "U6ICdjZl9jbGVhcmFuY2UnLAogICAgICAgICAgICB2YWx1ZTogc2V0dGluZ3MuQ0ZfQ0xF" +
  "QVJBTkNFX1ZBTFVFLAogICAgICAgICAgICBkb21haW46ICcuaXZhc21zLmNvbScsCiAgIC" +
  "AgICAgICAgIHBhdGg6ICcvJywKICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsCiAgICAg" +
  "ICAgICAgIHNlY3VyZTogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBjb25zb2xlLmxvZy" +
  "hjaGFsay5jeWFuKCdbQ09OTkVDVF0g8J+MkCBOQVZJR0FUSU5HIFRPIElWQVNNUy4uLicp" +
  "KTsKICAgICAgICAKICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBsaXZlU21zUGFnZS" +
  "5nb3RvKExJVkVfU01TX1VSTCwgewogICAgICAgICAgICB3YWl0VW50aWw6ICdkb21jb250" +
  "ZW50bG9hZGVkJywKICAgICAgICAgICAgdGltZW91dDogNDUwMDAKICAgICAgICB9KTsKCi" +
  "AgICAgICAgY29uc29sZS5sb2coY2hhbGsuY3lhbihgW0NPTk5FQ1RdIPCfk4ogU3RhdHVz" +
  "IDogJHtyZXNwb25zZSA/IHJlc3BvbnNlLnN0YXR1cygpIDogJ04vQSd9YCkpOwoKICAgIC" +
  "AgICBpZiAocmVzcG9uc2UgJiYgKHJlc3BvbnNlLnN0YXR1cygpID09PSA0MDMgfHwgcmVz" +
  "cG9uc2Uuc3RhdHVzKCkgPT09IDQyOSkpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2" +
  "hhbGsucmVkKCdbQ09OTkVDVF0g4p2MIERJQkxPS0lSIENMT1VERkxBUkU6IEhUVFAgJyAr" +
  "IHJlc3BvbnNlLnN0YXR1cygpKSk7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0" +
  "xPVURGTEFSRSBCTE9DSyAtIEhUVFAgJyArIHJlc3BvbnNlLnN0YXR1cygpKTsKICAgICAg" +
  "ICB9CgogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAyMD" +
  "AwKSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgaGFzQ2xvdWRmbGFyZSA9IGF3YWl0IGxp" +
  "dmVTbXNQYWdlLmV2YWx1YXRlKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgYm9keVRleH" +
  "QgPSBkb2N1bWVudC5ib2R5LmlubmVyVGV4dCB8fCAnJzsKICAgICAgICAgICAgcmV0dXJu" +
  "IGJvZHlUZXh0LmluY2x1ZGVzKCdDaGVja2luZyB5b3VyIGJyb3dzZXInKSB8fCAKICAgIC" +
  "AgICAgICAgICAgICAgIGJvZHlUZXh0LmluY2x1ZGVzKCdKdXN0IGEgbW9tZW50Jyk7CiAg" +
  "ICAgICAgfSkuY2F0Y2goKCkgPT4gZmFsc2UpOwogICAgICAgIAogICAgICAgIGlmIChoYX" +
  "NDbG91ZGZsYXJlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvdWRmbGFy" +
  "ZSBjaGFsbGVuZ2UgbXVuY3VsLicpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgY3Vycm" +
  "VudFVybCA9IGxpdmVTbXNQYWdlLnVybCgpOwogICAgICAgIAogICAgICAgIGlmIChjdXJy" +
  "ZW50VXJsLmluY2x1ZGVzKCcvbG9naW4nKSkgewogICAgICAgICAgICBjb25zb2xlLmxvZy" +
  "hjaGFsay55ZWxsb3coJ1tDT05ORUNUXSDwn5SRIExPR0lOIFRPIElWQVNNUy4uLicpKTsK" +
  "ICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghc2V0dGluZ3MuSVZBU19VU0VSTkFNRS" +
  "B8fCAhc2V0dGluZ3MuSVZBU19QQVNTV09SRCkgewogICAgICAgICAgICAgICAgdGhyb3cg" +
  "bmV3IEVycm9yKCdVc2VybmFtZSBhdGF1IHBhc3N3b3JkIHRpZGFrIGRpdGVtdWthbi4nKT" +
  "sKICAgICAgICAgICAgfQogICAgICAgICAgIAogICAgICAgICAgICBjb25zb2xlLmxvZyhj" +
  "aGFsay5jeWFuKCdbQ09OTkVDVF0g8J+TpyBZT1VSIElWQVMgQUNDT1VOVCA6Jywgc2V0dG" +
  "luZ3MuSVZBU19VU0VSTkFNRSkpOwogICAgICAgICAgICAKICAgICAgICAgICAgYXdhaXQg" +
  "bmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDIwMDApKTsKICAgICAgICAgICAgCi" +
  "AgICAgICAgICAgIGxldCB1c2VybmFtZVNlbGVjdG9yID0gbnVsbDsKICAgICAgICAgICAg" +
  "Y29uc3QgdXNlcm5hbWVTZWxlY3RvcnMgPSBbCiAgICAgICAgICAgICAgICAnaW5wdXRbdH" +
  "lwZT0iZW1haWwiXScsICdpbnB1dFtuYW1lPSJlbWFpbCJdJywgJ2lucHV0W25hbWU9InVz" +
  "ZXJuYW1lIl0nLAogICAgICAgICAgICAgICAgJ2lucHV0W2F1dG9jb21wbGV0ZT0idXNlcm" +
  "5hbWUiXScsICdpbnB1dFthdXRvY29tcGxldGU9ImVtYWlsIl0nLAogICAgICAgICAgICAg" +
  "ICAgJ2lucHV0W3BsYWNlaG9sZGVyKj0iZW1haWwiIGldJywgJ2lucHV0W3BsYWNlaG9sZG" +
  "VyKj0idXNlcm5hbWUiIGldJwogICAgICAgICAgICBdOwogICAgICAgICAgICAKICAgICAg" +
  "ICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiB1c2VybmFtZVNlbGVjdG9ycykgewogIC" +
  "AgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdHMg" +
  "PSBhd2FpdCBsaXZlU21zUGFnZS4kKHNlbGVjdG9yKTsKICAgICAgICAgICAgICAgICAgIC" +
  "BpZiAoZXhpc3RzKSB7IHVzZXJuYW1lU2VsZWN0b3IgPSBzZWxlY3RvcjsgYnJlYWs7IH0K" +
  "ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH0KICAgICAgIC" +
  "AgICAgCiAgICAgICAgICAgIGlmICh1c2VybmFtZVNlbGVjdG9yKSB7CiAgICAgICAgICAg" +
  "ICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLmZvY3" +
  "VzKHVzZXJuYW1lU2VsZWN0b3IpOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGxpdmVT" +
  "bXNQYWdlLmV2YWx1YXRlKChzKSA9PiB7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocykudm" +
  "FsdWUgPSAnJzsgfSwgdXNlcm5hbWVTZWxlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAg" +
  "YXdhaXQgbGl2ZVNtc1BhZ2UudHlwZSh1c2VybmFtZVNlbGVjdG9yLCBzZXR0aW5ncy5JVk" +
  "FTX1VTRVJOQU1FLCB7IGRlbGF5OiAyMCB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2gg" +
  "KGUpIHt9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IG" +
  "5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCA1MDApKTsKICAgICAgICAgICAgCiAg" +
  "ICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZFNlbGVjdG" +
  "9yID0gJ2lucHV0W3R5cGU9InBhc3N3b3JkIl0nOwogICAgICAgICAgICAgICAgYXdhaXQg" +
  "bGl2ZVNtc1BhZ2UuZm9jdXMocGFzc3dvcmRTZWxlY3Rvcik7CiAgICAgICAgICAgICAgIC" +
  "Bhd2FpdCBsaXZlU21zUGFnZS5ldmFsdWF0ZSgoKSA9PiB7IGRvY3VtZW50LnF1ZXJ5U2Vs" +
  "ZWN0b3IoJ2lucHV0W3R5cGU9InBhc3N3b3JkIl0nKS52YWx1ZSA9ICcnOyB9KTsKICAgIC" +
  "AgICAgICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLnR5cGUocGFzc3dvcmRTZWxlY3Rvciwg" +
  "c2V0dGluZ3MuSVZBU19QQVNTV09SRCwgeyBkZWxheTogMjAgfSk7CiAgICAgICAgICAgIH" +
  "0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBuZXcgUHJv" +
  "bWlzZShyID0+IHNldFRpbWVvdXQociwgNTAwKSk7CiAgICAgICAgICAgIAogICAgICAgIC" +
  "AgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gYXdhaXQg" +
  "bGl2ZVNtc1BhZ2UuJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdLCBpbnB1dFt0eXBlPSJzdW" +
  "JtaXQiXScpOwogICAgICAgICAgICAgICAgaWYgKHN1Ym1pdEJ1dHRvbikgewogICAgICAg" +
  "ICAgICAgICAgICAgIGF3YWl0IHN1Ym1pdEJ1dHRvbi5jbGljaygpOwogICAgICAgICAgIC" +
  "AgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBsaXZlU21zUGFnZS5r" +
  "ZXlib2FyZC5wcmVzcygnRW50ZXInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgIC" +
  "AgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgYXdhaXQgbGl2ZVNtc1BhZ2Uua2V5" +
  "Ym9hcmQucHJlc3MoJ0VudGVyJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgIC" +
  "AgICAgICAgIC8vIFR1bmdndSBuYXZpZ2FzaSBzZWxlc2FpCiAgICAgICAgICAgIHRyeSB7" +
  "CiAgICAgICAgICAgICAgICBhd2FpdCBsaXZlU21zUGFnZS53YWl0Rm9yTmF2aWdhdGlvbi" +
  "h7IAogICAgICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogJ2RvbWNvbnRlbnRsb2FkZWQn" +
  "LAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAwIAogICAgICAgICAgICAgIC" +
  "AgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNv" +
  "bGUubG9nKGNoYWxrLnllbGxvdygnW0NPTk5FQ1RdIOKaoO+4jyBUSU1FIE9VVCBPUiBOTy" +
  "BOQVYgQUZURVIgTE9HSU4uLi4nKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAg" +
  "ICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAyMDAwKS" +
  "k7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAtLS0gVkFMSURBU0kgTE9HSU4gQkVS" +
  "SEFTSUwgQVRBVSBUSURBSyAtLS0KICAgICAgICAgICAgY29uc3QgYWZ0ZXJMb2dpblVybC" +
  "A9IGxpdmVTbXNQYWdlLnVybCgpOwogICAgICAgICAgICBpZiAoYWZ0ZXJMb2dpblVybC5p" +
  "bmNsdWRlcygnL2xvZ2luJykpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYW" +
  "xrLnJlZCgnW0NPTk5FQ1RdIOKdjCBMT0dJTiBHQUdBTDogVXNlcm5hbWUgYXRhdSBQYXNz" +
  "d29yZCBTYWxhaCEnKSk7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZX" +
  "JuYW1lIGF0YXUgcGFzc3dvcmQgdGlkYWsgdmFsaWQgKE1hc2loIGRpIGhhbGFtYW4gbG9n" +
  "aW4pJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnNvbG" +
  "UubG9nKGNoYWxrLmdyZWVuKCdbQ09OTkVDVF0g4pyFIExPR0lOIEJFUkhBU0lMJykpOwoK" +
  "ICAgICAgICAgICAgY29uc3QgY29va2llcyA9IGF3YWl0IGxpdmVTbXNQYWdlLmNvb2tpZX" +
  "MoKTsKICAgICAgICAgICAgY29uc3QgbmV3Q2ZDb29raWUgPSBjb29raWVzLmZpbmQoYyA9" +
  "PiBjLm5hbWUgPT09ICdjZl9jbGVhcmFuY2UnKTsKICAgICAgICAgICAgaWYgKG5ld0NmQ2" +
  "9va2llICYmIG5ld0NmQ29va2llLnZhbHVlICE9PSBzZXR0aW5ncy5DRl9DTEVBUkFOQ0Vf" +
  "VkFMVUUpIHsKICAgICAgICAgICAgICAgIHNldHRpbmdzLkNGX0NMRUFSQU5DRV9WQUxVRS" +
  "A9IG5ld0NmQ29va2llLnZhbHVlOwogICAgICAgICAgICAgICAgd3JpdGVTZXR0aW5nVG9G" +
  "aWxlU3luYygnQ0ZfQ0xFQVJBTkNFX1ZBTFVFJywgbmV3Q2ZDb29raWUudmFsdWUpOwogIC" +
  "AgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWFmdGVyTG9naW5V" +
  "cmwuaW5jbHVkZXMoJy9saXZlL215X3NtcycpKSB7CiAgICAgICAgICAgICAgICBhd2FpdC" +
  "BsaXZlU21zUGFnZS5nb3RvKExJVkVfU01TX1VSTCwgeyB3YWl0VW50aWw6ICdkb21jb250" +
  "ZW50bG9hZGVkJywgdGltZW91dDogMjAwMDAgfSk7CiAgICAgICAgICAgIH0KICAgICAgIC" +
  "B9CgogICAgICAgIGNvbnN0IGZpbmFsVXJsID0gbGl2ZVNtc1BhZ2UudXJsKCk7CiAgICAg" +
  "ICAgaWYgKCFmaW5hbFVybC5pbmNsdWRlcygnL2xpdmUvbXlfc21zJykpIHsKICAgICAgIC" +
  "AgICAgcmVzcG9uc2UgPSBhd2FpdCBsaXZlU21zUGFnZS5nb3RvKExJVkVfU01TX1VSTCwg" +
  "eyB3YWl0VW50aWw6ICdkb21jb250ZW50bG9hZGVkJywgdGltZW91dDogMjAwMDAgfSk7Ci" +
  "AgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzKCkgPj0gNDAw" +
  "KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdhZ2FsIGFrc2VzIExpdm" +
  "UgU01TLiBTdGF0dXM6ICR7cmVzcG9uc2UgPyByZXNwb25zZS5zdGF0dXMoKSA6ICdOL0En" +
  "fWApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhd2FpdCBuZXcgUHJvbW" +
  "lzZShyID0+IHNldFRpbWVvdXQociwgMTAwMCkpOwogICAgICAgIGF3YWl0IGhhbmRsZVBv" +
  "cHVwQW5kVHV0b3JpYWwobGl2ZVNtc1BhZ2UpOwogICAgICAgIGF3YWl0IHNldHVwRW5oYW" +
  "5jZWRTb2NrZXRJT01vbml0b3JpbmcoKTsKCiAgICAgICAgbWFya0Nvbm5lY3Rpb25TdGFi" +
  "bGUoKTsKICAgICAgICB1cGRhdGVCb3RTdGF0dXMoJ0xpdmUgU01TIFJlYWR5Jyk7CiAgIC" +
  "AgICAgaXNQb2xsaW5nQWN0aXZlID0gdHJ1ZTsKICAgICAgICAKICAgICAgICByZXR1cm4g" +
  "dHJ1ZTsKCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoY2" +
  "hhbGsucmVkKGBbQ09OTkVDVF0g4p2MIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCkpOwog" +
  "ICAgICAgIG1hcmtDb25uZWN0aW9uVW5zdGFibGUoKTsKICAgICAgICB1cGRhdGVCb3RTdG" +
  "F0dXMoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDMwKX0uLi5gLCB0" +
  "cnVlKTsKICAgICAgICBpc1BvbGxpbmdBY3RpdmUgPSBmYWxzZTsKICAgICAgICByZXR1cm" +
  "4gZmFsc2U7CiAgICB9IGZpbmFsbHkgewogICAgICAgIGlzQ29ubmVjdGluZyA9IGZhbHNl" +
  "OwogICAgfQp9OwoKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS" +
  "AvLwovLyA9PT09PT09PT09IFBPTExJTkcgPT09PT09PT09PT09PT09PT0gLy8KLy8gPT09" +
  "PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCgpjb25zdCBjaGVja1N0YW" +
  "JsZU1lc3NhZ2VzID0gYXN5bmMgKCkgPT4gewogICAgaWYoaXNDb25uZWN0aW5nIHx8ICFp" +
  "c0Jyb3dzZXJSZWFkeSB8fCAhbGl2ZVNtc1BhZ2UgfHwgIWlzUG9sbGluZ0FjdGl2ZSkgcm" +
  "V0dXJuOwogICAgY29uc3QgcmF3TWVzc2FnZXMgPSBhd2FpdCBmZXRjaFNpbXBsZVNNUygp" +
  "OwogICAgY29uc3QgbmV3TWVzc2FnZXMgPSBbXTsKICAgIGZvcihjb25zdCBtIG9mIHJhd0" +
  "1lc3NhZ2VzKXsgCiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VTaW1wbGVTTVMobSk7" +
  "IAogICAgICAgIGlmKHBhcnNlZCl7IAogICAgICAgICAgICBjb25zdCBoID0gYCR7cGFyc2" +
  "VkLm51bWJlcn0tJHtwYXJzZWQuc2VydmljZX0tJHtwYXJzZWQubXNnLnN1YnN0cmluZygw" +
  "LDUwKX1gOyAKICAgICAgICAgICAgaWYoIXNlbnRNZXNzYWdlSGFzaGVzLmhhcyhoKSl7IA" +
  "ogICAgICAgICAgICAgICAgbmV3TWVzc2FnZXMucHVzaChwYXJzZWQpOyAKICAgICAgICAg" +
  "ICAgICAgIHNlbnRNZXNzYWdlSGFzaGVzLmFkZChoKTsgCiAgICAgICAgICAgICAgICBhd2" +
  "FpdCBzZW5kTWVzc2FnZU5vdGlmaWNhdGlvbihwYXJzZWQpOyAKICAgICAgICAgICAgfSAK" +
  "ICAgICAgICB9IAogICAgfQp9OwpzZXRJbnRlcnZhbChjaGVja1N0YWJsZU1lc3NhZ2VzLC" +
  "AxMDAwMCk7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8K" +
  "Ly8gPT09PT09PT09PSBOT1RJRklDQVRJT04gPT09PT09PT09PT09IC8vCi8vID09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwoKbGV0IGxhc3RTTVNMb2dUaW1l" +
  "ID0gMDsKY29uc3QgU01TX0xPR19DT09MRE9XTiA9IDEwMDA7Cgpjb25zdCBzZW5kTWVzc2" +
  "FnZU5vdGlmaWNhdGlvbiA9IGFzeW5jIChtc2cpID0+IHsKICAgIHRyeSB7CiAgICAgICAg" +
  "Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICBpZiAobm93IC0gbGFzdFNNU0xvZ1" +
  "RpbWUgPCBTTVNfTE9HX0NPT0xET1dOKSByZXR1cm47CiAgICAgICAgbGFzdFNNU0xvZ1Rp" +
  "bWUgPSBub3c7CiAgICAgICAgCiAgICAgICAgY29uc3QgY291bnRyeUZsYWcgPSBnZXRDb3" +
  "VudHJ5RmxhZyhtc2cuY291bnRyeSk7CiAgICAgICAgY29uc3QgbWFza2VkID0gbWFza1Bo" +
  "b25lTnVtYmVyKG1zZy5udW1iZXIpOwogICAgICAgIGNvbnN0IG90cFRleHQgPSBtc2cub3" +
  "RwCiAgPyBgPGJsb2NrcXVvdGU+8J+UkCA8Yj7wnZej8J2XlPCdl6bwnZem8J2XlvCdl6Lw" +
  "nZeX8J2XmDwvYj4gOiA8Y29kZT4ke21zZy5vdHB9PC9jb2RlPjwvYmxvY2txdW90ZT5gCi" +
  "AgOiAnJzsKICAgICAgICAKICAgICAgICBjb25zdCB0ZXh0ID0gYDxibG9ja3F1b3RlPjxi" +
  "PvCfkqUg8J2XofCdl5jwnZeqICR7bXNnLnNlcnZpY2V9ICR7Y291bnRyeUZsYWd9PC9iPj" +
  "wvYmxvY2txdW90ZT4K4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxiPv" +
  "Cfk7Eg8J2XofCdmILwnZe68J2Xr/Cdl7LwnZe/IDo8L2I+IDxpPiR7bWFza2VkfTwvaT4g" +
  "ICAgICAgCiR7b3RwVGV4dH0KPGI+8J+MjSDwnZeW8J2XvPCdmILwnZe78J2YgfCdl7/wnZ" +
  "iGIDo8L2I+ICR7Y291bnRyeUZsYWd9IC0gJHttc2cuY291bnRyeX0KPGI+4pqZ77iPIPCd" +
  "l6bwnZey8J2Xv/CdmIPwnZe28J2XsPCdl7IgOjwvYj4gJHttc2cuc2VydmljZX0K4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxiPjxibG9ja3F1b3RlPvCfkqwg8J" +
  "2XmfCdmILwnZe58J2XuSDwnZeg8J2XsvCdmIDwnZiA8J2XrvCdl7TwnZeyPC9ibG9ja3F1" +
  "b3RlPjwvYj4KPGk+PGJsb2NrcXVvdGU+JHtlc2NhcGVIdG1sKG1zZy5tc2cpfTwvYmxvY2" +
  "txdW90ZT48L2k+CuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKU" +
  "geKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQo8Yj48aT" +
  "7ij7Ag8J2YgfCdl7bwnZe68J2XsiA6ICR7bXNnLnRpbWV9PC9pPjwvYj5gOwogICAgICAg" +
  "IAogICAgICAgIGNvbnN0IGtleWJvYXJkID0gTWFya3VwLmlubGluZUtleWJvYXJkKFsKIC" +
  "AgICAgICAKICBbCiAgICBNYXJrdXAuYnV0dG9uLnVybCgn8J+aqCDwnZi+8J2Zg/CdmLzw" +
  "nZmJ8J2ZifCdmYDwnZmH8J2ZjicsIHNldHRpbmdzLk1BSU5fQ0hBTk5FTF9MSU5LIHx8IC" +
  "cjJyksCiAgICBNYXJrdXAuYnV0dG9uLnVybCgn8J+TgiDwnZmJ8J2ZkPCdmYjwnZi98J2Z" +
  "gPCdmY3wnZmOJywgc2V0dGluZ3MuTlVNQkVSX0dST1VQX0xJTksgfHwgJyMnKQogIF0sCi" +
  "AgWwogICAgTWFya3VwLmJ1dHRvbi51cmwoJ/CfkZEg8J2ZivCdmZLwnZmJ8J2ZgPCdmY0g" +
  "8J2YvfCdmYrwnZmPJywgc2V0dGluZ3MuQk9UX09XTkVSX0xJTksgfHwgJyMnKQogIF0KXS" +
  "k7CiAgICAgICAgLy8gTWVuZ2lyaW0ga2UgYmFueWFrIGdydXAKICAgICAgICBjb25zdCBj" +
  "aGF0SWRzID0gQXJyYXkuaXNBcnJheShzZXR0aW5ncy5DSEFUX0lEKSA/IHNldHRpbmdzLk" +
  "NIQVRfSUQgOiBbc2V0dGluZ3MuQ0hBVF9JRF07CiAgICAgICAgCiAgICAgICAgZm9yIChj" +
  "b25zdCBpZCBvZiBjaGF0SWRzKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC" +
  "AgICBhd2FpdCBib3QudGVsZWdyYW0uc2VuZE1lc3NhZ2UoaWQsIHRleHQsIHsgCiAgICAg" +
  "ICAgICAgICAgICAgICAgcGFyc2VfbW9kZTogJ0hUTUwnLCAKICAgICAgICAgICAgICAgIC" +
  "AgICByZXBseV9tYXJrdXA6IGtleWJvYXJkLnJlcGx5X21hcmt1cCAKICAgICAgICAgICAg" +
  "ICAgIH0pOwogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIG" +
  "NvbnNvbGUuZXJyb3IoY2hhbGsucmVkKGBbU01TXSDinYwgR2FnYWwga2lyaW0ga2UgSUQg" +
  "JHtpZH06ICR7ZXJyLm1lc3NhZ2V9YCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogIC" +
  "AgICAgIAogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGNo" +
  "YWxrLnJlZChgW1NNU10g4p2MIEVycm9yIHNlbmRpbmcgbm90aWZpY2F0aW9uOiAke2Vycm" +
  "9yLm1lc3NhZ2V9YCkpOwogICAgfQp9OwoKCgovLyA9PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBQUk9HUkVTUyBCQVIgU1lTVEVNID" +
  "09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwoK" +
  "Y29uc3QgY3JlYXRlUHJvZ3Jlc3NCYXIgPSAoY3VycmVudCwgdG90YWwsIGxlbmd0aCA9ID" +
  "IwKSA9PiB7CiAgY29uc3QgcGVyY2VudGFnZSA9IGN1cnJlbnQgLyB0b3RhbDsKICBjb25z" +
  "dCBmaWxsZWRMZW5ndGggPSBNYXRoLnJvdW5kKGxlbmd0aCAqIHBlcmNlbnRhZ2UpOwogIG" +
  "NvbnN0IGVtcHR5TGVuZ3RoID0gbGVuZ3RoIC0gZmlsbGVkTGVuZ3RoOwogIAogIGNvbnN0" +
  "IGZpbGxlZEJhciA9ICfilognLnJlcGVhdChmaWxsZWRMZW5ndGgpOwogIGNvbnN0IGVtcH" +
  "R5QmFyID0gJ+KWkScucmVwZWF0KGVtcHR5TGVuZ3RoKTsKICAKICByZXR1cm4gYFske2Zp" +
  "bGxlZEJhcn0ke2VtcHR5QmFyfV0gJHtNYXRoLnJvdW5kKHBlcmNlbnRhZ2UgKiAxMDApfS" +
  "VgOwp9OwoKY29uc3QgdXBkYXRlUmFuZ2VTdGF0dXMgPSBhc3luYyAoY3R4LCB3YWl0TXNn" +
  "LCBzdGF0dXNUZXh0LCBjdXJyZW50U3RlcCA9IDAsIHRvdGFsU3RlcHMgPSAxMCkgPT4gew" +
  "ogIHRyeSB7CiAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVU" +
  "aW1lU3RyaW5nKCdpZC1JRCcpOwogICAgbGV0IHByb2dyZXNzQmFyID0gJyc7CiAgICAKIC" +
  "AgIGlmICh0b3RhbFN0ZXBzID4gMCAmJiBjdXJyZW50U3RlcCA+IDApIHsKICAgICAgcHJv" +
  "Z3Jlc3NCYXIgPSBjcmVhdGVQcm9ncmVzc0JhcihjdXJyZW50U3RlcCwgdG90YWxTdGVwcy" +
  "k7CiAgICB9CiAgICAKICAgIGNvbnN0IHVwZGF0ZWRUZXh0ID0gYDxibG9ja3F1b3RlPuKP" +
  "syA8Yj5TZWRhbmcgTWVuZ2FuYWxpc2lzIFJhbmdlPC9iPjwvYmxvY2txdW90ZT5cblxuJH" +
  "twcm9ncmVzc0Jhcn1cblxu8J+VkCA8aT5MYXN0IHVwZGF0ZSA6ICR7Y3VycmVudFRpbWV9" +
  "PC9pPmA7CiAgICAKICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQoCi" +
  "AgICAgIGN0eC5jaGF0LmlkLCAKICAgICAgd2FpdE1zZy5tZXNzYWdlX2lkLCAKICAgICAg" +
  "bnVsbCwgCiAgICAgIHVwZGF0ZWRUZXh0LCAKICAgICAgeyBwYXJzZV9tb2RlOiAnSFRNTC" +
  "cgfQogICAgKTsKICAgCiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUubG9nKGBb" +
  "U1RBVFVTXSAke3N0YXR1c1RleHR9YCk7CiAgfQp9OwoKY29uc3QgaGFuZGxlUmFuZ2VFcn" +
  "JvciA9IGFzeW5jIChjdHgsIHdhaXRNc2csIGVycm9yKSA9PiB7CiAgdHJ5IHsKICAgIGF3" +
  "YWl0IGN0eC50ZWxlZ3JhbS5kZWxldGVNZXNzYWdlKGN0eC5jaGF0LmlkLCB3YWl0TXNnLm" +
  "1lc3NhZ2VfaWQpOwogIH0gY2F0Y2ggKGUpIHt9CiAgCiAgYXdhaXQgY3R4LnJlcGx5V2l0" +
  "aEhUTUwoCiAgICBgPGJsb2NrcXVvdGU+4p2MIEdhZ2FsIG1lbGFrdWthbiBhbmFsaXNpcy" +
  "ByYW5nZTwvYmxvY2txdW90ZT5cblxuPGNvZGU+JHtlcnJvci5tZXNzYWdlfTwvY29kZT5g" +
  "LAogICAgeyByZXBseV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNzYWdlX2lkIH" +
  "0KICApOwp9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8v" +
  "Ci8vID09PT09PT09PT0gUkFOR0UgQ0hFQ0sgU1lTVEVNID09PT09PSAvLwovLyA9PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCmNvbnN0IGV4dHJhY3RUYWJs" +
  "ZURhdGFGcm9tUGFnZSA9IGFzeW5jIChwYWdlKSA9PiB7CiAgICByZXR1cm4gYXdhaXQgcG" +
  "FnZS5ldmFsdWF0ZSgoKSA9PiB7CiAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gKHR4dCkg" +
  "PT4gewogICAgICAgICAgICBpZiAoIXR4dCkgcmV0dXJuICcnOwogICAgICAgICAgICBsZX" +
  "QgdCA9IHR4dDsKICAgICAgICAgICAgdCA9IHQucmVwbGFjZSgvZnVuY3Rpb25ccytbXHNc" +
  "U10qL2dpLCAiIik7CiAgICAgICAgICAgIHQgPSB0LnJlcGxhY2UoL1wkXChbXHNcU10qL2" +
  "dpLCAiIik7CiAgICAgICAgICAgIHQgPSB0LnJlcGxhY2UoL1N3YWxbXHNcU10qL2dpLCAi" +
  "Iik7CiAgICAgICAgICAgIHQgPSB0LnJlcGxhY2UoLzxcLz9bXj5dKz4vZywgIiIpOwogIC" +
  "AgICAgICAgICB0ID0gdC5yZXBsYWNlKC9cc3syLH0vZywgIiAiKTsKICAgICAgICAgICAg" +
  "dCA9IHQudHJpbSgpOwogICAgICAgICAgICBpZiAodC5lbmRzV2l0aCgiKCIpKSB0ID0gdC" +
  "ArICIpIjsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfTsKCiAgICAgICAgY29u" +
  "c3QgcmVzdWx0cyA9IFtdOwogICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQucXVlcn" +
  "lTZWxlY3RvcignI2NsaWVudHNtc2hpc3RvcnktdGFibGUnKTsKICAgICAgICBpZiAoIXRh" +
  "YmxlKSByZXR1cm4gcmVzdWx0czsKCiAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5xdW" +
  "VyeVNlbGVjdG9yKCd0Ym9keScpOwogICAgICAgIGlmICghdGJvZHkpIHJldHVybiByZXN1" +
  "bHRzOwoKICAgICAgICBjb25zdCByb3dzID0gdGJvZHkucXVlcnlTZWxlY3RvckFsbCgndH" +
  "InKTsKCiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgIHRyeSB7" +
  "CiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKC" +
  "d0ZCcpOwogICAgICAgICAgICAgICAgaWYgKGNlbGxzLmxlbmd0aCA+PSA1KSB7CiAgICAg" +
  "ICAgICAgICAgICAgICAgY29uc3QgcmFuZ2VDZWxsID0gY2VsbHNbMF07CiAgICAgICAgIC" +
  "AgICAgICAgICAgY29uc3QgdGVzdE51bWJlckNlbGwgPSBjZWxsc1sxXTsKICAgICAgICAg" +
  "ICAgICAgICAgICBjb25zdCBzaWRDZWxsID0gY2VsbHNbMl07CiAgICAgICAgICAgICAgIC" +
  "AgICAgY29uc3QgbWVzc2FnZUNlbGwgPSBjZWxsc1szXTsKICAgICAgICAgICAgICAgICAg" +
  "ICBjb25zdCB0aW1lQ2VsbCA9IGNlbGxzWzRdOwoKICAgICAgICAgICAgICAgICAgICBjb2" +
  "5zdCByYW5nZVRleHQgPSBjbGVhblRleHQocmFuZ2VDZWxsLnRleHRDb250ZW50Py50cmlt" +
  "KCkgfHwgJycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlc3ROdW1iZXIgPSBjbG" +
  "VhblRleHQodGVzdE51bWJlckNlbGwudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJyk7CiAg" +
  "ICAgICAgICAgICAgICAgICAgY29uc3Qgc2lkID0gY2xlYW5UZXh0KHNpZENlbGwudGV4dE" +
  "NvbnRlbnQ/LnRyaW0oKSB8fCAnJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVz" +
  "c2FnZSA9IGNsZWFuVGV4dChtZXNzYWdlQ2VsbC50ZXh0Q29udGVudD8udHJpbSgpIHx8IC" +
  "cnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gY2xlYW5UZXh0KHRpbWVD" +
  "ZWxsLnRleHRDb250ZW50Py50cmltKCkgfHwgJycpOwoKICAgICAgICAgICAgICAgICAgIC" +
  "BpZiAoIXJhbmdlVGV4dCB8fCAhc2lkKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAg" +
  "IGxldCBjb3VudHJ5ID0gJ1VOS05PV04nOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG" +
  "1hdGNoID0gcmFuZ2VUZXh0Lm1hdGNoKC9eKFtBLVphLXpcc10rKS8pOwogICAgICAgICAg" +
  "ICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudH" +
  "J5ID0gbWF0Y2hbMV0udHJpbSgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAg" +
  "ICAgfQoKICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgIC" +
  "AgICAgICAgICAgICBSYW5nZTogcmFuZ2VUZXh0LAogICAgICAgICAgICAgICAgICAgICAg" +
  "ICBUZXN0TnVtYmVyOiB0ZXN0TnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICBTSU" +
  "Q6IHNpZCwKICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZTogbWVzc2FnZSwKICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgVGltZTogdGltZSwKICAgICAgICAgICAgICAgICAgIC" +
  "AgICAgQ291bnRyeTogY291bnRyeSwKICAgICAgICAgICAgICAgICAgICAgICAgU1NJRDog" +
  "c2lkLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgIC" +
  "AgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9KTsKCiAgICAg" +
  "ICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9KTsKfTsKCmNvbnN0IGNoZWNrQW5kQ2xpY2tOZX" +
  "h0UGFnZSA9IGFzeW5jIChwYWdlKSA9PiB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IGNs" +
  "aWNrZWQgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHsKICAgICAgICAgICAgY29uc3" +
  "QgbmV4dExpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NsaWVudHNtc2hpc3Rvcnkt" +
  "dGFibGVfbmV4dCIpOwogICAgICAgICAgICBpZiAoIW5leHRMaSkgcmV0dXJuIGZhbHNlOw" +
  "oKICAgICAgICAgICAgaWYgKG5leHRMaS5jbGFzc0xpc3QuY29udGFpbnMoImRpc2FibGVk" +
  "IikpIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXh0TGkucXVlcn" +
  "lTZWxlY3RvcigiYSIpOwogICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgICAg" +
  "YS5jbGljaygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH" +
  "0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwoKICAgICAgICBpZiAo" +
  "IWNsaWNrZWQpIHJldHVybiBmYWxzZTsKCiAgICAgICAgYXdhaXQgbmV3IFByb21pc2Uocm" +
  "Vzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDgwMDApKTsKCiAgICAgICAgY29uc3Qg" +
  "bG9hZGVkID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7CiAgICAgICAgICAgIGNvbn" +
  "N0IHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NsaWVudHNtc2hpc3Rvcnkt" +
  "dGFibGUgdGJvZHkiKTsKICAgICAgICAgICAgaWYgKCF0Ym9keSkgcmV0dXJuIGZhbHNlOw" +
  "ogICAgICAgICAgICByZXR1cm4gdGJvZHkucXVlcnlTZWxlY3RvckFsbCgidHIiKS5sZW5n" +
  "dGggPiAwOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoIWxvYWRlZCkgewogICAgICAgIC" +
  "AgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwg" +
  "NTAwMCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfSBjYXRjaC" +
  "AoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTVEFUVVNdIEVycm9yIGluIGNoZWNr" +
  "QW5kQ2xpY2tOZXh0UGFnZTonLCBlLm1lc3NhZ2UpOwogICAgICAgIHJldHVybiBmYWxzZT" +
  "sKICAgIH0KfTsKCmNvbnN0IHdhaXRGb3JUYWJsZURhdGEgPSBhc3luYyAocGFnZSkgPT4g" +
  "ewogICAgdHJ5IHsKICAgICAgICAvLyBUdW5nZ3Ugc2FtcGFpIERhdGFUYWJsZXMgdGVyaW" +
  "5pc2lhbGlzYXNpCiAgICAgICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oKCkgPT4g" +
  "ewogICAgICAgICAgICByZXR1cm4gdHlwZW9mICQgIT09ICd1bmRlZmluZWQnICYmIAogIC" +
  "AgICAgICAgICAgICAgICAgJC5mbi5kYXRhVGFibGUgJiYgCiAgICAgICAgICAgICAgICAg" +
  "ICAkKCcjY2xpZW50c21zaGlzdG9yeS10YWJsZScpLmxlbmd0aCA+IDAgJiYKICAgICAgIC" +
  "AgICAgICAgICAgICQoJyNjbGllbnRzbXNoaXN0b3J5LXRhYmxlJykuRGF0YVRhYmxlKCk7" +
  "CiAgICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwMCB9KTsKICAgICAgICAKICAgICAgICAvLy" +
  "BUdW5nZ3Ugc2FtcGFpIGFkYSBkYXRhIGRpIHRhYmVsCiAgICAgICAgYXdhaXQgcGFnZS53" +
  "YWl0Rm9yRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgICBjb25zdCBkYXRhVGFibGUgPS" +
  "AkKCcjY2xpZW50c21zaGlzdG9yeS10YWJsZScpLkRhdGFUYWJsZSgpOwogICAgICAgICAg" +
  "ICByZXR1cm4gZGF0YVRhYmxlICYmIGRhdGFUYWJsZS5yb3dzICYmIGRhdGFUYWJsZS5yb3" +
  "dzKCkuY291bnQoKSA+IDA7CiAgICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwMCB9KTsKICAg" +
  "ICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgIC" +
  "AgICAgY29uc29sZS5sb2coJ1tTVEFUVVNdIOKdjCBUaW1lb3V0IG1lbnVuZ2d1IERhdGFU" +
  "YWJsZXM6JywgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgCiAgICAgICAgLy8gQ29iYSBwZW" +
  "5kZWthdGFuIGFsdGVybmF0aWY6IHR1bmdndSBlbGVtZW4gdGFiZWwgbXVuY3VsCiAgICAg" +
  "ICAgdHJ5IHsKICAgICAgICAgICAgYXdhaXQgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNjbG" +
  "llbnRzbXNoaXN0b3J5LXRhYmxlJywgeyB0aW1lb3V0OiAxMDAwMCB9KTsKICAgICAgICAg" +
  "ICAgYXdhaXQgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNjbGllbnRzbXNoaXN0b3J5LXRhYm" +
  "xlIHRib2R5IHRyJywgeyB0aW1lb3V0OiAyMDAwMCB9KTsKICAgICAgICAgICAgY29uc29s" +
  "ZS5sb2coJ1tTVEFUVVNdIOKchSBEYXRhIHJhbmdlIGJlcmhhc2lsIGRpdGVtdWthbicpOw" +
  "ogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAg" +
  "ICAgICAgIGNvbnNvbGUubG9nKCdbU1RBVFVTXSDim5QgRGF0YSByYW5nZSBnYWdhbCBkaX" +
  "RlbXVrYW4nKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0K" +
  "fTsKCmNvbnN0IGRvd25sb2FkQW5kQW5hbHl6ZVJhbmdlRGF0YSA9IGFzeW5jIChzZXJ2aW" +
  "NlLCBjb3VudHJ5LCBjdHgsIHdhaXRNc2cpID0+IHsKICAgIGlmICghaXNCcm93c2VyUmVh" +
  "ZHkgfHwgIWJyb3dzZXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXIgdG" +
  "lkYWsgcmVhZHkuIik7CiAgICB9CiAgICAKICAgIGxldCBwYWdlID0gbnVsbDsKICAgIGxl" +
  "dCBhbGxSZXN1bHRzID0gW107CiAgICAKICAgIHRyeSB7CiAgICAgICAgLy8gU3RlcCAxOi" +
  "BNZW1idWthIGJyb3dzZXIKICAgICAgICBhd2FpdCB1cGRhdGVSYW5nZVN0YXR1cyhjdHgs" +
  "IHdhaXRNc2csICLwn5SEIE1lbWJ1a2EgaGFsYW1hbiByYW5nZSB0ZXN0Li4uIiwgMSwgMT" +
  "ApOwogICAgICAgCiAgICAgICAgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpOwog" +
  "ICAgICAgIGF3YWl0IHBhZ2Uuc2V0RGVmYXVsdE5hdmlnYXRpb25UaW1lb3V0KDMwMDAwMC" +
  "k7CiAgICAgICAgYXdhaXQgcGFnZS5zZXREZWZhdWx0VGltZW91dCgxMjAwMDApOwogICAg" +
  "ICAgIGF3YWl0IHBhZ2Uuc2V0Vmlld3BvcnQoeyB3aWR0aDogMTkyMCwgaGVpZ2h0OiAxMD" +
  "gwIH0pOwogICAgICAgIAogICAgICAgIGNvbnN0IHVzZXJBZ2VudCA9IHNldHRpbmdzLkNV" +
  "UlJFTlRfVVNFUl9BR0VOVDsKICAgICAgICBhd2FpdCBwYWdlLnNldFVzZXJBZ2VudCh1c2" +
  "VyQWdlbnQpOwogICAgICAgIAogICAgICAgIGlmIChzZXR0aW5ncy5DRl9DTEVBUkFOQ0Vf" +
  "VkFMVUUgJiYgc2V0dGluZ3MuSVZBU19TRVNTSU9OX1ZBTFVFICYmIHNldHRpbmdzLlhTUk" +
  "ZfVE9LRU5fVkFMVUUpIHsKICAgICAgICAgICAgY29uc3QgY29va2llcyA9IFsKICAgICAg" +
  "ICAgICAgICAgIHsgbmFtZTogJ2NmX2NsZWFyYW5jZScsIHZhbHVlOiBzZXR0aW5ncy5DRl" +
  "9DTEVBUkFOQ0VfVkFMVUUsIGRvbWFpbjogJy5pdmFzbXMuY29tJyB9LAogICAgICAgICAg" +
  "ICAgICAgeyBuYW1lOiAnaXZhc19zbXNfc2Vzc2lvbicsIHZhbHVlOiBzZXR0aW5ncy5JVk" +
  "FTX1NFU1NJT05fVkFMVUUsIGRvbWFpbjogJy5pdmFzbXMuY29tJyB9LAogICAgICAgICAg" +
  "ICAgICAgeyBuYW1lOiAnWFNSRi1UT0tFTicsIHZhbHVlOiBzZXR0aW5ncy5YU1JGX1RPS0" +
  "VOX1ZBTFVFLCBkb21haW46ICcuaXZhc21zLmNvbScgfQogICAgICAgICAgICBdOwogICAg" +
  "ICAgICAgICBhd2FpdCBwYWdlLnNldENvb2tpZSguLi5jb29raWVzKTsKICAgICAgICB9Ci" +
  "AgICAgICAgCiAgICAgICAgbGV0IHRhcmdldFVybCA9IHNlcnZpY2UgPT09ICdhbGwnCiAg" +
  "ICAgICAgICAgID8gUkFOR0VfQkFTRV9VUkwKICAgICAgICAgICAgOiBgJHtSQU5HRV9CQV" +
  "NFX1VSTH0/YXBwPSR7c2VydmljZX1gOwogICAgICAgIAogICAgICAgIC8vIFN0ZXAgMjog" +
  "TWVuZ2Frc2VzIFVSTAogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2" +
  "FpdE1zZywgYPCfjJAgTWVuZ2Frc2VzOiAke3RhcmdldFVybH1gLCAyLCAxMCk7CiAgICAg" +
  "ICAgCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYWdlLmdvdG8odGFyZ2V0VX" +
  "JsLCB7CiAgICAgICAgICAgIHdhaXRVbnRpbDogJ25ldHdvcmtpZGxlMCcsCiAgICAgICAg" +
  "ICAgIHRpbWVvdXQ6IDEyMDAwMAogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbn" +
  "N0IHN0YXR1cyA9IHJlc3BvbnNlID8gcmVzcG9uc2Uuc3RhdHVzKCkgOiAnTi9BJzsKICAg" +
  "ICAgICAKICAgICAgICBpZiAoc3RhdHVzID49IDQwMCkgewogICAgICAgICAgICB0aHJvdy" +
  "BuZXcgRXJyb3IoYEhhbGFtYW4gZXJyb3IgZGVuZ2FuIHN0YXR1czogJHtzdGF0dXN9YCk7" +
  "CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFN0ZXAgMzogTWVudW5nZ3UgbG9hZA" +
  "ogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIuKPsyBN" +
  "ZW51bmdndSBoYWxhbWFuIHNlbGVzYWkgbG9hZC4uLiIsIDMsIDEwKTsKICAgICAgICBhd2" +
  "FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMTUwMDApKTsKICAgICAgICAK" +
  "ICAgICAgICAvLyBTdGVwIDQ6IEhhbmRsZSBwb3B1cAogICAgICAgIGF3YWl0IHVwZGF0ZV" +
  "JhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIvCfm6HvuI8gTWVuYW5nYW5pIHBvcHVwL3R1" +
  "dG9yaWFsLi4uIiwgNCwgMTApOwogICAgICAgIGF3YWl0IGhhbmRsZVBvcHVwQW5kVHV0b3" +
  "JpYWwocGFnZSk7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0" +
  "KHIsIDUwMDApKTsKICAgICAgICAKICAgICAgICAvLyBTdGVwIDU6IENsZWFyIGZpbHRlcg" +
  "ogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIvCfp7kg" +
  "TWVtYmVyc2loa2FuIGZpbHRlciBzZWFyY2guLi4iLCA1LCAxMCk7CiAgICAgICAgYXdhaX" +
  "QgY2xlYXJTZWFyY2hGaWx0ZXIocGFnZSk7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2Uo" +
  "ciA9PiBzZXRUaW1lb3V0KHIsIDUwMDApKTsKICAgICAgICAKICAgICAgICBpZiAoY291bn" +
  "RyeSAhPT0gJ2FsbCcpIHsKICAgICAgICAgICAgLy8gU3RlcCA2OiBTZWFyY2ggY291bnRy" +
  "eQogICAgICAgICAgICBhd2FpdCB1cGRhdGVSYW5nZVN0YXR1cyhjdHgsIHdhaXRNc2csIG" +
  "Dwn5SOIE1lbmNhcmkgbmVnYXJhOiAke2NvdW50cnl9YCwgNiwgMTApOwogICAgICAgICAg" +
  "ICBsZXQgb2sgPSBhd2FpdCBzZWFyY2hDb3VudHJ5SW5UYWJsZShwYWdlLCBjb3VudHJ5KT" +
  "sKICAgICAgICAgICAgaWYgKCFvaykgewogICAgICAgICAgICAgICAgY29uc3QgY2FwID0g" +
  "Y291bnRyeS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNvdW50cnkuc2xpY2UoMSk7Ci" +
  "AgICAgICAgICAgICAgICBhd2FpdCBzZWFyY2hDb3VudHJ5SW5UYWJsZShwYWdlLCBjYXAp" +
  "OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2" +
  "V0VGltZW91dChyLCAxMDAwMCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF3" +
  "YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIvCfjI0gTWVuZ2FuYWxpc2" +
  "lzIHNlbXVhIG5lZ2FyYS4uLiIsIDYsIDEwKTsKICAgICAgICB9CiAgICAgICAgCiAgICAg" +
  "ICAgLy8gU3RlcCA3OiBDYXJpIHRhYmVsCiAgICAgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdG" +
  "F0dXMoY3R4LCB3YWl0TXNnLCAi8J+UjSBNZW5jYXJpIHRhYmVsIGRhdGEuLi4iLCA3LCAx" +
  "MCk7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDEwMD" +
  "AwKSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgdGFibGVFeGlzdHMgPSBhd2FpdCBwYWdl" +
  "LmV2YWx1YXRlKCgpID0+IHsKICAgICAgICAgICAgcmV0dXJuICEhZG9jdW1lbnQucXVlcn" +
  "lTZWxlY3RvcignI2NsaWVudHNtc2hpc3RvcnktdGFibGUnKTsKICAgICAgICB9KTsKICAg" +
  "ICAgICAKICAgICAgICBpZiAoIXRhYmxlRXhpc3RzKSB7CiAgICAgICAgICAgIHRocm93IG" +
  "5ldyBFcnJvcigiVGFiZWwgdGlkYWsgZGl0ZW11a2FuIHNldGVsYWggbG9hZC4iKTsKICAg" +
  "ICAgICB9CgogICAgICAgIC8vIFN0ZXAgODogUGFzdGlrYW4gaGFsYW1hbiAxCiAgICAgIC" +
  "AgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YWl0TXNnLCAi8J+ThCBNZW1hc3Rp" +
  "a2FuIGJlcmFkYSBkaSBoYWxhbWFuIDEuLi4iLCA4LCAxMCk7CiAgICAgICAgYXdhaXQgcG" +
  "FnZS53YWl0Rm9yU2VsZWN0b3IoJyNjbGllbnRzbXNoaXN0b3J5LXRhYmxlJywgeyB0aW1l" +
  "b3V0OiAyMDAwMCB9KTsKCiAgICAgICAgYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7Ci" +
  "AgICAgICAgICAgIGlmICh0eXBlb2YgJCAhPT0gJ3VuZGVmaW5lZCcgJiYgJC5mbi5kYXRh" +
  "VGFibGUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgJC" +
  "gnI2NsaWVudHNtc2hpc3RvcnktdGFibGUnKS5EYXRhVGFibGUoKS5wYWdlKDApLmRyYXco" +
  "J3BhZ2UnKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICAgICAgfQ" +
  "ogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVv" +
  "dXQociwgNTAwMCkpOwoKICAgICAgICAvLyBTdGVwIDk6IEJhY2EgaGFsYW1hbiAxCiAgIC" +
  "AgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YWl0TXNnLCAi8J+TiiBNZW1i" +
  "YWNhIGRhdGEgZGFyaSBoYWxhbWFuIDEuLi4iLCA5LCAxMCk7CiAgICAgICAgYXdhaXQgbm" +
  "V3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDgwMDApKTsKICAgICAgICAKICAgICAg" +
  "ICBsZXQgcGFnZVJlc3VsdHMgPSBhd2FpdCBleHRyYWN0VGFibGVEYXRhRnJvbVBhZ2UocG" +
  "FnZSk7CiAgICAgICAgYWxsUmVzdWx0cyA9IFsuLi5wYWdlUmVzdWx0c107CiAgICAgICAg" +
  "CiAgICAgICAgaWYgKGFsbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIH" +
  "Rocm93IG5ldyBFcnJvcihgVGlkYWsgYWRhIGRhdGEgeWFuZyBkaXRlbXVrYW4gdW50dWsg" +
  "c2VydmljZSAke3NlcnZpY2V9IGRhbiBuZWdhcmEgJHtjb3VudHJ5fS5gKTsKICAgICAgIC" +
  "B9CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YWl0" +
  "TXNnLCBg4pyFIEhhbGFtYW4gMTogJHthbGxSZXN1bHRzLmxlbmd0aH0gZGF0YSBkaXRlbX" +
  "VrYW5gLCA5LCAxMCk7CiAgICAgICAgCiAgICAgICAgLy8gU3RlcCAxMDogQmFjYSBoYWxh" +
  "bWFuIGJlcmlrdXRueWEKICAgICAgICBsZXQgcGFnZU51bWJlciA9IDE7CiAgICAgICAgY2" +
  "9uc3QgbWF4UGFnZXMgPSA1OwogICAgICAgIGxldCBjb25zZWN1dGl2ZU5vRGF0YSA9IDA7" +
  "CiAgICAgICAgCiAgICAgICAgd2hpbGUgKHBhZ2VOdW1iZXIgPCBtYXhQYWdlcykgewogIC" +
  "AgICAgICAgICBhd2FpdCB1cGRhdGVSYW5nZVN0YXR1cyhjdHgsIHdhaXRNc2csIGDij63v" +
  "uI8gTWVuY29iYSBoYWxhbWFuICR7cGFnZU51bWJlciArIDF9Li4uYCwgMTAsIDEwKTsKIC" +
  "AgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG5leHRPayA9IGF3YWl0IGNoZWNrQW5k" +
  "Q2xpY2tOZXh0UGFnZShwYWdlKTsKICAgICAgICAgICAgaWYgKCFuZXh0T2spIHsKICAgIC" +
  "AgICAgICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgYPCf" +
  "j4EgVGlkYWsgYWRhIHRvbWJvbCBuZXh0IGRpIGhhbGFtYW4gJHtwYWdlTnVtYmVyICsgMX" +
  "0uYCwgMTAsIDEwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAg" +
  "ICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbW" +
  "VvdXQociwgMTIwMDApKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IHRhYmxl" +
  "U3RpbGxFeGlzdHMgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHsKICAgICAgICAgIC" +
  "AgICAgIGNvbnN0IHRiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NsaWVudHNtc2hp" +
  "c3RvcnktdGFibGUgdGJvZHknKTsKICAgICAgICAgICAgICAgIGlmICghdGIpIHJldHVybi" +
  "BmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiB0Yi5xdWVyeVNlbGVjdG9yQWxsKCd0" +
  "cicpLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgIC" +
  "AgICAgaWYgKCF0YWJsZVN0aWxsRXhpc3RzKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB1" +
  "cGRhdGVSYW5nZVN0YXR1cyhjdHgsIHdhaXRNc2csIGDimqDvuI8gVGFiZWwgaGlsYW5nIG" +
  "RpIGhhbGFtYW4gJHtwYWdlTnVtYmVyICsgMX0sIHJldHJ5Li4uYCwgMTAsIDEwKTsKICAg" +
  "ICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCA1MD" +
  "AwKSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAg" +
  "ICAgICAKICAgICAgICAgICAgcGFnZVJlc3VsdHMgPSBhd2FpdCBleHRyYWN0VGFibGVEYX" +
  "RhRnJvbVBhZ2UocGFnZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAocGFnZVJl" +
  "c3VsdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBjb25zZWN1dGl2ZU5vRG" +
  "F0YSsrOwogICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3" +
  "YWl0TXNnLCBg4o+577iPIERhdGEga29zb25nIGRpIGhhbGFtYW4gJHtwYWdlTnVtYmVyIC" +
  "sgMX0gKCR7Y29uc2VjdXRpdmVOb0RhdGF9LzMpYCwgMTAsIDEwKTsKICAgICAgICAgICAg" +
  "ICAgIGlmIChjb25zZWN1dGl2ZU5vRGF0YSA+PSAzKSBicmVhazsKICAgICAgICAgICAgIC" +
  "AgIHBhZ2VOdW1iZXIrKzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAg" +
  "ICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zZWN1dGl2ZU5vRGF0YSA9IDA7Ci" +
  "AgICAgICAgICAgIAogICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4ucGFnZVJlc3Vs" +
  "dHMpOwogICAgICAgICAgICAKICAgICAgICAgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dX" +
  "MoY3R4LCB3YWl0TXNnLCBg8J+TpSBIYWxhbWFuICR7cGFnZU51bWJlciArIDF9OiArJHtw" +
  "YWdlUmVzdWx0cy5sZW5ndGh9IGRhdGEsIFRvdGFsOiAke2FsbFJlc3VsdHMubGVuZ3RofW" +
  "AsIDEwLCAxMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBwYWdlTnVtYmVyKys7CiAg" +
  "ICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAzMDAwKS" +
  "k7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVz" +
  "KGN0eCwgd2FpdE1zZywgYOKchSBUb3RhbCAke2FsbFJlc3VsdHMubGVuZ3RofSBkYXRhIG" +
  "RpdGVtdWthbiBkYXJpICR7cGFnZU51bWJlcn0gaGFsYW1hbmAsIDEwLCAxMCk7CiAgICAg" +
  "ICAgCiAgICAgICAgY29uc3QgcmVzdWx0ID0gYW5hbHl6ZVJhbmdlRGF0YShhbGxSZXN1bH" +
  "RzLCBzZXJ2aWNlLCBjb3VudHJ5KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAg" +
  "IAogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdbU1RBVF" +
  "VTXSBEb3dubG9hZCBhbmQgQW5hbHl6ZSBFcnJvcjonLCBlcnJvcik7CiAgICAgICAgaWYg" +
  "KHBhZ2UpIHsKICAgICAgICAgICAgY29uc3QgZGVidWdQYXRoID0gcGF0aC5qb2luKFNTX0" +
  "RJUiwgYGVycm9yXyR7RGF0ZS5ub3coKX0ucG5nYCk7CiAgICAgICAgICAgIGF3YWl0IHBh" +
  "Z2Uuc2NyZWVuc2hvdCh7IHBhdGg6IGRlYnVnUGF0aCwgZnVsbFBhZ2U6IHRydWUgfSk7Ci" +
  "AgICAgICAgfQogICAgICAgIHRocm93IGVycm9yOwogICAgfSBmaW5hbGx5IHsKICAgICAg" +
  "ICBpZiAocGFnZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXdhaX" +
  "QgY2xlYXJTZWFyY2hGaWx0ZXIocGFnZSk7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcg" +
  "UHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMzAwMCkpOwogICAgICAgICAgICAgICAgYX" +
  "dhaXQgcGFnZS5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIHt9CiAgICAgICAgfQog" +
  "ICAgfQp9OwoKY29uc3QgZG93bmxvYWRBbmRBbmFseXplQWxsUmFuZ2VEYXRhID0gYXN5bm" +
  "MgKGN0eCwgd2FpdE1zZykgPT4gewogICAgaWYgKCFpc0Jyb3dzZXJSZWFkeSB8fCAhYnJv" +
  "d3NlcikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQnJvd3NlciB0aWRhayByZWFkeS" +
  "4iKTsKICAgIH0KICAgIAogICAgbGV0IHBhZ2UgPSBudWxsOwogICAgbGV0IGFsbFJlc3Vs" +
  "dHMgPSBbXTsKICAgIAogICAgdHJ5IHsKICAgICAgICAvLyBTdGVwIDE6IE1lbWJ1a2EgYn" +
  "Jvd3NlcgogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywg" +
  "IvCflIQgTWVtYnVrYSBoYWxhbWFuIHJhbmdlIHRlc3QuLi4iLCAxLCAxMCk7CiAgICAgIC" +
  "AgCiAgICAgICAgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpOwogICAgICAgIAog" +
  "ICAgICAgIGF3YWl0IHBhZ2Uuc2V0RGVmYXVsdE5hdmlnYXRpb25UaW1lb3V0KDE4MDAwMC" +
  "k7CiAgICAgICAgYXdhaXQgcGFnZS5zZXREZWZhdWx0VGltZW91dCg2MDAwMCk7CiAgICAg" +
  "ICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh7IHdpZHRoOiAxMjgwLCBoZWlnaHQ6IDEwMj" +
  "QsIGlzTW9iaWxlOiBmYWxzZSB9KTsKICAgICAgICAKICAgICAgICBjb25zdCB1c2VyQWdl" +
  "bnQgPSBzZXR0aW5ncy5DVVJSRU5UX1VTRVJfQUdFTlQ7CiAgICAgICAgYXdhaXQgcGFnZS" +
  "5zZXRVc2VyQWdlbnQodXNlckFnZW50KTsKICAgICAgICAKICAgICAgICBpZiAoc2V0dGlu" +
  "Z3MuQ0ZfQ0xFQVJBTkNFX1ZBTFVFICYmIHNldHRpbmdzLklWQVNfU0VTU0lPTl9WQUxVRS" +
  "AmJiBzZXR0aW5ncy5YU1JGX1RPS0VOX1ZBTFVFKSB7CiAgICAgICAgICAgIGNvbnN0IGNv" +
  "b2tpZXMgPSBbCiAgICAgICAgICAgICAgICB7IG5hbWU6ICdjZl9jbGVhcmFuY2UnLCB2YW" +
  "x1ZTogc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1ZBTFVFLCBkb21haW46ICcuaXZhc21zLmNv" +
  "bScgfSwKICAgICAgICAgICAgICAgIHsgbmFtZTogJ2l2YXNfc21zX3Nlc3Npb24nLCB2YW" +
  "x1ZTogc2V0dGluZ3MuSVZBU19TRVNTSU9OX1ZBTFVFLCBkb21haW46ICcuaXZhc21zLmNv" +
  "bScgfSwKICAgICAgICAgICAgICAgIHsgbmFtZTogJ1hTUkYtVE9LRU4nLCB2YWx1ZTogc2" +
  "V0dGluZ3MuWFNSRl9UT0tFTl9WQUxVRSwgZG9tYWluOiAnLml2YXNtcy5jb20nIH0KICAg" +
  "ICAgICAgICAgXTsKICAgICAgICAgICAgYXdhaXQgcGFnZS5zZXRDb29raWUoLi4uY29va2" +
  "llcyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHRhcmdldFVybCA9IFJB" +
  "TkdFX0JBU0VfVVJMOwogICAgICAgIAogICAgICAgIC8vIFN0ZXAgMjogTWVuZ2Frc2VzIF" +
  "VSTAogICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgYPCf" +
  "jJAgTWVuZ2Frc2VzOiAke3RhcmdldFVybH1gLCAyLCAxMCk7CiAgICAgICAgCiAgICAgIC" +
  "AgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYWdlLmdvdG8odGFyZ2V0VXJsLCB7CiAgICAg" +
  "ICAgICAgIHdhaXRVbnRpbDogJ25ldHdvcmtpZGxlMicsCiAgICAgICAgICAgIHRpbWVvdX" +
  "Q6IDkwMDAwCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgY29uc3Qgc3RhdHVzID0g" +
  "cmVzcG9uc2UgPyByZXNwb25zZS5zdGF0dXMoKSA6ICdOL0EnOwogICAgICAgIAogICAgIC" +
  "AgIGlmIChzdGF0dXMgPj0gNDAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg" +
  "SGFsYW1hbiBlcnJvciBkZW5nYW4gc3RhdHVzOiAke3N0YXR1c31gKTsKICAgICAgICB9Ci" +
  "AgICAgICAgCiAgICAgICAgLy8gU3RlcCAzOiBNZW51bmdndSBsb2FkCiAgICAgICAgYXdh" +
  "aXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YWl0TXNnLCBg4pyFIEhhbGFtYW4gYmVyaG" +
  "FzaWwgZGlha3Nlcy4gU3RhdHVzOiAke3N0YXR1c31gLCAzLCAxMCk7CiAgICAgICAgYXdh" +
  "aXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YWl0TXNnLCAi4o+zIE1lbnVuZ2d1IGhhbG" +
  "FtYW4gc2VsZXNhaSBsb2FkLi4uIiwgNCwgMTApOwogICAgICAgIGF3YWl0IG5ldyBQcm9t" +
  "aXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwMCkpOwogICAgICAgIA" +
  "ogICAgICAgIC8vIFN0ZXAgNDogSGFuZGxlIHBvcHVwCiAgICAgICAgYXdhaXQgdXBkYXRl" +
  "UmFuZ2VTdGF0dXMoY3R4LCB3YWl0TXNnLCAi8J+boe+4jyBNZW5hbmdhbmkgcG9wdXAvdH" +
  "V0b3JpYWwuLi4iLCA1LCAxMCk7CiAgICAgICAgYXdhaXQgaGFuZGxlUG9wdXBBbmRUdXRv" +
  "cmlhbChwYWdlKTsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldF" +
  "RpbWVvdXQocmVzb2x2ZSwgNTAwMCkpOwogICAgICAgIAogICAgICAgIC8vIFN0ZXAgNTog" +
  "Q2xlYXIgZmlsdGVyCiAgICAgICAgYXdhaXQgdXBkYXRlUmFuZ2VTdGF0dXMoY3R4LCB3YW" +
  "l0TXNnLCAi8J+nuSBNZW1iZXJzaWhrYW4gZmlsdGVyIHNlYXJjaC4uLiIsIDYsIDEwKTsK" +
  "ICAgICAgICBhd2FpdCBjbGVhclNlYXJjaEZpbHRlcihwYWdlKTsKICAgICAgICBhd2FpdC" +
  "BuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpOwog" +
  "ICAgICAgIAogICAgICAgIC8vIFN0ZXAgNjogQ2FyaSB0YWJlbAogICAgICAgIGF3YWl0IH" +
  "VwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIvCflI0gTWVuY2FyaSB0YWJlbCBk" +
  "YXRhLi4uIiwgNywgMTApOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT" +
  "4gc2V0VGltZW91dChyZXNvbHZlLCA3MDAwKSk7CiAgICAgICAgCiAgICAgICAgbGV0IHRh" +
  "YmxlRm91bmQgPSBmYWxzZTsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgIC" +
  "Bhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcignI2NsaWVudHNtc2hpc3RvcnktdGFibGUn" +
  "LCB7IHRpbWVvdXQ6IDMwMDAwIH0pOwogICAgICAgICAgICB0YWJsZUZvdW5kID0gdHJ1ZT" +
  "sKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRhYmxlRm91bmQgPSBmYWxz" +
  "ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCF0YWJsZUZvdW5kKSB7CiAgIC" +
  "AgICAgICAgIHRocm93IG5ldyBFcnJvcigiVGFiZWwgdGlkYWsgZGl0ZW11a2FuLiBIYWxh" +
  "bWFuIG11bmdraW4gdGlkYWsgYmVyaGFzaWwgbG9hZC4iKTsKICAgICAgICB9CiAgICAgIC" +
  "AgCiAgICAgICAgLy8gU3RlcCA3OiBCYWNhIGhhbGFtYW4gMQogICAgICAgIGF3YWl0IHVw" +
  "ZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgIvCfk4ogTWVtYmFjYSBkYXRhIGRhcm" +
  "kgaGFsYW1hbiAxLi4uIiwgOCwgMTApOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJl" +
  "c29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA3MDAwKSk7CiAgICAgICAgCiAgICAgIC" +
  "AgbGV0IHBhZ2VSZXN1bHRzID0gYXdhaXQgZXh0cmFjdFRhYmxlRGF0YUZyb21QYWdlKHBh" +
  "Z2UpOwogICAgICAgIGFsbFJlc3VsdHMgPSBbLi4ucGFnZVJlc3VsdHNdOwogICAgICAgIA" +
  "ogICAgICAgIGlmIChhbGxSZXN1bHRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0" +
  "aHJvdyBuZXcgRXJyb3IoIlRpZGFrIGFkYSBkYXRhIHlhbmcgZGl0ZW11a2FuIHVudHVrIG" +
  "FuYWxpc2lzIHNlbXVhIHJhbmdlLiIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBh" +
  "d2FpdCB1cGRhdGVSYW5nZVN0YXR1cyhjdHgsIHdhaXRNc2csIGDinIUgSGFsYW1hbiAxOi" +
  "Ake2FsbFJlc3VsdHMubGVuZ3RofSBkYXRhIGRpdGVtdWthbmAsIDgsIDEwKTsKICAgICAg" +
  "ICAKICAgICAgICAvLyBTdGVwIDgtMTA6IEJhY2EgaGFsYW1hbiBiZXJpa3V0bnlhCiAgIC" +
  "AgICAgbGV0IHBhZ2VOdW1iZXIgPSAxOwogICAgICAgIGNvbnN0IG1heFBhZ2VzID0gNTsK" +
  "ICAgICAgICAKICAgICAgICB3aGlsZSAocGFnZU51bWJlciA8IG1heFBhZ2VzKSB7CiAgIC" +
  "AgICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgYOKPre+4" +
  "jyBNZW5jb2JhIGhhbGFtYW4gJHtwYWdlTnVtYmVyICsgMX0uLi5gLCA5LCAxMCk7CiAgIC" +
  "AgICAgICAgIAogICAgICAgICAgICBjb25zdCBoYXNOZXh0UGFnZSA9IGF3YWl0IGNoZWNr" +
  "QW5kQ2xpY2tOZXh0UGFnZShwYWdlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIC" +
  "ghaGFzTmV4dFBhZ2UpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3Rh" +
  "dHVzKGN0eCwgd2FpdE1zZywgYPCfj4EgVGlkYWsgYWRhIGhhbGFtYW4gbGFnaS5gLCAxMC" +
  "wgMTApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAg" +
  "ICAgCiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW" +
  "91dChyZXNvbHZlLCA4MDAwKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBwYWdlUmVz" +
  "dWx0cyA9IGF3YWl0IGV4dHJhY3RUYWJsZURhdGFGcm9tUGFnZShwYWdlKTsKICAgICAgIC" +
  "AgICAgCiAgICAgICAgICAgIGlmIChwYWdlUmVzdWx0cy5sZW5ndGggPT09IDApIHsKICAg" +
  "ICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVJhbmdlU3RhdHVzKGN0eCwgd2FpdE1zZywgYO" +
  "KPue+4jyBEYXRhIGtvc29uZyBkaSBoYWxhbWFuICR7cGFnZU51bWJlciArIDF9LmAsIDEw" +
  "LCAxMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIC" +
  "AgICAKICAgICAgICAgICAgY29uc3QgbmV3UmVzdWx0cyA9IFtdOwogICAgICAgICAgICBw" +
  "YWdlUmVzdWx0cy5mb3JFYWNoKG5ld0l0ZW0gPT4gewogICAgICAgICAgICAgICAgY29uc3" +
  "QgaXNEdXBsaWNhdGUgPSBhbGxSZXN1bHRzLnNvbWUoZXhpc3RpbmdJdGVtID0+IAogICAg" +
  "ICAgICAgICAgICAgICAgIGV4aXN0aW5nSXRlbS5SYW5nZSA9PT0gbmV3SXRlbS5SYW5nZS" +
  "AmJiAKICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0l0ZW0uVGVzdE51bWJlciA9PT0g" +
  "bmV3SXRlbS5UZXN0TnVtYmVyICYmCiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdJdG" +
  "VtLlNJRCA9PT0gbmV3SXRlbS5TSUQKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAg" +
  "ICAgICAKICAgICAgICAgICAgICAgIGlmICghaXNEdXBsaWNhdGUpIHsKICAgICAgICAgIC" +
  "AgICAgICAgICBuZXdSZXN1bHRzLnB1c2gobmV3SXRlbSk7CiAgICAgICAgICAgICAgICB9" +
  "CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKG5ld1Jlc3" +
  "VsdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVSYW5n" +
  "ZVN0YXR1cyhjdHgsIHdhaXRNc2csIGDij7nvuI8gVGlkYWsgYWRhIGRhdGEgYmFydSBkaS" +
  "BoYWxhbWFuICR7cGFnZU51bWJlciArIDF9LmAsIDEwLCAxMCk7CiAgICAgICAgICAgICAg" +
  "ICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgYWxsUm" +
  "VzdWx0cy5wdXNoKC4uLm5ld1Jlc3VsdHMpOwogICAgICAgICAgICBhd2FpdCB1cGRhdGVS" +
  "YW5nZVN0YXR1cyhjdHgsIHdhaXRNc2csIGDwn5OlIEhhbGFtYW4gJHtwYWdlTnVtYmVyIC" +
  "sgMX06ICske25ld1Jlc3VsdHMubGVuZ3RofSBkYXRhIGJhcnUsIFRvdGFsOiAke2FsbFJl" +
  "c3VsdHMubGVuZ3RofWAsIDEwLCAxMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBwYW" +
  "dlTnVtYmVyKys7CiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlz" +
  "ZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpOwogICAgICAgIH0KIC" +
  "AgICAgICAKICAgICAgICBhd2FpdCB1cGRhdGVSYW5nZVN0YXR1cyhjdHgsIHdhaXRNc2cs" +
  "IGDinIUgVG90YWwgJHthbGxSZXN1bHRzLmxlbmd0aH0gZGF0YSBkaXRlbXVrYW4gZGFyaS" +
  "Ake3BhZ2VOdW1iZXJ9IGhhbGFtYW5gLCAxMCwgMTApOwogICAgICAgIAogICAgICAgIGNv" +
  "bnN0IHJlc3VsdCA9IGFuYWx5emVSYW5nZURhdGEoYWxsUmVzdWx0cywgJ2FsbCcsICdhbG" +
  "wnKTsKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIAogICAgfSBj" +
  "YXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdbU1RBVFVTXSBSYW5nZS" +
  "BDaGVjayBBbGwgRXJyb3I6JywgZXJyb3IpOwogICAgICAgIHRocm93IGVycm9yOwogICAg" +
  "fSBmaW5hbGx5IHsKICAgICAgICBpZiAocGFnZSkgewogICAgICAgICAgICB0cnkgewogIC" +
  "AgICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWFyY2hGaWx0ZXIocGFnZSk7CiAgICAgICAg" +
  "ICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2" +
  "x2ZSwgMjAwMCkpOwogICAgICAgICAgICAgICAgYXdhaXQgcGFnZS5jbG9zZSgpOwogICAg" +
  "ICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1" +
  "NUQVRVU10gRXJyb3IgY2xvc2luZyBwYWdlOicsIGUubWVzc2FnZSk7CiAgICAgICAgICAg" +
  "IH0KICAgICAgICB9CiAgICB9Cn07Cgpjb25zdCBjbGVhclNlYXJjaEZpbHRlciA9IGFzeW" +
  "5jIChwYWdlKSA9PiB7CiAgICB0cnkgewogICAgICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUo" +
  "KCkgPT4gewogICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZX" +
  "J5U2VsZWN0b3IoJ2lucHV0W3R5cGU9InNlYXJjaCJdJyk7CiAgICAgICAgICAgIGlmIChz" +
  "ZWFyY2hJbnB1dCkgewogICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQudmFsdWUgPSAnJz" +
  "sKICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IFsnaW5wdXQnLCAna2V5dXAnLCAn" +
  "Y2hhbmdlJywgJ3NlYXJjaCddOwogICAgICAgICAgICAgICAgZXZlbnRzLmZvckVhY2goZX" +
  "YgPT4gc2VhcmNoSW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoZXYsIHsgYnViYmxl" +
  "czogdHJ1ZSB9KSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodHlwZW9mIC" +
  "QgIT09ICd1bmRlZmluZWQnICYmICQuZm4uZGF0YVRhYmxlKSB7CiAgICAgICAgICAgICAg" +
  "ICBjb25zdCB0YWJsZSA9ICQoJyNjbGllbnRzbXNoaXN0b3J5LXRhYmxlJykuRGF0YVRhYm" +
  "xlKCk7CiAgICAgICAgICAgICAgICBpZiAodGFibGUpIHsKICAgICAgICAgICAgICAgICAg" +
  "ICB0YWJsZS5zZWFyY2goJycpLmRyYXcoKTsKICAgICAgICAgICAgICAgICAgICB0YWJsZS" +
  "5wYWdlKDApLmRyYXcoJ3BhZ2UnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg" +
  "fQogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDQwMD" +
  "ApOwogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAg" +
  "ICAgcmV0dXJuIGZhbHNlOwogICAgfQp9OwoKY29uc3Qgc2VuZFJhbmdlUmVzdWx0RmlsZS" +
  "A9IGFzeW5jIChjdHgsIGRhdGEsIHNlcnZpY2UsIGNvdW50cnkpID0+IHsKICAgIHRyeSB7" +
  "CiAgICAgICAgY29uc3QgcmVwb3J0Q29udGVudCA9IGdlbmVyYXRlUmFuZ2VSZXBvcnQoZG" +
  "F0YSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS5n" +
  "ZXRUaW1lKCk7CiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgcmFuZ2VfJHtzZXJ2aWNlfV" +
  "8ke2NvdW50cnl9XyR7dGltZXN0YW1wfS50eHRgOwogICAgICAgIGNvbnN0IGZpbGVQYXRo" +
  "ID0gcGF0aC5qb2luKFRFTVBfRElSLCBmaWxlTmFtZSk7CiAgICAgICAgCiAgICAgICAgZn" +
  "Mud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgcmVwb3J0Q29udGVudCwgJ3V0ZjgnKTsKICAg" +
  "ICAgICAKICAgICAgICBjb25zdCBjYXB0aW9uID0gZ2VuZXJhdGVSZXN1bHRDYXB0aW9uKG" +
  "RhdGEsIHNlcnZpY2UsIGNvdW50cnkpOwogICAgICAgIAogICAgICAgIGF3YWl0IGN0eC5y" +
  "ZXBseVdpdGhEb2N1bWVudCgKICAgICAgICAgICAgeyBzb3VyY2U6IGZpbGVQYXRoLCBmaW" +
  "xlbmFtZTogZmlsZU5hbWUgfSwKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIGNh" +
  "cHRpb246IGNhcHRpb24sCiAgICAgICAgICAgICAgICBwYXJzZV9tb2RlOiAnSFRNTCcsCi" +
  "AgICAgICAgICAgICAgICByZXBseV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNz" +
  "YWdlX2lkCiAgICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIAogICAgICAgIGlmIC" +
  "hmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkgewogICAgICAgICAgICBmcy51bmxpbmtTeW5j" +
  "KGZpbGVQYXRoKTsKICAgICAgICB9CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJvcikgew" +
  "ogICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTVEFUVVNdIEVycm9yIHNlbmRpbmcgcmFuZ2Ug" +
  "cmVzdWx0IGZpbGU6JywgZXJyb3IpOwogICAgICAgIHRocm93IGVycm9yOwogICAgfQp9Ow" +
  "oKY29uc3Qgc2VhcmNoQ291bnRyeUluVGFibGUgPSBhc3luYyAocGFnZSwgY291bnRyeSkg" +
  "PT4gewogICAgdHJ5IHsKICAgICAgICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcignaW" +
  "5wdXRbdHlwZT0ic2VhcmNoIl0nLCB7IHRpbWVvdXQ6IDEwMDAwIH0pOwogICAgICAgIGF3" +
  "YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKHNlYXJjaENvdW50cnkpID0+IHsKICAgICAgIC" +
  "AgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1" +
  "dFt0eXBlPSJzZWFyY2giXScpOwogICAgICAgICAgICBpZiAoIXNlYXJjaElucHV0KSByZX" +
  "R1cm47CiAgICAgICAgICAgIHNlYXJjaElucHV0LmZvY3VzKCk7CiAgICAgICAgICAgIHNl" +
  "YXJjaElucHV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgIHNlYXJjaElucHV0LnZhbHVlID" +
  "0gc2VhcmNoQ291bnRyeTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGlucHV0" +
  "RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pOwogICAgIC" +
  "AgICAgICBzZWFyY2hJbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpOwogICAgICAg" +
  "ICAgICAKICAgICAgICAgICAgY29uc3Qga2V5dXBFdmVudCA9IG5ldyBFdmVudCgna2V5dX" +
  "AnLCB7IGJ1YmJsZXM6IHRydWUgfSk7CiAgICAgICAgICAgIHNlYXJjaElucHV0LmRpc3Bh" +
  "dGNoRXZlbnQoa2V5dXBFdmVudCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAodH" +
  "lwZW9mICQgIT09ICd1bmRlZmluZWQnICYmICQuZm4uZGF0YVRhYmxlKSB7CiAgICAgICAg" +
  "ICAgICAgICBjb25zdCB0YWJsZSA9ICQoJyNjbGllbnRzbXNoaXN0b3J5LXRhYmxlJykuRG" +
  "F0YVRhYmxlKCk7CiAgICAgICAgICAgICAgICBpZiAodGFibGUpIHsKICAgICAgICAgICAg" +
  "ICAgICAgICB0YWJsZS5zZWFyY2goc2VhcmNoQ291bnRyeSkuZHJhdygpOwogICAgICAgIC" +
  "AgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgY291bnRyeSk7CiAgICAgICAg" +
  "CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc2" +
  "9sdmUsIDQwMDApKTsKICAgICAgICAKICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9IGF3" +
  "YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4gewogICAgICAgICAgICBjb25zdCBpbnB1dCA9IG" +
  "RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9InNlYXJjaCJdJyk7CiAgICAg" +
  "ICAgICAgIHJldHVybiBpbnB1dCA/IGlucHV0LnZhbHVlIDogJyc7CiAgICAgICAgfSk7Ci" +
  "AgICAgICAgCiAgICAgICAgcmV0dXJuIHNlYXJjaFZhbHVlLnRvTG93ZXJDYXNlKCkuaW5j" +
  "bHVkZXMoY291bnRyeS50b0xvd2VyQ2FzZSgpKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7Ci" +
  "AgICAgICAgY29uc29sZS5lcnJvcignW1NUQVRVU10gU2VhcmNoIGNvdW50cnkgZXJyb3I6" +
  "JywgZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfTsKCmNvbnN0IGFuYW" +
  "x5emVSYW5nZURhdGEgPSAocmVzdWx0cywgc2VydmljZSwgY291bnRyeSkgPT4gewogICAg" +
  "Y29uc3QgZnJlcXVlbmN5TWFwID0ge307CiAgICAKICAgIHJlc3VsdHMuZm9yRWFjaChyb3" +
  "cgPT4gewogICAgICAgIGNvbnN0IGNsZWFuUmFuZ2UgPSByb3cuUmFuZ2U7CiAgICAgICAg" +
  "Y29uc3QgY2xlYW5TaWQgPSByb3cuU0lEOwogICAgICAgIAogICAgICAgIGlmICghY2xlYW" +
  "5SYW5nZSB8fCBjbGVhblJhbmdlLmxlbmd0aCA8IDMgfHwgIWNsZWFuU2lkKSByZXR1cm47" +
  "CiAgICAgICAgCiAgICAgICAgY29uc3Qga2V5ID0gYCR7Y2xlYW5SYW5nZX18JHtjbGVhbl" +
  "NpZH1gOwogICAgICAgIAogICAgICAgIGlmICghZnJlcXVlbmN5TWFwW2tleV0pIHsKICAg" +
  "ICAgICAgICAgZnJlcXVlbmN5TWFwW2tleV0gPSB7CiAgICAgICAgICAgICAgICByYW5nZT" +
  "ogY2xlYW5SYW5nZSwKICAgICAgICAgICAgICAgIHNpZDogY2xlYW5TaWQsCiAgICAgICAg" +
  "ICAgICAgICBjb3VudHJ5OiByb3cuQ291bnRyeSB8fCAnVU5LTk9XTicsCiAgICAgICAgIC" +
  "AgICAgICBjb3VudDogMCwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXQogICAgICAg" +
  "ICAgICB9OwogICAgICAgIH0KICAgICAgICBmcmVxdWVuY3lNYXBba2V5XS5jb3VudCArPS" +
  "AxOwogICAgICAgIAogICAgICAgIGlmIChmcmVxdWVuY3lNYXBba2V5XS5leGFtcGxlcy5s" +
  "ZW5ndGggPCAzICYmIHJvdy5UZXN0TnVtYmVyKSB7CiAgICAgICAgICAgIGNvbnN0IGNsZW" +
  "FuTnVtYmVyID0gcm93LlRlc3ROdW1iZXIucmVwbGFjZSgvW14wLTkrXS9nLCAnJyk7CiAg" +
  "ICAgICAgICAgIGlmIChjbGVhbk51bWJlciAmJiAhZnJlcXVlbmN5TWFwW2tleV0uZXhhbX" +
  "BsZXMuaW5jbHVkZXMoY2xlYW5OdW1iZXIpKSB7CiAgICAgICAgICAgICAgICBmcmVxdWVu" +
  "Y3lNYXBba2V5XS5leGFtcGxlcy5wdXNoKGNsZWFuTnVtYmVyKTsKICAgICAgICAgICAgfQ" +
  "ogICAgICAgIH0KICAgIH0pOwogICAgCiAgICBjb25zdCBzYW5nYXRCYWd1cyA9IFtdOwog" +
  "ICAgY29uc3QgYmFndXMgPSBbXTsKICAgIGNvbnN0IHNlZGFuZyA9IFtdOwogICAgY29uc3" +
  "QgcmVuZGFoID0gW107CiAgICAKICAgIE9iamVjdC52YWx1ZXMoZnJlcXVlbmN5TWFwKS5m" +
  "b3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmNvdW50ID49IDEwKSB7CiAgIC" +
  "AgICAgICAgIHNhbmdhdEJhZ3VzLnB1c2goaXRlbSk7CiAgICAgICAgfSBlbHNlIGlmIChp" +
  "dGVtLmNvdW50ID49IDUpIHsKICAgICAgICAgICAgYmFndXMucHVzaChpdGVtKTsKICAgIC" +
  "AgICB9IGVsc2UgaWYgKGl0ZW0uY291bnQgPj0gMikgewogICAgICAgICAgICBzZWRhbmcu" +
  "cHVzaChpdGVtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZW5kYWgucHVzaC" +
  "hpdGVtKTsKICAgICAgICB9CiAgICB9KTsKICAgIAogICAgc2FuZ2F0QmFndXMuc29ydCgo" +
  "YSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpOwogICAgYmFndXMuc29ydCgoYSwgYikgPT" +
  "4gYi5jb3VudCAtIGEuY291bnQpOwogICAgc2VkYW5nLnNvcnQoKGEsIGIpID0+IGIuY291" +
  "bnQgLSBhLmNvdW50KTsKICAgIHJlbmRhaC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS" +
  "5jb3VudCk7CiAgICAKICAgIHJldHVybiB7CiAgICAgICAgc2FuZ2F0QmFndXMsCiAgICAg" +
  "ICAgYmFndXMsCiAgICAgICAgc2VkYW5nLAogICAgICAgIHJlbmRhaCwKICAgICAgICB0b3" +
  "RhbERhdGE6IHJlc3VsdHMubGVuZ3RoLAogICAgICAgIHNlcnZpY2UsCiAgICAgICAgY291" +
  "bnRyeSwKICAgICAgICBmcmVxdWVuY3lNYXAKICAgIH07Cn07Cgpjb25zdCBnZW5lcmF0ZV" +
  "Jlc3VsdENhcHRpb24gPSAoZGF0YSwgc2VydmljZSwgY291bnRyeSkgPT4gewogICAgY29u" +
  "c3QgeyBzYW5nYXRCYWd1cywgYmFndXMsIHNlZGFuZywgcmVuZGFoLCB0b3RhbERhdGEgfS" +
  "A9IGRhdGE7CiAgICAKICAgIGxldCBjYXB0aW9uID0gJyc7CiAgICAKICAgIGlmIChzZXJ2" +
  "aWNlID09PSAnYWxsJyAmJiBjb3VudHJ5ID09PSAnYWxsJykgewogICAgICAgIGNhcHRpb2" +
  "4gKz0gYDxibG9ja3F1b3RlPjxiPvCfk4sgSEFTSUwgQ0VLIFNFTVVBIFJBTkdFPC9iPjwv" +
  "YmxvY2txdW90ZT5cblxuYDsKICAgIH0gZWxzZSB7CiAgICAgICAgY2FwdGlvbiArPSBgPG" +
  "Jsb2NrcXVvdGU+PGI+8J+TiyBIQVNJTCBDRUsgUkFOR0UgJHtzZXJ2aWNlLnRvVXBwZXJD" +
  "YXNlKCl9ICR7Y291bnRyeS50b1VwcGVyQ2FzZSgpfTwvYj48L2Jsb2NrcXVvdGU+XG5cbm" +
  "A7CiAgICB9CiAgICAKICAgIGNhcHRpb24gKz0gYPCfk4ogVG90YWwgOiAke3RvdGFsRGF0" +
  "YX1cbmA7CiAgICBjYXB0aW9uICs9IGDinIUgUmF0aW5nIDpcbmA7CiAgICBjYXB0aW9uIC" +
  "s9IGDilJTilIDwn5+iU2FuZ2F0IGJhZ3VzIDogJHtzYW5nYXRCYWd1cy5sZW5ndGh9XG5g" +
  "OwogICAgY2FwdGlvbiArPSBgICAg4pSU4pSA8J+foUJhZ3VzIDogJHtiYWd1cy5sZW5ndG" +
  "h9XG5gOwogICAgY2FwdGlvbiArPSBgICAgICAg4pSU4pSA8J+foFNlZGFuZyA6ICR7c2Vk" +
  "YW5nLmxlbmd0aH1cbmA7CiAgICBjYXB0aW9uICs9IGAgICAgICAgICDilJTilIDwn5S0Um" +
  "VuZGFoIDogJHtyZW5kYWgubGVuZ3RofVxuXG5gOwogICAgCiAgICBjYXB0aW9uICs9IGDw" +
  "n5OBIEZpbGUgYmVyaGFzaWwgZGlidWF0LlxuYDsKICAgIGNhcHRpb24gKz0gYDxibG9ja3" +
  "F1b3RlPkNyZWF0ZWQgQnkgQEthbmdEYXlaPC9ibG9ja3F1b3RlPmA7CiAgICAKICAgIHJl" +
  "dHVybiBjYXB0aW9uOwp9OwoKY29uc3QgZ2VuZXJhdGVSYW5nZVJlcG9ydCA9IChkYXRhKS" +
  "A9PiB7CiAgICBjb25zdCB7IHNhbmdhdEJhZ3VzLCBiYWd1cywgc2VkYW5nLCByZW5kYWgs" +
  "IHNlcnZpY2UsIGNvdW50cnksIHRvdGFsRGF0YSB9ID0gZGF0YTsKICAgIAogICAgbGV0IG" +
  "NvbnRlbnQgPSAnJzsKICAgIAogICAgaWYgKHNlcnZpY2UgPT09ICdhbGwnICYmIGNvdW50" +
  "cnkgPT09ICdhbGwnKSB7CiAgICAgICAgY29udGVudCArPSBg8J+TiyBIQVNJTCBDRUsgU0" +
  "VNVUEgUkFOR0VcblxuYDsKICAgIH0gZWxzZSB7CiAgICAgICAgY29udGVudCArPSBg8J+T" +
  "iyBIQVNJTCBDRUsgUkFOR0UgJHtzZXJ2aWNlLnRvVXBwZXJDYXNlKCl9ICR7Y291bnRyeS" +
  "50b1VwcGVyQ2FzZSgpfVxuXG5gOwogICAgfQogICAgCiAgICBjb250ZW50ICs9IGDwn5OK" +
  "IFRvdGFsIERhdGE6ICR7dG90YWxEYXRhfVxuYDsKICAgIGNvbnRlbnQgKz0gYPCfk4ggRG" +
  "F0YSBVbmlrOiAke3NhbmdhdEJhZ3VzLmxlbmd0aCArIGJhZ3VzLmxlbmd0aCArIHNlZGFu" +
  "Zy5sZW5ndGggKyByZW5kYWgubGVuZ3RofVxuXG5gOwogICAgCiAgICBjb250ZW50ICs9IG" +
  "DinIUgUmF0aW5nIDpcbmA7CiAgICBjb250ZW50ICs9IGDilJTilIDwn5+iIFNhbmdhdCBC" +
  "YWd1cyA6ICR7c2FuZ2F0QmFndXMubGVuZ3RofVxuYDsKICAgIGNvbnRlbnQgKz0gYCAgIO" +
  "KUlOKUgPCfn6EgQmFndXMgOiAke2JhZ3VzLmxlbmd0aH1cbmA7CiAgICBjb250ZW50ICs9" +
  "IGAgICAgICDilJTilIDwn5+gIFNlZGFuZyA6ICR7c2VkYW5nLmxlbmd0aH1cbmA7CiAgIC" +
  "Bjb250ZW50ICs9IGAgICAgICAgICDilJTilIDwn5S0IFJlbmRhaCA6ICR7cmVuZGFoLmxl" +
  "bmd0aH1cblxuYDsKICAgIAogICAgaWYgKHNhbmdhdEJhZ3VzLmxlbmd0aCA+IDApIHsKIC" +
  "AgICAgICBjb250ZW50ICs9IGBSQVRJTkcgU0FOR0FUIEJBR1VTXG5gOwogICAgICAgIGNv" +
  "bnRlbnQgKz0gYOKUlOKUgPCfjJBcbmA7CiAgICAgICAgc2FuZ2F0QmFndXMuZm9yRWFjaC" +
  "hpdGVtID0+IHsKICAgICAgICAgICAgY29uc3QgZmxhZyA9IGdldENvdW50cnlGbGFnKGl0" +
  "ZW0uY291bnRyeSk7CiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgIOKUlOKUgCAke2ZsYW" +
  "d9ICR7aXRlbS5yYW5nZX0gKCR7aXRlbS5zaWR9KVxuYDsKICAgICAgICB9KTsKICAgICAg" +
  "ICBjb250ZW50ICs9IGBcbmA7CiAgICB9CiAgICAKICAgIGlmIChiYWd1cy5sZW5ndGggPi" +
  "AwKSB7CiAgICAgICAgY29udGVudCArPSBgUkFUSU5HIEJBR1VTXG5gOwogICAgICAgIGNv" +
  "bnRlbnQgKz0gYOKUlOKUgPCfjJBcbmA7CiAgICAgICAgYmFndXMuZm9yRWFjaChpdGVtID" +
  "0+IHsKICAgICAgICAgICAgY29uc3QgZmxhZyA9IGdldENvdW50cnlGbGFnKGl0ZW0uY291" +
  "bnRyeSk7CiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgIOKUlOKUgCAke2ZsYWd9ICR7aX" +
  "RlbS5yYW5nZX0gKCR7aXRlbS5zaWR9KVxuYDsKICAgICAgICB9KTsKICAgICAgICBjb250" +
  "ZW50ICs9IGBcbmA7CiAgICB9CiAgICAKICAgIGlmIChzZWRhbmcubGVuZ3RoID4gMCkgew" +
  "ogICAgICAgIGNvbnRlbnQgKz0gYFJBVElORyBTRURBTkdcbmA7CiAgICAgICAgY29udGVu" +
  "dCArPSBg4pSU4pSA8J+MkFxuYDsKICAgICAgICBzZWRhbmcuZm9yRWFjaChpdGVtID0+IH" +
  "sKICAgICAgICAgICAgY29uc3QgZmxhZyA9IGdldENvdW50cnlGbGFnKGl0ZW0uY291bnRy" +
  "eSk7CiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgIOKUlOKUgCAke2ZsYWd9ICR7aXRlbS" +
  "5yYW5nZX0gKCR7aXRlbS5zaWR9KVxuYDsKICAgICAgICB9KTsKICAgICAgICBjb250ZW50" +
  "ICs9IGBcbmA7CiAgICB9CiAgICAKICAgIGlmIChyZW5kYWgubGVuZ3RoID4gMCkgewogIC" +
  "AgICAgIGNvbnRlbnQgKz0gYFJBVElORyBSRU5EQUhcbmA7CiAgICAgICAgY29udGVudCAr" +
  "PSBg4pSU4pSA8J+MkFxuYDsKICAgICAgICByZW5kYWguZm9yRWFjaChpdGVtID0+IHsKIC" +
  "AgICAgICAgICAgY29uc3QgZmxhZyA9IGdldENvdW50cnlGbGFnKGl0ZW0uY291bnRyeSk7" +
  "CiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgIOKUlOKUgCAke2ZsYWd9ICR7aXRlbS5yYW" +
  "5nZX0gKCR7aXRlbS5zaWR9KVxuYDsKICAgICAgICB9KTsKICAgICAgICBjb250ZW50ICs9" +
  "IGBcbmA7CiAgICB9CiAgICAKICAgIGNvbnRlbnQgKz0gYFxuQ3JlYXRlZCBCeSBAS2FuZ0" +
  "RheVpcbmA7CiAgICBjb250ZW50ICs9IGBHZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0xv" +
  "Y2FsZVN0cmluZygnaWQtSUQnKX1cbmA7CiAgICAKICAgIHJldHVybiBjb250ZW50Owp9Ow" +
  "oKYm90LmNvbW1hbmQoJ2Nla3JhbmdlJywgb3duZXJPbmx5LCBhc3luYyAoY3R4KSA9PiB7" +
  "CiAgICBjb25zdCBhcmdzID0gY3R4Lm1lc3NhZ2UudGV4dC5zcGxpdCgvXHMrLykuc2xpY2" +
  "UoMSk7CiAgICBjb25zdCBpbnB1dCA9IGFyZ3Muam9pbignICcpLnRyaW0oKTsKICAgIGlm" +
  "ICghaW5wdXQpIHsKICAgICAgICByZXR1cm4gY3R4LnJlcGx5V2l0aEhUTUwoYDxwcmU+4p" +
  "qg77iPIENhcmEgcGVuZ2d1bmFhbjpcbi9jZWtyYW5nZSBzZXJ2aWNlLGNvdW50cnlcbi9j" +
  "ZWtyYW5nZSB3aGF0c2FwcCxhbGxcbi9jZWtyYW5nZSBhbGwsaW5kb25lc2lhPC9wcmU+YC" +
  "wgeyByZXBseV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNzYWdlX2lkIH0pOwog" +
  "ICAgfQogICAgY29uc3QgcGFydHMgPSBpbnB1dC5zcGxpdCgnLCcpOwogICAgaWYgKHBhcn" +
  "RzLmxlbmd0aCAhPT0gMikgewogICAgICAgIHJldHVybiBjdHgucmVwbHlXaXRoSFRNTChg" +
  "PHByZT7imqDvuI8gRm9ybWF0IHNhbGFoXG5HdW5ha2FuIDogL2Nla3JhbmdlIHNlcnZpY2" +
  "UsY291bnRyeTwvcHJlPmAsIHsgcmVwbHlfdG9fbWVzc2FnZV9pZDogY3R4Lm1lc3NhZ2Uu" +
  "bWVzc2FnZV9pZCB9KTsKICAgIH0KICAgIAogICAgbGV0IHNlcnZpY2UgPSBwYXJ0c1swXS" +
  "50cmltKCk7CiAgICBsZXQgY291bnRyeSA9IHBhcnRzWzFdLnRyaW0oKS50b0xvd2VyQ2Fz" +
  "ZSgpOwogICAgCiAgICBjb25zdCBzZXJ2aWNlTWFwID0gewogICAgICAgIHdoYXRzYXBwOi" +
  "AnV2hhdHNBcHAnLAogICAgICAgIGZhY2Vib29rOiAnZmFjZWJvb2snLAogICAgICAgIEFw" +
  "cGxlOiAnYXBwbGUnLAogICAgICAgIEdtYWlsOiAnZ21haWwnLAogICAgICAgIHRpa3Rvaz" +
  "ogJ3Rpa3RvaycsCiAgICAgICAgYWxsOiAnYWxsJywKICAgICAgICBTYW1zdW5nOiAnc2Ft" +
  "c3VuZycsCiAgICAgICAgdGVtdTogJ3RlbXUnLAogICAgICAgIFZpYmVyOiAndmliZXInLA" +
  "ogICAgICAgIHRpa3Rva2FkczogJ3Rpa3Rva2FkcycsCiAgICAgICAgYW1leDogJ2FtZXgn" +
  "LAogICAgICAgIGF1dG1zZzogJ0FVVEhNU0cnLAogICAgICAgIG54Y29tbTogJ254Y29tbS" +
  "csCiAgICAgICAgdGVsZWdyYW06ICdUZWxlZ3JhbScsCiAgICAgICAgc21zOiAnc21zJywK" +
  "ICAgICAgICBQYXlwYWw6ICdwYXlwYWwnLAogICAgICAgIHFzbXM6ICdRc21zJywKICAgIC" +
  "AgICBVYmVyOiAndWJlcicsCiAgICAgICAgTWljcm9zb2Z0OiAnbWljcm9zb2Z0JywKICAg" +
  "IH07CiAgICAKICAgIGNvbnN0IGtleSA9IHNlcnZpY2UudG9Mb3dlckNhc2UoKTsKICAgIH" +
  "NlcnZpY2UgPSBzZXJ2aWNlTWFwW2tleV0gfHwgc2VydmljZTsKCiAgICBjb25zdCB3YWl0" +
  "TXNnID0gYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwoJzxibG9ja3F1b3RlPuKPsyA8Yj5TZW" +
  "RhbmcgTWVuZ2FuYWxpc2lzIFJhbmdlPC9iPjwvYmxvY2txdW90ZT5cblxuW+KWkeKWkeKW" +
  "keKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkV" +
  "0gMCVcblxu8J+UhCBNZW11bGFpIHByb3Nlcy4uLlxuXG7wn5WQIDxpPkxhc3QgdXBkYXRl" +
  "IDogJyArIG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdpZC1JRCcpICsgJzwvaT" +
  "4nLCAKICAgICAgICB7IHJlcGx5X3RvX21lc3NhZ2VfaWQ6IGN0eC5tZXNzYWdlLm1lc3Nh" +
  "Z2VfaWQgfSk7CgogICAgdHJ5IHsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkb3" +
  "dubG9hZEFuZEFuYWx5emVSYW5nZURhdGEoc2VydmljZSwgY291bnRyeSwgY3R4LCB3YWl0" +
  "TXNnKTsKCiAgICAgICAgYXdhaXQgc2VuZFJhbmdlUmVzdWx0RmlsZShjdHgsIHJlc3VsdC" +
  "wgc2VydmljZSwgY291bnRyeSk7CgogICAgICAgIHRyeSB7IAogICAgICAgICAgICBhd2Fp" +
  "dCBjdHgudGVsZWdyYW0uZGVsZXRlTWVzc2FnZShjdHguY2hhdC5pZCwgd2FpdE1zZy5tZX" +
  "NzYWdlX2lkKTsgCiAgICAgICAgfSBjYXRjaChlcnIpIHt9CgogICAgfSBjYXRjaCAoZXJy" +
  "b3IpIHsKICAgICAgICBhd2FpdCBoYW5kbGVSYW5nZUVycm9yKGN0eCwgd2FpdE1zZywgZX" +
  "Jyb3IpOwogICAgfQp9KTsKCmJvdC5jb21tYW5kKCdjZWtyYW5nZWFsbCcsIG93bmVyT25s" +
  "eSwgYXN5bmMgKGN0eCkgPT4gewogICAgY29uc3Qgd2FpdE1zZyA9IGF3YWl0IGN0eC5yZX" +
  "BseVdpdGhIVE1MKCc8YmxvY2txdW90ZT7ij7MgPGI+U2VkYW5nIE1lbmdhbmFsaXNpcyBS" +
  "YW5nZTwvYj48L2Jsb2NrcXVvdGU+XG5cblvilpHilpHilpHilpHilpHilpHilpHilpHilp" +
  "HilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpFdIDAlXG5cbvCflIQgTWVtdWxh" +
  "aSBwcm9zZXMuLi5cblxu8J+VkCA8aT5MYXN0IHVwZGF0ZSA6ICcgKyBuZXcgRGF0ZSgpLn" +
  "RvTG9jYWxlVGltZVN0cmluZygnaWQtSUQnKSArICc8L2k+JywKICAgICAgICB7IHJlcGx5" +
  "X3RvX21lc3NhZ2VfaWQ6IGN0eC5tZXNzYWdlLm1lc3NhZ2VfaWQgfSk7CiAgICAKICAgIH" +
  "RyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZG93bmxvYWRBbmRBbmFseXpl" +
  "QWxsUmFuZ2VEYXRhKGN0eCwgd2FpdE1zZyk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgc2" +
  "VuZFJhbmdlUmVzdWx0RmlsZShjdHgsIHJlc3VsdCwgJ2FsbCcsICdhbGwnKTsKICAgICAg" +
  "ICAKICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZGVsZXRlTWVzc2FnZShjdHguY2hhdC" +
  "5pZCwgd2FpdE1zZy5tZXNzYWdlX2lkKS5jYXRjaCgoKSA9PiB7fSk7CiAgICAgICAgCiAg" +
  "ICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGF3YWl0IGhhbmRsZVJhbmdlRXJyb3IoY3" +
  "R4LCB3YWl0TXNnLCBlcnJvcik7CiAgICB9Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PT09PT09PT09IC8vCi8vID09PT09PT09PT0gU1RBVFVTIFNZU1RFTSA9PT" +
  "09PT09PT09PSAvLwovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g" +
  "Ly8KCmNvbnN0IGdldEZvcm1hdHRlZFN0YXR1cyA9ICgpID0+IHsKICAgIGNvbnN0IGNmU3" +
  "RhdHVzID0gc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1ZBTFVFICYmIHNldHRpbmdzLkNGX0NM" +
  "RUFSQU5DRV9WQUxVRS5sZW5ndGggPiA1ID8gIuKchSBSZWFkeSIgOiAi4p2MIE1pc3Npbm" +
  "ciOwogICAgY29uc3Qgc2Vzc2lvblN0YXR1cyA9IHNldHRpbmdzLklWQVNfU0VTU0lPTl9W" +
  "QUxVRSAmJiBzZXR0aW5ncy5JVkFTX1NFU1NJT05fVkFMVUUubGVuZ3RoID4gNSA/ICLinI" +
  "UgUmVhZHkiIDogIuKdjCBNaXNzaW5nIjsKICAgIGNvbnN0IHhzcmZTdGF0dXMgPSBzZXR0" +
  "aW5ncy5YU1JGX1RPS0VOX1ZBTFVFICYmIHNldHRpbmdzLlhTUkZfVE9LRU5fVkFMVUUubG" +
  "VuZ3RoID4gNSA/ICLinIUgUmVhZHkiIDogIuKdjCBNaXNzaW5nIjsKICAgIGNvbnN0IHVh" +
  "U3RhdHVzID0gc2V0dGluZ3MuQ1VSUkVOVF9VU0VSX0FHRU5UICYmIHNldHRpbmdzLkNVUl" +
  "JFTlRfVVNFUl9BR0VOVC5sZW5ndGggPiAyMCA/ICLinIUgUmVhZHkiIDogIuKdjCBNaXNz" +
  "aW5nIjsKICAgIGNvbnN0IHBvbGxpbmdJbmZvID0gaXNQb2xsaW5nQWN0aXZlID8gYOKchS" +
  "BBY3RpdmVgIDogYOKdjCBJbmFjdGl2ZWA7CiAgICBjb25zdCBicm93c2VySW5mbyA9IGlz" +
  "QnJvd3NlclJlYWR5ID8gYOKchSBSZWFkeWAgOiBg4p2MIEVycm9yYDsKCiAgICByZXR1cm" +
  "4gYApMQVNUIENIRUNLIDogJHtsYXN0Q2hlY2tUaW1lfQpTVEFUVVMgOiAke2JvdFN0YXR1" +
  "c30KQlJPV1NFUiA6ICR7YnJvd3NlckluZm99CmAudHJpbSgpOwp9OwoKY29uc3QgdXBkYX" +
  "RlU3RhdHVzTWVzc2FnZSA9IGFzeW5jIChjdHgsIGluaXRpYWxNZXNzYWdlID0gbnVsbCwg" +
  "bWVzc2FnZUlkVG9FZGl0ID0gbnVsbCkgPT4gewogICAgY29uc3QgbWVzc2FnZSA9IGdldE" +
  "Zvcm1hdHRlZFN0YXR1cygpOwoKICAgIGNvbnN0IGtleWJvYXJkID0gTWFya3VwLmlubGlu" +
  "ZUtleWJvYXJkKFsKICAgICAgICBbTWFya3VwLmJ1dHRvbi5jYWxsYmFjaygn8J+UhCBSZW" +
  "ZyZXNoIFN0YXR1cycsICdjaGVja19zdGF0dXNfcmVmcmVzaCcpXQogICAgXSk7CgogICAg" +
  "Y29uc3QgZmluYWxNZXNzYWdlID0gaW5pdGlhbE1lc3NhZ2UgPyBgJHtpbml0aWFsTWVzc2" +
  "FnZX1cblxuJHttZXNzYWdlfWAgOiBtZXNzYWdlOwoKICAgIHJldHVybiBlZGl0T3JSZXBs" +
  "eUhUTUwoY3R4LCBmaW5hbE1lc3NhZ2UsIGtleWJvYXJkLCBtZXNzYWdlSWRUb0VkaXQpOw" +
  "p9OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCi8vID09" +
  "PT09PT09PT0gTUVOVSBTWVNURU0gPT09PT09PT09PT09PSAvLwovLyA9PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCmNvbnN0IHNlbmRNYWluTWVudSA9IGFz" +
  "eW5jIChjdHgsIG1lc3NhZ2VJZCA9IG51bGwpID0+IHsKICAgIGNvbnN0IGNvbm5lY3Rpb2" +
  "5TdGF0dXMgPSBpc0Nvbm5lY3Rpb25TdGFibGUgPyAn4pyFIENvbm5lY3RlZCcgOiAn4pqg" +
  "77iPIERpc2Nvbm5lY3RlZCc7CiAgICBjb25zdCBwb2xsaW5nU3RhdHVzID0gaXNQb2xsaW" +
  "5nQWN0aXZlID8gJ+KchSBBY3RpdmUnIDogJ+KdjCBJbmFjdGl2ZSc7CiAgICAKICAgIGNv" +
  "bnN0IG1lc3NhZ2UgPSBgPGJsb2NrcXVvdGU+5oOF4qq8IOqqtiDjgYIg6quC4punIPCdmY" +
  "bMuPCdmZ7NovCdmaHNnvCdmaHNovCdmarNnvCdmZbNoiDDlyDwnZmEzLjwnZmrzZ7wnZmW" +
  "zaLwnZmozZ7wnZmizaLwnZmoIPCdmL3MuPCdmaTNnvCdmanMuPCdmZXNniDim6c8L2Jsb2" +
  "NrcXVvdGU+Cigg8J+RpCApIC0g5oOF5aCxIPCdl6LwnZe58J2XrvCdl64sCvCdl57wnZe2" +
  "8J2XufCdl7nwnZiC8J2XrvCdl6sg4pSAIPCdl6fwnZey8J2XufCdl7LwnZe08J2Xv/Cdl6" +
  "7wnZe6IOODnOODg+ODiOOBr+OAgemAn+OBj+aflOi7n+OBp+WuieWFqOOBp+yekOuPme2Z" +
  "lOODhOODvOODq+OAguODh+OCuOOCv+ODq+OCv+OCueOCr+OCkiwg64KY66W8IOyngOybkO" +
  "2VmOyLreyLnOyYpCEuLi4KCuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKU" +
  "geKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQo8YmxvY2txdW90ZT48Yj7ijJ4g8J2QhfCdkK" +
  "hyIPCdkJjwnZCodfCdkKsg8J2QiPCdkKfwnZCf8J2QqHLwnZCm8J2QmvCdkK3wnZCi8J2Q" +
  "qPCdkKfijJ08L2I+PC9ibG9ja3F1b3RlPgrwlqCCIOG0hMqA4bSH4bSA4bSb4bSPyoAgOi" +
  "BAS2FuZ0RheVoK8JaggiDhtKDhtIfKgHPJqiA6IOG0oDIuMC4wMQrwlqCCIOG0m8qP4bSY" +
  "4bSHIDogSmF2YXNjcmlwdCBOb2RlanMK4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxiPjxibG9ja3F1b3RlPvCfk4og" +
  "Q3VycmVudCBTdGF0dXM6PC9ibG9ja3F1b3RlPjwvYj4KQ29ubmVjdGlvbjogJHtjb25uZW" +
  "N0aW9uU3RhdHVzfQpTTVMgUG9sbGluZzogJHtwb2xsaW5nU3RhdHVzfQpVc2VyOiAke3Nl" +
  "dHRpbmdzLklWQVNfVVNFUk5BTUUgfHwgJ05vdCBzZXQnfQrilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEKCuKYkCDip70g" +
  "L2xvZ2luCuKYkCDip70gL3VzZXJhZ2VudAoK4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxibG9ja3F1b3RlPlNpbGFr" +
  "YW4gcGlsaWggbWVudSBkaSBiYXdhaCBpbmk8L2Jsb2NrcXVvdGU+YDsKCiAgICBjb25zdC" +
  "BrZXlib2FyZCA9IE1hcmt1cC5pbmxpbmVLZXlib2FyZChbCiAgICAgICAgWwogICAgICAg" +
  "ICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5OKIFN0YXR1cycsICdzaG93X3N0YX" +
  "R1c19wYW5lbCcpLAogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5SR" +
  "IExvZ2luJywgJ3Nob3dfbG9naW5fcGFuZWwnKQogICAgICAgIF0sCiAgICAgICAgWwogIC" +
  "AgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfimpnvuI8gU2V0dGluZ3MnLCAn" +
  "c2hvd19zZXR0aW5ncycpLAogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKC" +
  "fwn5SEIFJlZnJlc2gnLCAncmVmcmVzaF9tYWluJykKICAgICAgICBdCiAgICBdKTsKICAg" +
  "IAogICAgcmV0dXJuIGVkaXRPclJlcGx5SFRNTChjdHgsIG1lc3NhZ2UsIGtleWJvYXJkLC" +
  "BtZXNzYWdlSWQpOwp9OwoKY29uc3Qgc2VuZFNldHRpbmdzTWVudSA9IGFzeW5jIChjdHgp" +
  "ID0+IHsKICAgIGNvbnN0IHBvbGxpbmdJbmZvID0gaXNQb2xsaW5nQWN0aXZlID8gYOKchS" +
  "BBY3RpdmVgIDogYOKdjCBJbmFjdGl2ZWA7CiAgICBjb25zdCBicm93c2VySW5mbyA9IGlz" +
  "QnJvd3NlclJlYWR5ID8gYOKchSBSZWFkeWAgOiBg4p2MIEVycm9yYDsKICAgIGNvbnN0IG" +
  "1lc3NhZ2VJZCA9IGN0eC5jYWxsYmFja1F1ZXJ5Lm1lc3NhZ2UubWVzc2FnZV9pZDsKICAg" +
  "IAogICAgY29uc3QgbWVzc2FnZSA9IGA8YmxvY2txdW90ZT7mg4Xiqrwg6qq2IOOBgiDqq4" +
  "Lim6cg8J2Zhsy48J2Zns2i8J2Zoc2e8J2Zoc2i8J2Zqs2e8J2Zls2iIMOXIPCdmYTMuPCd" +
  "mavNnvCdmZbNovCdmajNnvCdmaLNovCdmagg8J2Yvcy48J2ZpM2e8J2Zqcy48J2Zlc2eIO" +
  "KbpzwvYmxvY2txdW90ZT4KKCDwn5GkICkgLSDmg4XloLEg8J2XovCdl7nwnZeu8J2XriwK" +
  "8J2XnvCdl7bwnZe58J2XufCdmILwnZeu8J2XqyDilIAg8J2Xp/Cdl7LwnZe58J2XsvCdl7" +
  "TwnZe/8J2XrvCdl7og44Oc44OD44OI44Gv44CB6YCf44GP5p+UZmxleGlibGXjgaflronl" +
  "hajjgaroh6rli5XljJbjg4Tjg7zjg6vjgILjg4fjgrjjgr/jg6vjgr/jgrnjgq/jgpIsIO" +
  "uCmOulvCDsp4Dsm5DtlZjsi63si5zsmKQhLi4uCgrilIHilIHilIHilIHilIHilIHilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEKPGJsb2NrcXVvdGU+5L" +
  "mCIPCdl6bwnZeY8J2Xp/Cdl6fwnZec8J2XofCdl5rwnZemIPCdl6DwnZeY8J2XofCdl6gg" +
  "5LmCPC9ibG9ja3F1b3RlPgrimJAg4qe9IC9jZWtyYW5nZQrimJAg4qe9IC9jZWtyYW5nZW" +
  "FsbArimJAg4qe9IC9leHBvcnRudW0K4piQIOKnvSAvc3RhdHVzCuKYkCDip70gL2N2CuKY" +
  "kCDip70gL2xvZ2luCuKYkCDip70gL3VzZXJhZ2VudArimJAg4qe9IC9hZGRncm91cArimJ" +
  "Ag4qe9IC9saXN0Z3JvdXAK4piQIOKnvSAvZGVsZ3JvdXAK4piQIOKnvSAvc2V0b3duZXJs" +
  "aW5rCuKYkCDip70gL3NldGNobnVtYmVyCuKYkCDip70gL3NldGNoYW5uZWwK4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "LgoKPGJsb2NrcXVvdGU+PGI+REVWIDogQEthbmdEYXlaPC9iPjwvYmxvY2txdW90ZT5gOy" +
  "AKCiAgICBjb25zdCBrZXlib2FyZCA9IE1hcmt1cC5pbmxpbmVLZXlib2FyZChbCiAgICAg" +
  "ICAgWwogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5SZIEJhY2snLC" +
  "AnbWFpbl9tZW51JykKICAgICAgICBdCiAgICBdKTsKCiAgICByZXR1cm4gZWRpdE9yUmVw" +
  "bHlIVE1MKGN0eCwgbWVzc2FnZSwga2V5Ym9hcmQsIG1lc3NhZ2VJZCk7Cn07Cgpjb25zdC" +
  "BzZW5kU3RhdHVzUGFuZWxNZW51ID0gYXN5bmMgKGN0eCkgPT4gewogICAgY29uc3QgbWVz" +
  "c2FnZUlkID0gY3R4LmNhbGxiYWNrUXVlcnkubWVzc2FnZS5tZXNzYWdlX2lkOwogICAgY2" +
  "9uc3QgcG9sbGluZ0luZm8gPSBpc1BvbGxpbmdBY3RpdmUgPyBg4pyFIEFjdGl2ZWAgOiBg" +
  "4p2MIEluYWN0aXZlYDsKICAgIGNvbnN0IGJyb3dzZXJJbmZvID0gaXNCcm93c2VyUmVhZH" +
  "kgPyBg4pyFIFJlYWR5YCA6IGDinYwgRXJyb3JgOwoKICAgIGNvbnN0IG1lc3NhZ2UgPSBg" +
  "PGJsb2NrcXVvdGU+5oOF4qq8IOqqtiDjgYIg6quC4punIPCdmYbMuPCdmZ7NovCdmaHNnv" +
  "CdmaHNovCdmarNnvCdmZbNoiDDlyDwnZmEzLjwnZmrzZ7wnZmWzaLwnZmozZ7wnZmizaLw" +
  "nZmoIPCdmL3MuPCdmaTNnvCdmanMuPCdmZXNniDim6c8L2Jsb2NrcXVvdGU+Cigg8J+RpC" +
  "ApIC0g5oOF5aCxIPCdl6LwnZe58J2XrvCdl64sCvCdl57wnZe28J2XufCdl7nwnZiC8J2X" +
  "rvCdl6sg4pSAIPCdl6fwnZey8J2XufCdl7LwnZe08J2Xv/Cdl67wnZe6IOODnOODg+ODiO" +
  "OBr+OAgemAn+OBj+aflGZsZXhpYmxl44Gn5a6J5YWo44Gq6Ieq5YuV5YyW44OE44O844Or" +
  "44CC44OH44K444K/44Or44K/44K544Kv44KSLCDrgpjrpbwg7KeA7JuQ7ZWY7Iut7Iuc7J" +
  "ikIS4uLgoK4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSBCjxibG9ja3F1b3RlPjxiPvCdl5XwnZei8J2XpyDwnZem8J2Xp/" +
  "Cdl5TwnZen8J2XqPCdl6Y8L2I+PC9ibG9ja3F1b3RlPgrwlqCCIFN0YXR1cyA6ICR7Ym90" +
  "U3RhdHVzfQrwlqCCIEJyb3dzZXIgOiAke2Jyb3dzZXJJbmZvfQrwlqCCIExpdmUgU21zID" +
  "ogJHtwb2xsaW5nSW5mb30K4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxibG9ja3F1b3RlPuS5giDwnZem8J2Xp/Cdl5" +
  "TwnZen8J2XqPCdl6Yg8J2XoPCdl5jwnZeh8J2XqCDkuYI8L2Jsb2NrcXVvdGU+CuKYkCDi" +
  "p70gL3N0YXRpc3RpYwrimJAg4qe9IC9zdGF0dXMK4piQIOKnvSAvdmlld3NtcwrimJAg4q" +
  "e9IC9zc3VybArimJAg4qe9IC9teW51bQrimJAg4qe9IC9iYWxhbmNlCuKUgeKUgeKUgeKU" +
  "geKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQoKPG" +
  "Jsb2NrcXVvdGU+PGI+REVWIDogQEthbmdEYXlaPC9iPjwvYmxvY2txdW90ZT5gOyAKCiAg" +
  "ICBjb25zdCBrZXlib2FyZCA9IE1hcmt1cC5pbmxpbmVLZXlib2FyZChbCiAgICAgICAgWw" +
  "ogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5SZIEJhY2snLCAnbWFp" +
  "bl9tZW51JykKICAgICAgICBdCiAgICBdKTsKCiAgICByZXR1cm4gZWRpdE9yUmVwbHlIVE" +
  "1MKGN0eCwgbWVzc2FnZSwga2V5Ym9hcmQsIG1lc3NhZ2VJZCk7Cn07CgovLyA9PT09PT09" +
  "PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBDT01NQU" +
  "5EIEhBTkRMRVJTID09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PSAvLwoKYm90LmNvbW1hbmQoJ3N0YXJ0JywgKGN0eCkgPT4gewogICAgaW" +
  "YgKGN0eC5mcm9tLmlkID09PSBPV05FUl9JRCkgc2VuZE1haW5NZW51KGN0eCk7CiAgICBl" +
  "bHNlIGN0eC5yZXBseSgi8J+kliBCb3QgaXMgT25saW5lIik7Cn0pOwoKYm90LmNvbW1hbm" +
  "QoJ3N0YXR1cycsIG93bmVyT25seSwgYXN5bmMgKGN0eCkgPT4gewogICAgY29uc3Qgc3Rh" +
  "dHVzVGV4dCA9IGdldEZvcm1hdHRlZFN0YXR1cygpOwogICAgYXdhaXQgcmVwbHlIVE1MKG" +
  "N0eCwgc3RhdHVzVGV4dCk7Cn0pOwoKYm90LmNvbW1hbmQoJ2xvZ2luJywgb3duZXJPbmx5" +
  "LCBhc3luYyAoY3R4KSA9PiB7CiAgICBjb25zdCB1c2VySWQgPSBjdHguZnJvbS5pZDsKIC" +
  "AgIAogICAgLy8gUmVzZXQgc3RhdGUgc2ViZWx1bW55YQogICAgcmVzZXRVc2VyU3RhdGUo" +
  "dXNlcklkKTsKICAgIAogICAgY29uc3QgY3VycmVudFVzZXIgPSBzZXR0aW5ncy5JVkFTX1" +
  "VTRVJOQU1FIHx8ICdOb3Qgc2V0JzsKICAgIGNvbnN0IGhhc0NGID0gc2V0dGluZ3MuQ0Zf" +
  "Q0xFQVJBTkNFX1ZBTFVFICYmIHNldHRpbmdzLkNGX0NMRUFSQU5DRV9WQUxVRS5sZW5ndG" +
  "ggPiAxMDsKICAgIAogICAgY29uc3QgbWVzc2FnZSA9IGA8YmxvY2txdW90ZT7wn5SRIExP" +
  "R0lOIE1BTkFHRU1FTlQ8L2Jsb2NrcXVvdGU+CuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQo8Yj5DdXJyZW50IFN0YXR1" +
  "czo8L2I+CvCfkaQgVXNlcm5hbWU6ICR7Y3VycmVudFVzZXJ9CvCfjaogQ0YgQ2xlYXJhbm" +
  "NlOiAke2hhc0NGID8gJ+KchSBTZXQnIDogJ+KdjCBOb3Qgc2V0J30K4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCjxiPk" +
  "9wdGlvbnM6PC9iPgoxLiA8Yj5GdWxsIExvZ2luPC9iPiAtIE1hc3Vra2FuIHVzZXJuYW1l" +
  "L3Bhc3N3b3JkL2NmX2NsZWFyYW5jZQoyLiA8Yj5VcGRhdGUgQ0YgT25seTwvYj4gLSBIYW" +
  "55YSB1cGRhdGUgY29va2llCjMuIDxiPlJlc2V0IEFsbDwvYj4gLSBIYXB1cyBzZW11YSBk" +
  "YXRhIGxvZ2luCjQuIDxiPlRyeSBDb25uZWN0PC9iPiAtIENvYmEga29uZWtzaSBkZW5nYW" +
  "4gZGF0YSBzYWF0IGluaQrilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIEKPGJsb2NrcXVvdGU+UGlsaWggc2FsYWggc2F0dT" +
  "o8L2Jsb2NrcXVvdGU+YDsKCiAgICBjb25zdCBrZXlib2FyZCA9IE1hcmt1cC5pbmxpbmVL" +
  "ZXlib2FyZChbCiAgICAgICAgWwogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYW" +
  "NrKCfwn5SRIEZ1bGwgTG9naW4nLCAnbG9naW5fZnVsbCcpLAogICAgICAgICAgICBNYXJr" +
  "dXAuYnV0dG9uLmNhbGxiYWNrKCfwn42qIFVwZGF0ZSBDRicsICdsb2dpbl9jZl9vbmx5Jy" +
  "kKICAgICAgICBdLAogICAgICAgIFsKICAgICAgICAgICAgTWFya3VwLmJ1dHRvbi5jYWxs" +
  "YmFjaygn8J+UhCBSZXNldCBBbGwnLCAnbG9naW5fcmVzZXRfYWxsJyksCiAgICAgICAgIC" +
  "AgIE1hcmt1cC5idXR0b24uY2FsbGJhY2soJ/CflIwgVHJ5IENvbm5lY3QnLCAnbG9naW5f" +
  "dHJ5X2Nvbm5lY3QnKQogICAgICAgIF0KICAgIF0pOwogICAgCiAgICBjb25zdCBzZW50TX" +
  "NnID0gYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwobWVzc2FnZSwgeyAKICAgICAgICByZXBs" +
  "eV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNzYWdlX2lkLAogICAgICAgIHJlcG" +
  "x5X21hcmt1cDoga2V5Ym9hcmQucmVwbHlfbWFya3VwIAogICAgfSk7CiAgICAKICAgIHNl" +
  "dFVzZXJTdGF0ZSh1c2VySWQsICdMT0dJTicsIHsKICAgICAgICBtZXNzYWdlSWQ6IHNlbn" +
  "RNc2cubWVzc2FnZV9pZCwKICAgICAgICBjaGF0SWQ6IGN0eC5jaGF0LmlkLAogICAgICAg" +
  "IGxvZ2luU3RlcDogJycsCiAgICAgICAgbG9naW5EYXRhOiB7fQogICAgfSk7Cn0pOwoKYm" +
  "90LmNvbW1hbmQoJ3VzZXJhZ2VudCcsIG93bmVyT25seSwgYXN5bmMgKGN0eCkgPT4gewog" +
  "ICAgY29uc3QgdXNlcklkID0gY3R4LmZyb20uaWQ7CiAgICAKICAgIHJlc2V0VXNlclN0YX" +
  "RlKHVzZXJJZCk7CiAgICAKICAgIGNvbnN0IGN1cnJlbnRVQSA9IHNldHRpbmdzLkNVUlJF" +
  "TlRfVVNFUl9BR0VOVCB8fCAnQmVsdW0gZGlhdHVyJzsKICAgIGNvbnN0IHNob3J0VUEgPS" +
  "BjdXJyZW50VUEubGVuZ3RoID4gNTAgPyBjdXJyZW50VUEuc3Vic3RyaW5nKDAsIDUwKSAr" +
  "ICcuLi4nIDogY3VycmVudFVBOwoKICAgIGNvbnN0IHNlbnRNZXNzYWdlID0gYXdhaXQgY3" +
  "R4LnJlcGx5V2l0aEhUTUwoCiAgICAgICAgYDxwcmU+8J+SuyBVcGRhdGUgVXNlciBBZ2Vu" +
  "dDwvcHJlPlxuXG5gICsKICAgICAgICBg8J+TsSA8Yj5Vc2VyIEFnZW50IHNhYXQgaW5pOj" +
  "wvYj5cbjxjb2RlPiR7c2hvcnRVQX08L2NvZGU+XG5cbmAgKwogICAgICAgIGDwn5OdIDxi" +
  "PktpcmltIFVzZXIgQWdlbnQgYmFydSAobWluaW1hbCAyMCBrYXJha3Rlcik6PC9iPmAsCi" +
  "AgICAgICAgeyByZXBseV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZT8ubWVzc2FnZV9p" +
  "ZCB9CiAgICApOwoKICAgIHNldFVzZXJTdGF0ZSh1c2VySWQsICdVU0VSX0FHRU5UJywgew" +
  "ogICAgICAgIG1lc3NhZ2VJZDogc2VudE1lc3NhZ2UubWVzc2FnZV9pZCwKICAgICAgICBj" +
  "aGF0SWQ6IGN0eC5jaGF0LmlkCiAgICB9KTsKfSk7Cgpib3QuY29tbWFuZCgnc3N3ZWInLC" +
  "Bvd25lck9ubHksIGFzeW5jIChjdHgpID0+IHsgICAgCiAgICBhd2FpdCB0YWtlRGFzaGJv" +
  "YXJkU2NyZWVuc2hvdChjdHgpOwp9KTsKCmJvdC5jb21tYW5kKCd2aWV3c21zJywgb3duZX" +
  "JPbmx5LCBhc3luYyAoY3R4KSA9PiB7ICAgIAogICAgYXdhaXQgdGFrZUxpdmVTbXNTY3Jl" +
  "ZW5zaG90KGN0eCk7Cn0pOwoKYm90LmNvbW1hbmQoJ3NzdXJsJywgb3duZXJPbmx5LCBhc3" +
  "luYyAoY3R4KSA9PiB7CiAgICBjb25zdCBhcmdzID0gY3R4Lm1lc3NhZ2UudGV4dC5zcGxp" +
  "dCgvXHMrLykuc2xpY2UoMSk7CiAgICBjb25zdCB1cmwgPSBhcmdzWzBdOwogICAgCiAgIC" +
  "BpZiAoIXVybCkgewogICAgICAgIGF3YWl0IHJlcGx5SFRNTChjdHgsIAogICAgICAgICAg" +
  "ICBgPHByZT5FcnJvclxuXG5ndW5ha2FuIDogL3NzdXJsIGh0dHBzOi8vZXhhbXBsZS5jb2" +
  "1cbkNvbnRvaCA6IC9zc3VybCBodHRwczovL3d3dy5nb29nbGUuY29tXG4vc3N1cmwgaHR0" +
  "cHM6Ly93d3cuaXZhc21zLmNvbTwvcHJlPmAKICAgICAgICApOwogICAgICAgIHJldHVybj" +
  "sKICAgIH0KICAgIAogICAgLy8gVmFsaWRhc2kgVVJMIGRhc2FyCiAgICBpZiAoIXVybC5z" +
  "dGFydHNXaXRoKCdodHRwOi8vJykgJiYgIXVybC5zdGFydHNXaXRoKCdodHRwczovLycpKS" +
  "B7CiAgICAgICAgYXdhaXQgcmVwbHlIVE1MKGN0eCwgCiAgICAgICAgICAgIGA8cHJlPkVy" +
  "cm9yXG5cblVSTCBoYXJ1cyBkaWF3YWxpIGRlbmdhbiBodHRwOi8vIGF0YXUgaHR0cHM6Ly" +
  "9cbkNvbnRvaCA6IC9zc3VybCBodHRwczovL3d3dy5leGFtcGxlLmNvbTwvcHJlPmAKICAg" +
  "ICAgICApOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgCiAgICBhd2FpdCB0YW" +
  "tlTWFjYm9va1NjcmVlbnNob3QoY3R4LCB1cmwpOwp9KTsKCgpjb25zdCBzYXZlU2V0dGlu" +
  "Z3MgPSAobmV3U2V0dGluZ3MpID0+IHsKICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2" +
  "luKF9fZGlybmFtZSwgJ3NldHRpbmdzLmpzJyk7CiAgICBjb25zdCBjb250ZW50ID0gYG1v" +
  "ZHVsZS5leHBvcnRzID0gJHtKU09OLnN0cmluZ2lmeShuZXdTZXR0aW5ncywgbnVsbCwgNC" +
  "l9O2A7CiAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBjb250ZW50KTsKfTsKCi8v" +
  "IDEuIENPTU1BTkQgL2FkZGdyb3VwCmJvdC5jb21tYW5kKCdhZGRncm91cCcsIChjdHgpID" +
  "0+IHsKICAgIGNvbnN0IGJvdFVzZXJuYW1lID0gY3R4LmJvdEluZm8udXNlcm5hbWU7CiAg" +
  "ICBjb25zdCBpbnZpdGVMaW5rID0gYGh0dHBzOi8vdC5tZS8ke2JvdFVzZXJuYW1lfT9zdG" +
  "FydGdyb3VwPW5ld2A7CiAgICAKICAgIGN0eC5yZXBseShgU2lsYWthbiBrbGlrIHRvbWJv" +
  "bCBkaSBiYXdhaCB1bnR1ayBtZW5hbWJhaGthbiBncnVwIGtlIGRhbGFtIGJvdC5cblxuU2" +
  "V0ZWxhaCBkaXRhbWJhaGthbiwgSUQgZ3J1cCBha2FuIG90b21hdGlzIHRlcnNpbXBhbi5g" +
  "LCB7CiAgICAgICAgcmVwbHlfbWFya3VwOiB7CiAgICAgICAgICAgIGlubGluZV9rZXlib2" +
  "FyZDogWwogICAgICAgICAgICAgICAgW3sgdGV4dDogIuKelSBQaWxpaCBHcnVwIiwgdXJs" +
  "OiBpbnZpdGVMaW5rIH1dCiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9KTsKfSk7Cg" +
  "ovLyBMaXN0ZW5lciBzYWF0IGJvdCBtYXN1ayBrZSBncnVwIGJhcnUgKE90b21hdGlzIGFt" +
  "YmlsIElEKQpib3Qub24oJ25ld19jaGF0X21lbWJlcnMnLCBhc3luYyAoY3R4KSA9PiB7Ci" +
  "AgICBjb25zdCBib3RJZCA9IGN0eC5ib3RJbmZvLmlkOwogICAgY29uc3QgaXNCb3RBZGRl" +
  "ZCA9IGN0eC5tZXNzYWdlLm5ld19jaGF0X21lbWJlcnMuc29tZShtZW1iZXIgPT4gbWVtYm" +
  "VyLmlkID09PSBib3RJZCk7CgogICAgaWYgKGlzQm90QWRkZWQpIHsKICAgICAgICBkZWxl" +
  "dGUgcmVxdWlyZS5jYWNoZVtyZXF1aXJlLnJlc29sdmUoJy4vc2V0dGluZ3MuanMnKV07Ci" +
  "AgICAgICAgbGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncy5qcycpOwogICAg" +
  "ICAgIAogICAgICAgIGNvbnN0IGNoYXRJZCA9IGN0eC5jaGF0LmlkOwogICAgICAgIGlmIC" +
  "ghQXJyYXkuaXNBcnJheShzZXR0aW5ncy5DSEFUX0lEKSkgewogICAgICAgICAgICBzZXR0" +
  "aW5ncy5DSEFUX0lEID0gW3NldHRpbmdzLkNIQVRfSURdOwogICAgICAgIH0KCiAgICAgIC" +
  "AgaWYgKCFzZXR0aW5ncy5DSEFUX0lELmluY2x1ZGVzKGNoYXRJZCkpIHsKICAgICAgICAg" +
  "ICAgc2V0dGluZ3MuQ0hBVF9JRC5wdXNoKGNoYXRJZCk7CiAgICAgICAgICAgIHNhdmVTZX" +
  "R0aW5ncyhzZXR0aW5ncyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHgucmVwbHko" +
  "YOKchSBHcnVwICIke2N0eC5jaGF0LnRpdGxlfSIgYmVyaGFzaWwgZGlkYWZ0YXJrYW4hXG" +
  "5JRDogPGNvZGU+JHtjaGF0SWR9PC9jb2RlPmAsIHsgcGFyc2VfbW9kZTogJ0hUTUwnIH0p" +
  "OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gS2lyaW0gbm90aWZpa2FzaSBrZSBvd2" +
  "5lcgogICAgICAgICAgICBib3QudGVsZWdyYW0uc2VuZE1lc3NhZ2Uoc2V0dGluZ3MuT1dO" +
  "RVJfSUQsIGDwn5OiIEdydXAgQmFydSBEaXRhbWJhaGthbjpcbk5hbWE6ICR7Y3R4LmNoYX" +
  "QudGl0bGV9XG5JRDogJHtjaGF0SWR9YCk7CiAgICAgICAgfQogICAgfQp9KTsKCi8vIDIu" +
  "IENPTU1BTkQgL2xpc3Rncm91cApib3QuY29tbWFuZCgnbGlzdGdyb3VwJywgYXN5bmMgKG" +
  "N0eCkgPT4gewogICAgZGVsZXRlIHJlcXVpcmUuY2FjaGVbcmVxdWlyZS5yZXNvbHZlKCcu" +
  "L3NldHRpbmdzLmpzJyldOwogICAgY29uc3Qgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldH" +
  "RpbmdzLmpzJyk7CiAgICBjb25zdCBjaGF0SWRzID0gQXJyYXkuaXNBcnJheShzZXR0aW5n" +
  "cy5DSEFUX0lEKSA/IHNldHRpbmdzLkNIQVRfSUQgOiBbc2V0dGluZ3MuQ0hBVF9JRF07Ci" +
  "AgICAKICAgIGlmIChjaGF0SWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGN0eC5yZXBseSgi" +
  "QmVsdW0gYWRhIGdydXAgeWFuZyB0ZXJkYWZ0YXIuIik7CgogICAgbGV0IG1lc3NhZ2UgPS" +
  "BgPGJsb2NrcXVvdGU+JHtzZXR0aW5ncy5QUk9KRUNUX05BTUV9PC9ibG9ja3F1b3RlPlxu" +
  "XG5gOwogICAgCiAgICBmb3IgKGNvbnN0IGlkIG9mIGNoYXRJZHMpIHsKICAgICAgICB0cn" +
  "kgewogICAgICAgICAgICBjb25zdCBjaGF0ID0gYXdhaXQgYm90LnRlbGVncmFtLmdldENo" +
  "YXQoaWQpOwogICAgICAgICAgICBtZXNzYWdlICs9IGA8Yj4ke2NoYXQudGl0bGV9PC9iPl" +
  "xuPGNvZGU+JHtpZH08L2NvZGU+XG5cbmA7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAg" +
  "ICAgICAgICBtZXNzYWdlICs9IGA8Yj5HcnVwIFRpZGFrIERpa2VuYWw8L2I+XG48Y29kZT" +
  "4ke2lkfTwvY29kZT4gKEJvdCBtdW5na2luIGRpa2VsdWFya2FuKVxuXG5gOwogICAgICAg" +
  "IH0KICAgIH0KCiAgICBjdHgucmVwbHkobWVzc2FnZSwgeyBwYXJzZV9tb2RlOiAnSFRNTC" +
  "cgfSk7Cn0pOwoKLy8gMy4gQ09NTUFORCAvZGVsZ3JvdXAgPGlkPgpib3QuY29tbWFuZCgn" +
  "ZGVsZ3JvdXAnLCBhc3luYyAoY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dElkID0gY3R4Lm" +
  "1lc3NhZ2UudGV4dC5zcGxpdCgnICcpWzFdOwogICAgaWYgKCFpbnB1dElkKSByZXR1cm4g" +
  "Y3R4LnJlcGx5KCJGb3JtYXQ6IC9kZWxncm91cCAtMTAweHh4eHh4eCIpOwoKICAgIGRlbG" +
  "V0ZSByZXF1aXJlLmNhY2hlW3JlcXVpcmUucmVzb2x2ZSgnLi9zZXR0aW5ncy5qcycpXTsK" +
  "ICAgIGxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MuanMnKTsKICAgIGNvbn" +
  "N0IHRhcmdldElkID0gcGFyc2VJbnQoaW5wdXRJZCk7CgogICAgaWYgKEFycmF5LmlzQXJy" +
  "YXkoc2V0dGluZ3MuQ0hBVF9JRCkgJiYgc2V0dGluZ3MuQ0hBVF9JRC5pbmNsdWRlcyh0YX" +
  "JnZXRJZCkpIHsKICAgICAgICAvLyBIYXB1cyBkYXJpIGFycmF5CiAgICAgICAgc2V0dGlu" +
  "Z3MuQ0hBVF9JRCA9IHNldHRpbmdzLkNIQVRfSUQuZmlsdGVyKGlkID0+IGlkICE9PSB0YX" +
  "JnZXRJZCk7CiAgICAgICAgc2F2ZVNldHRpbmdzKHNldHRpbmdzKTsKCiAgICAgICAgLy8g" +
  "Qm90IGtlbHVhciBkYXJpIGdydXAKICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdC" +
  "Bib3QudGVsZWdyYW0ubGVhdmVDaGF0KHRhcmdldElkKTsKICAgICAgICAgICAgY3R4LnJl" +
  "cGx5KGDinIUgQmVyaGFzaWwgbWVuZ2hhcHVzIGdydXAgJHt0YXJnZXRJZH0gZGFuIGJvdC" +
  "B0ZWxhaCBrZWx1YXIuYCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBj" +
  "dHgucmVwbHkoYOKchSBJRCBkaWhhcHVzIGRhcmkgc2V0dGluZ3MsIHRhcGkgYm90IGdhZ2" +
  "FsIGtlbHVhciBncnVwIG90b21hdGlzIChNdW5na2luIGJvdCBzdWRhaCB0aWRhayBkaSBz" +
  "YW5hKS5gKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGN0eC5yZXBseSgi4p" +
  "2MIElEIEdydXAgdGlkYWsgZGl0ZW11a2FuIGRpIGRhZnRhci4iKTsKICAgIH0KfSk7Cgov" +
  "LyBHYW50aSBkZW5nYW4gbWVuZ2d1bmFrYW4gdXBkYXRlU2V0dGluZ1NpbGVudCB5YW5nIH" +
  "N1ZGFoIGFkYQpib3QuY29tbWFuZCgnc2V0Y2hhbm5lbCcsIG93bmVyT25seSwgKGN0eCkg" +
  "PT4gewogICAgY29uc3QgbGluayA9IGN0eC5tZXNzYWdlLnRleHQuc3BsaXQoJyAnKVsxXT" +
  "sKICAgIGlmICghbGluaykgcmV0dXJuIGN0eC5yZXBseSgnRm9ybWF0OiAvc2V0Y2hhbm5l" +
  "bCA8bGluaz4nKTsKICAgIAogICAgaWYgKHVwZGF0ZVNldHRpbmdTaWxlbnQoJ01BSU5fQ0" +
  "hBTk5FTF9MSU5LJywgbGluaykpIHsKICAgICAgICBjdHgucmVwbHkoYOKchSBNQUlOX0NI" +
  "QU5ORUxfTElOSyB1cGRhdGVkOiAke2xpbmt9YCk7CiAgICB9IGVsc2UgewogICAgICAgIG" +
  "N0eC5yZXBseSgn4p2MIEdhZ2FsIHVwZGF0ZSBzZXR0aW5nJyk7CiAgICB9Cn0pOwoKYm90" +
  "LmNvbW1hbmQoJ3NldGNobnVtYmVyJywgb3duZXJPbmx5LCAoY3R4KSA9PiB7CiAgICBjb2" +
  "5zdCBsaW5rID0gY3R4Lm1lc3NhZ2UudGV4dC5zcGxpdCgnICcpWzFdOwogICAgaWYgKCFs" +
  "aW5rKSByZXR1cm4gY3R4LnJlcGx5KCdGb3JtYXQ6IC9zZXRjaG51bWJlciA8bGluaz4nKT" +
  "sKCiAgICBpZiAodXBkYXRlU2V0dGluZ1NpbGVudCgnTlVNQkVSX0dST1VQX0xJTksnLCBs" +
  "aW5rKSkgewogICAgICAgIGN0eC5yZXBseShg4pyFIE5VTUJFUl9HUk9VUF9MSU5LIHVwZG" +
  "F0ZWQ6ICR7bGlua31gKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY3R4LnJlcGx5KCfinYwg" +
  "R2FnYWwgdXBkYXRlIHNldHRpbmcnKTsKICAgIH0KfSk7Cgpib3QuY29tbWFuZCgnc2V0b3" +
  "duZXJsaW5rJywgb3duZXJPbmx5LCAoY3R4KSA9PiB7CiAgICBjb25zdCBsaW5rID0gY3R4" +
  "Lm1lc3NhZ2UudGV4dC5zcGxpdCgnICcpWzFdOwogICAgaWYgKCFsaW5rKSByZXR1cm4gY3" +
  "R4LnJlcGx5KCdGb3JtYXQ6IC9zZXRvd25lcmxpbmsgPGxpbms+Jyk7CgogICAgaWYgKHVw" +
  "ZGF0ZVNldHRpbmdTaWxlbnQoJ0JPVF9PV05FUl9MSU5LJywgbGluaykpIHsKICAgICAgIC" +
  "BjdHgucmVwbHkoYOKchSBCT1RfT1dORVJfTElOSyB1cGRhdGVkOiAke2xpbmt9YCk7CiAg" +
  "ICB9IGVsc2UgewogICAgICAgIGN0eC5yZXBseSgn4p2MIEdhZ2FsIHVwZGF0ZSBzZXR0aW" +
  "5nJyk7CiAgICB9Cn0pOwoKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PSAvLwovLyA9PT09PT09PT09IEFDVElPTiBIQU5ETEVSUyA9PT09PT09PT0gLy8KLy" +
  "8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCgpib3QuYWN0aW9u" +
  "KCdtYWluX21lbnUnLCBvd25lck9ubHksIGFzeW5jIChjdHgpID0+IHsKICAgIGNvbnN0IG" +
  "1lc3NhZ2VJZCA9IGN0eC5jYWxsYmFja1F1ZXJ5Lm1lc3NhZ2UubWVzc2FnZV9pZDsKICAg" +
  "IGF3YWl0IHNlbmRNYWluTWVudShjdHgsIG1lc3NhZ2VJZCk7Cn0pOwoKYm90LmFjdGlvbi" +
  "gnc2hvd19zZXR0aW5ncycsIG93bmVyT25seSwgc2VuZFNldHRpbmdzTWVudSk7CmJvdC5h" +
  "Y3Rpb24oJ3Nob3dfc3RhdHVzX3BhbmVsJywgb3duZXJPbmx5LCBzZW5kU3RhdHVzUGFuZW" +
  "xNZW51KTsKYm90LmFjdGlvbigncmVmcmVzaF9tYWluJywgb3duZXJPbmx5LCBhc3luYyAo" +
  "Y3R4KSA9PiB7CiAgICBhd2FpdCBjdHguYW5zd2VyQ2JRdWVyeSgnUmVmcmVzaGluZy4uLi" +
  "cpOwogICAgY29uc3QgbWVzc2FnZUlkID0gY3R4LmNhbGxiYWNrUXVlcnkubWVzc2FnZS5t" +
  "ZXNzYWdlX2lkOwogICAgYXdhaXQgc2VuZE1haW5NZW51KGN0eCwgbWVzc2FnZUlkKTsKfS" +
  "k7Cgpib3QuYWN0aW9uKCdjaGVja19zdGF0dXNfcmVmcmVzaCcsIG93bmVyT25seSwgYXN5" +
  "bmMgKGN0eCkgPT4gewogICAgYXdhaXQgY3R4LmFuc3dlckNiUXVlcnkoIk1lbGFrdWthbi" +
  "BGb3JjZWQgQ2hlY2sgZGFuIHVwZGF0ZSBzdGF0dXMuLi4iKTsKICAgIGNvbnN0IG1lc3Nh" +
  "Z2VJZCA9IGN0eC5jYWxsYmFja1F1ZXJ5Lm1lc3NhZ2UubWVzc2FnZV9pZDsKICAgIHRyeS" +
  "B7IGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQoY3R4LmNoYXQuaWQsIG1l" +
  "c3NhZ2VJZCwgbnVsbCwgJ+KPsyBNZWxha3VrYW4gRm9yY2VkIENoZWNrIHN0YXR1cyBrb2" +
  "5la3NpLi4uJywgeyBwYXJzZV9tb2RlOiAnSFRNTCcgfSk7IH0gY2F0Y2goZSkge30KCiAg" +
  "ICBhd2FpdCBjb25uZWN0Um9idXN0TGl2ZVNtcygpOwogICAgYXdhaXQgdXBkYXRlU3RhdH" +
  "VzTWVzc2FnZShjdHgsIG51bGwsIG1lc3NhZ2VJZCk7Cn0pOwpib3QuYWN0aW9uKCdsb2dp" +
  "bl9mdWxsJywgb3duZXJPbmx5LCBhc3luYyAoY3R4KSA9PiB7CiAgICBjb25zdCB1c2VySW" +
  "QgPSBjdHguZnJvbS5pZDsKICAgIGxldCBzdGF0ZSA9IGdldFVzZXJTdGF0ZSh1c2VySWQp" +
  "OwogICAgCiAgICAvLyBKaWthIHN0YXRlIHRpZGFrIGFkYSBhdGF1IGJ1a2FuIHR5cGUgTE" +
  "9HSU4sIGJ1YXQgYmFydQogICAgaWYgKCFzdGF0ZSB8fCBzdGF0ZS50eXBlICE9PSAnTE9H" +
  "SU4nKSB7CiAgICAgICAgY29uc3Qgc2VudE1zZyA9IGF3YWl0IGN0eC5yZXBseVdpdGhIVE" +
  "1MKGA8cHJlPvCflJEgRlVMTCBMT0dJTiBTRVRVUDwvcHJlPlxuXG7wn5SEIE1lbXVsYWkg" +
  "cHJvc2VzIGxvZ2luLi4uYCk7CiAgICAgICAgc3RhdGUgPSBzZXRVc2VyU3RhdGUodXNlck" +
  "lkLCAnTE9HSU4nLCB7CiAgICAgICAgICAgIG1lc3NhZ2VJZDogc2VudE1zZy5tZXNzYWdl" +
  "X2lkLAogICAgICAgICAgICBjaGF0SWQ6IGN0eC5jaGF0LmlkLAogICAgICAgICAgICBsb2" +
  "dpblN0ZXA6ICd1c2VybmFtZScsCiAgICAgICAgICAgIGxvZ2luRGF0YToge30KICAgICAg" +
  "ICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuZGF0YS5sb2dpblN0ZXAgPSAndX" +
  "Nlcm5hbWUnOwogICAgICAgIHN0YXRlLmRhdGEubG9naW5EYXRhID0ge307CiAgICAgICAg" +
  "c3RhdGUuc3RlcCA9ICdhd2FpdGluZ19pbnB1dCc7CiAgICB9CiAgICAKICAgIGF3YWl0IG" +
  "N0eC5hbnN3ZXJDYlF1ZXJ5KCdTdGFydGluZyBmdWxsIGxvZ2luIHByb2Nlc3MuLi4nKTsK" +
  "ICAgIAogICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgc3RhdGUuZGF0YS5tZXNzYW" +
  "dlSWQsIAogICAgICAgIGA8cHJlPvCflJEgRlVMTCBMT0dJTiBTRVRVUDwvcHJlPlxuXG7i" +
  "mpnvuI8gPGI+U3RhdHVzOjwvYj4gTWVudW5nZ3UgaW5wdXQuLi5cbvCfk6cgPGI+TWFzdW" +
  "trYW4gVXNlcm5hbWUvRW1haWwgSVZBU01TOjwvYj5gCiAgICApOwp9KTsKCmJvdC5hY3Rp" +
  "b24oJ2xvZ2luX2NmX29ubHknLCBvd25lck9ubHksIGFzeW5jIChjdHgpID0+IHsKICAgIG" +
  "NvbnN0IHVzZXJJZCA9IGN0eC5mcm9tLmlkOwogICAgbGV0IHN0YXRlID0gZ2V0VXNlclN0" +
  "YXRlKHVzZXJJZCk7CiAgICAKICAgIGlmICghc3RhdGUgfHwgc3RhdGUudHlwZSAhPT0gJ0" +
  "xPR0lOJykgewogICAgICAgIGNvbnN0IHNlbnRNc2cgPSBhd2FpdCBjdHgucmVwbHlXaXRo" +
  "SFRNTChgPHByZT7wn42qIFVQREFURSBDRiBDTEVBUkFOQ0U8L3ByZT5cblxu8J+UhCBNZW" +
  "11bGFpIHVwZGF0ZSBjb29raWUuLi5gKTsKICAgICAgICBzdGF0ZSA9IHNldFVzZXJTdGF0" +
  "ZSh1c2VySWQsICdMT0dJTicsIHsKICAgICAgICAgICAgbWVzc2FnZUlkOiBzZW50TXNnLm" +
  "1lc3NhZ2VfaWQsCiAgICAgICAgICAgIGNoYXRJZDogY3R4LmNoYXQuaWQsCiAgICAgICAg" +
  "ICAgIGxvZ2luU3RlcDogJ2NmX29ubHknLAogICAgICAgICAgICBsb2dpbkRhdGE6IHt9Ci" +
  "AgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmRhdGEubG9naW5TdGVw" +
  "ID0gJ2NmX29ubHknOwogICAgICAgIHN0YXRlLmRhdGEubG9naW5EYXRhID0ge307CiAgIC" +
  "AgICAgc3RhdGUuc3RlcCA9ICdhd2FpdGluZ19pbnB1dCc7CiAgICB9CiAgICAKICAgIGF3" +
  "YWl0IGN0eC5hbnN3ZXJDYlF1ZXJ5KCdVcGRhdGluZyBDRiBjbGVhcmFuY2Ugb25seS4uLi" +
  "cpOwogICAgCiAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCBzdGF0ZS5kYXRhLm1l" +
  "c3NhZ2VJZCwKICAgICAgICBgPHByZT7wn42qIFVQREFURSBDRiBDTEVBUkFOQ0U8L3ByZT" +
  "5cblxu8J+RpCA8Yj5Vc2VyOjwvYj4gPGNvZGU+JHtzZXR0aW5ncy5JVkFTX1VTRVJOQU1F" +
  "IHx8ICdOb3Qgc2V0J308L2NvZGU+XG7impnvuI8gPGI+U3RhdHVzOjwvYj4gTWVudW5nZ3" +
  "UgY29va2llLi4uXG5cbvCfk4sgPGI+TWFzdWtrYW4gQ0YgQ2xlYXJhbmNlIGJhcnU6PC9i" +
  "PlxuPGk+KEFtYmlsIG5pbGFpIGNmX2NsZWFyYW5jZSBkYXJpIGJyb3dzZXIpPC9pPmAKIC" +
  "AgICk7Cn0pOwpib3QuYWN0aW9uKCdsb2dpbl9yZXNldF9hbGwnLCBvd25lck9ubHksIGFz" +
  "eW5jIChjdHgpID0+IHsKICAgIGNvbnN0IHVzZXJJZCA9IGN0eC5mcm9tLmlkOwogICAgY2" +
  "9uc3Qgc3RhdGUgPSBnZXRVc2VyU3RhdGUodXNlcklkKTsKICAgIAogICAgaWYgKCFzdGF0" +
  "ZSB8fCBzdGF0ZS50eXBlICE9PSAnTE9HSU4nKSB7CiAgICAgICAgYXdhaXQgY3R4LmFuc3" +
  "dlckNiUXVlcnkoJ+KdjCBTdGF0ZSB0aWRhayB2YWxpZC4gVWxhbmdpIC9sb2dpbicpOwog" +
  "ICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgYXdhaXQgY3R4LmFuc3dlckNiUXVlcn" +
  "koJ1Jlc2V0dGluZyBhbGwgbG9naW4gZGF0YS4uLicpOwogICAgCiAgICB0cnkgewogICAg" +
  "ICAgIHdyaXRlU2V0dGluZ1RvRmlsZVN5bmMoJ0lWQVNfVVNFUk5BTUUnLCAnJyk7CiAgIC" +
  "AgICAgd3JpdGVTZXR0aW5nVG9GaWxlU3luYygnSVZBU19QQVNTV09SRCcsICcnKTsKICAg" +
  "ICAgICB3cml0ZVNldHRpbmdUb0ZpbGVTeW5jKCdDRl9DTEVBUkFOQ0VfVkFMVUUnLCAnJy" +
  "k7CiAgICAgICAgCiAgICAgICAgY29uc3Qga2V5Ym9hcmQgPSBNYXJrdXAuaW5saW5lS2V5" +
  "Ym9hcmQoWwogICAgICAgICAgICBbTWFya3VwLmJ1dHRvbi5jYWxsYmFjaygn8J+UkSBTdG" +
  "FydCBGdWxsIExvZ2luJywgJ2xvZ2luX2Z1bGwnKV0KICAgICAgICBdKTsKCiAgICAgICAg" +
  "YXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgc3RhdGUuZGF0YS5tZXNzYWdlSWQsIGA8cH" +
  "JlPvCflIQgUkVTRVQgQ09NUExFVEU8L3ByZT5cblxu4pyFIDxiPlN0YXR1czo8L2I+IERh" +
  "dGEgZGliZXJzaWhrYW5cbvCfk4ogPGI+SW5mbzo8L2I+IFNlbXVhIGtyZWRlbnNpYWwgdG" +
  "VsYWggZGloYXB1cy5cblxuPGk+U2lsYWthbiBsYWt1a2FuIGxvZ2luIHVsYW5nIHVudHVr" +
  "IG1lbXVsYWkuPC9pPmAsIGtleWJvYXJkKTsKICAgICAgICAgICAgCiAgICAgICAgcmVzZX" +
  "RVc2VyU3RhdGUodXNlcklkKTsKICAgICAgICAKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAg" +
  "ICAgICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgc3RhdGUuZGF0YS5tZXNzYWdlSW" +
  "QsIGA8cHJlPvCflIQgUkVTRVQgRkFJTEVEPC9wcmU+XG5cbuKdjCA8Yj5FcnJvcjo8L2I+" +
  "ICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgIH0KfSk7CgovLyA9PT09PT09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBBQ1RJT04gSEFORExFUlMg" +
  "PT09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS" +
  "AvLwoKYm90LmFjdGlvbignbG9naW5fdHJ5X2Nvbm5lY3QnLCBvd25lck9ubHksIGFzeW5j" +
  "IChjdHgpID0+IHsKICAgIGF3YWl0IGN0eC5hbnN3ZXJDYlF1ZXJ5KCdNZW11bGFpIHByb3" +
  "NlcyBrb25la3NpLi4uJyk7CiAgICBjb25zdCBtZXNzYWdlSWQgPSBjdHguY2FsbGJhY2tR" +
  "dWVyeS5tZXNzYWdlLm1lc3NhZ2VfaWQ7CgogICAgLy8gVXBkYXRlIHBlc2FuIGRlbmdhbi" +
  "Bwcm9ncmVzcyBiYXIKICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQo" +
  "CiAgICAgICAgY3R4LmNoYXQuaWQsCiAgICAgICAgbWVzc2FnZUlkLAogICAgICAgIG51bG" +
  "wsCiAgICAgICAgYDxibG9ja3F1b3RlPvCflIwgUFJPU0VTIEtPTkVLU0k8L2Jsb2NrcXVv" +
  "dGU+XG5gICsKICAgICAgICBg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5gICsKICAgICAgICBgW+KWkeKWkeKWkeKW" +
  "keKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkV0gMC" +
  "VgLAogICAgICAgIHsgcGFyc2VfbW9kZTogJ0hUTUwnIH0KICAgICk7CgogICAgLy8gSmFs" +
  "YW5rYW4ga29uZWtzaSBkaSBiYWNrZ3JvdW5kCiAgICBzZXRJbW1lZGlhdGUoYXN5bmMgKC" +
  "kgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFN0ZXAgMTogUGVyc2lhcGFu" +
  "CiAgICAgICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQoCiAgIC" +
  "AgICAgICAgICAgICBjdHguY2hhdC5pZCwKICAgICAgICAgICAgICAgIG1lc3NhZ2VJZCwK" +
  "ICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICBgPGJsb2NrcXVvdGU+8J" +
  "+UjCBQUk9TRVMgS09ORUtTSTwvYmxvY2txdW90ZT5cbmAgKwogICAgICAgICAgICAgICAg" +
  "YOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgVxuYCArCiAgICAgICAgICAgICAgICBgW+KWiOKWiOKWiOKWiOKWiOKWiOKW" +
  "iOKWiOKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkV0gMzMlYCwKICAgIC" +
  "AgICAgICAgICAgIHsgcGFyc2VfbW9kZTogJ0hUTUwnIH0KICAgICAgICAgICAgKTsKCiAg" +
  "ICAgICAgICAgIC8vIFN0ZXAgMjogUHJvc2VzIGtvbmVrc2kKICAgICAgICAgICAgYXdhaX" +
  "QgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsK" +
  "ICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2" +
  "FnZVRleHQoCiAgICAgICAgICAgICAgICBjdHguY2hhdC5pZCwKICAgICAgICAgICAgICAg" +
  "IG1lc3NhZ2VJZCwKICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICBgPG" +
  "Jsb2NrcXVvdGU+8J+UjCBQUk9TRVMgS09ORUtTSTwvYmxvY2txdW90ZT5cbmAgKwogICAg" +
  "ICAgICAgICAgICAgYOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgVxuYCArCiAgICAgICAgICAgICAgICBgW+KWiOKWiOKW" +
  "iOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWkeKWkV" +
  "0gNjYlYCwKICAgICAgICAgICAgICAgIHsgcGFyc2VfbW9kZTogJ0hUTUwnIH0KICAgICAg" +
  "ICAgICAgKTsKCiAgICAgICAgICAgIC8vIEVrc2VrdXNpIGZ1bmdzaSBrb25la3NpCiAgIC" +
  "AgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBjb25uZWN0Um9idXN0TGl2ZVNtcygp" +
  "OwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgIC" +
  "AgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBsaXZlU21zUGFnZSA/IGF3YWl0IGxpdmVTbXNQ" +
  "YWdlLnVybCgpIDogJ04vQSc7CiAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IG" +
  "lzUG9sbGluZ0FjdGl2ZSA/ICfinIUgQUtUSUYnIDogJ+KdjCBOT04tQUtUSUYnOwogICAg" +
  "ICAgICAgICAgICAgY29uc3QgaXNTdGFibGUgPSBpc0Nvbm5lY3Rpb25TdGFibGUgPyAn4p" +
  "yFIFNUQUJJTCcgOiAn4pqg77iPIFRJREFLIFNUQUJJTCc7CiAgICAgICAgICAgICAgICAK" +
  "ICAgICAgICAgICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQoCi" +
  "AgICAgICAgICAgICAgICAgICAgY3R4LmNoYXQuaWQsCiAgICAgICAgICAgICAgICAgICAg" +
  "bWVzc2FnZUlkLAogICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgIC" +
  "AgICAgYDxibG9ja3F1b3RlPvCflIwgS09ORUtTSSBCRVJIQVNJTDwvYmxvY2txdW90ZT5c" +
  "bmAgKwogICAgICAgICAgICAgICAgICAgIGDilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcbmAgKwogICAgICAgICAgICAg" +
  "ICAgICAgIGDinIUgPGI+U3RhdHVzIEtvbmVrc2k6PC9iPiBURVJIVUJVTkdcbmAgKwogIC" +
  "AgICAgICAgICAgICAgICAgIGDwn5OKIDxiPlN0YXR1cyBCb3Q6PC9iPiAke2JvdFN0YXR1" +
  "c31cbmAgKwogICAgICAgICAgICAgICAgICAgIGDwn4yQIDxiPlVSTDo8L2I+IDxjb2RlPi" +
  "R7Y3VycmVudFVybH08L2NvZGU+XG5gICsKICAgICAgICAgICAgICAgICAgICBg8J+ToSA8" +
  "Yj5MaXZlIFNNUzo8L2I+ICR7aXNBY3RpdmV9XG5gICsKICAgICAgICAgICAgICAgICAgIC" +
  "Bg4pqhIDxiPlN0YWJpbGl0YXM6PC9iPiAke2lzU3RhYmxlfVxuYCArCiAgICAgICAgICAg" +
  "ICAgICAgICAgYOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgVxuYCArCiAgICAgICAgICAgICAgICAgICAgYPCflZAgPGI+" +
  "V2FrdHU6PC9iPiAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdpZC1JRCcpfV" +
  "xuYCwKICAgICAgICAgICAgICAgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgICAg" +
  "ICAgICAgICAgICApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gZWxzZSB7Ci" +
  "AgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0tvbmVrc2kgZ2FnYWwgLSBmdW5n" +
  "c2kgY29ubmVjdFJvYnVzdExpdmVTbXMgbWVuZ2VtYmFsaWthbiBmYWxzZScpOwogICAgIC" +
  "AgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAg" +
  "ICAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkKGBbQUNUSU9OXSDinYwgRXJyb3Iga2" +
  "9uZWtzaTogJHtlcnJvci5tZXNzYWdlfWApKTsKICAgICAgICAgICAgCiAgICAgICAgICAg" +
  "IGxldCBzdWdnZXN0aW9ucyA9ICcnOwogICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS" +
  "5pbmNsdWRlcygnQ2xvdWRmbGFyZScpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0NG" +
  "JykpIHsKICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gJzEuIEd1bmFrYW4gL2xvZ2" +
  "luIHVudHVrIHVwZGF0ZSBDRiBDbGVhcmFuY2VcbjIuIEFtYmlsIGNvb2tpZSBjZl9jbGVh" +
  "cmFuY2UgdGVyYmFydVxuMy4gQ29iYSBha3NlcyBtYW51YWwgZGkgYnJvd3Nlcic7CiAgIC" +
  "AgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbG9naW4nKSB8" +
  "fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdjcmVkZW50aWFsJykpIHsKICAgICAgICAgIC" +
  "AgICAgIHN1Z2dlc3Rpb25zID0gJzEuIFBhc3Rpa2FuIHVzZXJuYW1lL3Bhc3N3b3JkIGJl" +
  "bmFyXG4yLiBHdW5ha2FuIC9sb2dpbiB1bnR1ayBzZXR1cCB1bGFuZ1xuMy4gQ2VrIGtvbm" +
  "Vrc2kgaW50ZXJuZXQnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg" +
  "c3VnZ2VzdGlvbnMgPSAnMS4gQ29iYSAvbG9naW4gdWxhbmdcbjIuIFJlc3RhcnQgYm90XG" +
  "4zLiBIdWJ1bmdpIGRldmVsb3Blcic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAg" +
  "ICAgICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2FnZVRleHQoCiAgICAgIC" +
  "AgICAgICAgICBjdHguY2hhdC5pZCwKICAgICAgICAgICAgICAgIG1lc3NhZ2VJZCwKICAg" +
  "ICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICBgPGJsb2NrcXVvdGU+4p2MIE" +
  "tPTkVLU0kgR0FHQUw8L2Jsb2NrcXVvdGU+XG5gICsKICAgICAgICAgICAgICAgIGDilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIFcbmAgKwogICAgICAgICAgICAgICAgYOKaoO+4jyA8Yj5FcnJvcjo8L2I+IDxjb2Rl" +
  "PiR7ZXJyb3IubWVzc2FnZX08L2NvZGU+XG5cbmAgKwogICAgICAgICAgICAgICAgYPCflK" +
  "cgPGI+U2FyYW4gUGVyYmFpa2FuOjwvYj5cbiR7c3VnZ2VzdGlvbnN9XG5cbmAgKwogICAg" +
  "ICAgICAgICAgICAgYPCflIQgPGk+U2lsYWthbiBjb2JhIGxhZ2kgYXRhdSBndW5ha2FuIC" +
  "9sb2dpbjwvaT5gLAogICAgICAgICAgICAgICAgeyBwYXJzZV9tb2RlOiAnSFRNTCcgfQog" +
  "ICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0pOwp9KTsKCgovLyA9PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBVVElMSVRZIEZV" +
  "TkNUSU9OUyA9PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT" +
  "09PT09PSAvLwoKY29uc3Qgc2FmZUVkaXRNZXNzYWdlID0gYXN5bmMgKGN0eCwgbWVzc2Fn" +
  "ZUlkLCBuZXdUZXh0LCBrZXlib2FyZCA9IG51bGwpID0+IHsKICAgIHRyeSB7CiAgICAgIC" +
  "AgY29uc3Qgb3B0aW9ucyA9IHsgcGFyc2VfbW9kZTogJ0hUTUwnLCBkaXNhYmxlX3dlYl9w" +
  "YWdlX3ByZXZpZXc6IHRydWUgfTsKICAgICAgICBpZiAoa2V5Ym9hcmQgJiYga2V5Ym9hcm" +
  "QucmVwbHlfbWFya3VwKSBvcHRpb25zLnJlcGx5X21hcmt1cCA9IGtleWJvYXJkLnJlcGx5" +
  "X21hcmt1cDsKICAgICAgICAKICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3" +
  "NhZ2VUZXh0KGN0eC5jaGF0LmlkLCBtZXNzYWdlSWQsIG51bGwsIG5ld1RleHQsIG9wdGlv" +
  "bnMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC" +
  "AgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZXJyb3JfY29kZSA9" +
  "PT0gNDAwICYmIGVycm9yLnJlc3BvbnNlLmRlc2NyaXB0aW9uLmluY2x1ZGVzKCdtZXNzYW" +
  "dlIGlzIG5vdCBtb2RpZmllZCcpKSByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoZXJyb3Iu" +
  "cmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZXJyb3JfY29kZSA9PT0gNDAwICYmIGVycm" +
  "9yLnJlc3BvbnNlLmRlc2NyaXB0aW9uLmluY2x1ZGVzKCdtZXNzYWdlIHRvIGVkaXQgbm90" +
  "IGZvdW5kJykpIHsKICAgICAgICAgICAgY29uc3Qgc2VuZE9wdGlvbnMgPSB7IHBhcnNlX2" +
  "1vZGU6ICdIVE1MJywgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3OiB0cnVlIH07CiAgICAg" +
  "ICAgICAgIGlmIChrZXlib2FyZCAmJiBrZXlib2FyZC5yZXBseV9tYXJrdXApIHNlbmRPcH" +
  "Rpb25zLnJlcGx5X21hcmt1cCA9IGtleWJvYXJkLnJlcGx5X21hcmt1cDsKICAgICAgICAg" +
  "ICAgYXdhaXQgY3R4LnRlbGVncmFtLnNlbmRNZXNzYWdlKGN0eC5jaGF0LmlkLCBuZXdUZX" +
  "h0LCBzZW5kT3B0aW9ucyk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0K" +
  "ICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn07Cgpjb25zdCBoYW5kbGVMb2dpblRleH" +
  "QgPSBhc3luYyAoY3R4LCBzdGF0ZSwgdGV4dCkgPT4gewogICAgY29uc3QgdXNlcklkID0g" +
  "Y3R4LmZyb20uaWQ7CiAgICBjb25zdCBtZXNzYWdlSWQgPSBzdGF0ZS5kYXRhLm1lc3NhZ2" +
  "VJZDsKICAgIGNvbnN0IGhlYWRlciA9IGA8YmxvY2txdW90ZT7wn5SRIExPR0lOIFNFVFVQ" +
  "PC9ibG9ja3F1b3RlPlxu4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5gOwogICAgCiAgICBpZiAoIXN0YXRlLmRhdGEu" +
  "bG9naW5TdGVwKSB7IHJlc2V0VXNlclN0YXRlKHVzZXJJZCk7IHJldHVybjsgfQogICAgCi" +
  "AgICBzd2l0Y2ggKHN0YXRlLmRhdGEubG9naW5TdGVwKSB7CiAgICAgICAgY2FzZSAndXNl" +
  "cm5hbWUnOgogICAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IHRleHQudHJpbSgpOwogIC" +
  "AgICAgICAgICBpZiAoIXVzZXJuYW1lKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBzYWZl" +
  "RWRpdE1lc3NhZ2UoY3R4LCBtZXNzYWdlSWQsIGAke2hlYWRlcn3inYwgVXNlcm5hbWUgdG" +
  "lkYWsgYm9sZWgga29zb25nIVxuXG7wn5OnIDxiPk1hc3Vra2FuIFVzZXJuYW1lL0VtYWls" +
  "OjwvYj5gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgIC" +
  "AgICAgICBzdGF0ZS5kYXRhLmxvZ2luRGF0YSA9IHN0YXRlLmRhdGEubG9naW5EYXRhIHx8" +
  "IHt9OwogICAgICAgICAgICBzdGF0ZS5kYXRhLmxvZ2luRGF0YS51c2VybmFtZSA9IHVzZX" +
  "JuYW1lOwogICAgICAgICAgICBzdGF0ZS5kYXRhLmxvZ2luU3RlcCA9ICdwYXNzd29yZCc7" +
  "CiAgICAgICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG1lc3NhZ2VJZCwgYC" +
  "R7aGVhZGVyffCfkaQgVXNlcm5hbWU6IDxjb2RlPiR7dXNlcm5hbWV9PC9jb2RlPlxuXG7w" +
  "n5SQIDxiPk1hc3Vra2FuIFBhc3N3b3JkOjwvYj5gKTsKICAgICAgICAgICAgYnJlYWs7Ci" +
  "AgICAgICAgICAgIAogICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzoKICAgICAgICAgICAgY29u" +
  "c3QgcGFzc3dvcmQgPSB0ZXh0LnRyaW0oKTsKICAgICAgICAgICAgaWYgKCFwYXNzd29yZC" +
  "kgewogICAgICAgICAgICAgICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgbWVzc2Fn" +
  "ZUlkLCBgJHtoZWFkZXJ94p2MIFBhc3N3b3JkIHRpZGFrIGJvbGVoIGtvc29uZyFcblxu8J" +
  "+UkCA8Yj5NYXN1a2thbiBQYXNzd29yZDo8L2I+YCk7CiAgICAgICAgICAgICAgICByZXR1" +
  "cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZGF0YS5sb2dpbkRhdGEucG" +
  "Fzc3dvcmQgPSBwYXNzd29yZDsKICAgICAgICAgICAgc3RhdGUuZGF0YS5sb2dpblN0ZXAg" +
  "PSAnY2ZfY2xlYXJhbmNlJzsKICAgICAgICAgICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKG" +
  "N0eCwgbWVzc2FnZUlkLCBgJHtoZWFkZXJ98J+RpCBVc2VyOiA8Y29kZT4ke3N0YXRlLmRh" +
  "dGEubG9naW5EYXRhLnVzZXJuYW1lfTwvY29kZT5cbvCflJEgUGFzczogPGNvZGU+KioqKi" +
  "oqKio8L2NvZGU+XG5cbvCfjaogPGI+TWFzdWtrYW4gQ0YgQ2xlYXJhbmNlOjwvYj5gKTsK" +
  "ICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIAogICAgICAgIGNhc2UgJ2NmX2NsZW" +
  "FyYW5jZSc6CiAgICAgICAgICAgIGNvbnN0IGNmVmFsdWUgPSB0ZXh0LnRyaW0oKTsKICAg" +
  "ICAgICAgICAgaWYgKGNmVmFsdWUubGVuZ3RoIDwgMTApIHsKICAgICAgICAgICAgICAgIG" +
  "F3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG1lc3NhZ2VJZCwgYCR7aGVhZGVyfeKdjCBD" +
  "b29raWUgdGVybGFsdSBwZW5kZWshXG5cbvCfjaogPGI+TWFzdWtrYW4gQ0YgQ2xlYXJhbm" +
  "NlOjwvYj5gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAg" +
  "ICAgICAgICB1cGRhdGVTZXR0aW5nU2lsZW50KCdJVkFTX1VTRVJOQU1FJywgc3RhdGUuZG" +
  "F0YS5sb2dpbkRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICB1cGRhdGVTZXR0aW5nU2ls" +
  "ZW50KCdJVkFTX1BBU1NXT1JEJywgc3RhdGUuZGF0YS5sb2dpbkRhdGEucGFzc3dvcmQpOw" +
  "ogICAgICAgICAgICB1cGRhdGVTZXR0aW5nU2lsZW50KCdDRl9DTEVBUkFOQ0VfVkFMVUUn" +
  "LCBjZlZhbHVlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IHNhZmVFZGl0TW" +
  "Vzc2FnZShjdHgsIG1lc3NhZ2VJZCwgYCR7aGVhZGVyfeKchSA8Yj5EYXRhIGJlcmhhc2ls" +
  "IGRpc2ltcGFuITwvYj5cblxu8J+UhCA8aT5NZW5jb2JhIGtvbmVrc2kgb3RvbWF0aXMuLi" +
  "48L2k+YCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgp" +
  "ID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3" +
  "Qgc3VjY2VzcyA9IGF3YWl0IGNvbm5lY3RSb2J1c3RMaXZlU21zKCk7CiAgICAgICAgICAg" +
  "ICAgICAgICAgY29uc3Qgc3RhdHVzTXNnID0gc3VjY2VzcyA/IGDinIUgPGI+TG9naW4gJi" +
  "BLb25la3NpIEJlcmhhc2lsITwvYj5gIDogYOKaoO+4jyA8Yj5EYXRhIHRlcnNpbXBhbiwg" +
  "a29uZWtzaSBnYWdhbC48L2I+YDsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYWZlRW" +
  "RpdE1lc3NhZ2UoY3R4LCBtZXNzYWdlSWQsIGA8YmxvY2txdW90ZT7wn5SRIFNUQVRVUyBM" +
  "T0dJTjwvYmxvY2txdW90ZT5cbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuJHtzdGF0dXNNc2d9XG5cbvCfkaQgVXNl" +
  "cjogJHtzZXR0aW5ncy5JVkFTX1VTRVJOQU1FfVxu8J+ToSBTTVM6ICR7aXNQb2xsaW5nQW" +
  "N0aXZlID8gJ0FLVElGJyA6ICdPRkYnfWApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAo" +
  "ZSkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG" +
  "1lc3NhZ2VJZCwgYDxibG9ja3F1b3RlPuKaoO+4jyBMT0dJTiBFUlJPUjwvYmxvY2txdW90" +
  "ZT5cbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgVxu4p2MIDxiPkVycm9yOjwvYj4gJHtlLm1lc3NhZ2V9YCk7CiAgICAg" +
  "ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNldFVzZXJTdGF0ZSh1c2VySWQpOw" +
  "ogICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg" +
  "IAogICAgICAgIGNhc2UgJ2NmX29ubHknOgogICAgICAgICAgICBjb25zdCBjZk9ubHlWYW" +
  "x1ZSA9IHRleHQudHJpbSgpOwogICAgICAgICAgICBpZiAoY2ZPbmx5VmFsdWUubGVuZ3Ro" +
  "IDwgMTApIHsKICAgICAgICAgICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG" +
  "1lc3NhZ2VJZCwgYDxibG9ja3F1b3RlPvCfjaogVVBEQVRFIENPT0tJRTwvYmxvY2txdW90" +
  "ZT5cbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgVxu4p2MIENvb2tpZSB0ZXJsYWx1IHBlbmRlayFcblxu8J+TiyA8Yj5N" +
  "YXN1a2thbiBDRiBDbGVhcmFuY2UgYmFydTo8L2I+YCk7CiAgICAgICAgICAgICAgICByZX" +
  "R1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXBkYXRlU2V0dGluZ1NpbGVudCgn" +
  "Q0ZfQ0xFQVJBTkNFX1ZBTFVFJywgY2ZPbmx5VmFsdWUpOwogICAgICAgICAgICBhd2FpdC" +
  "BzYWZlRWRpdE1lc3NhZ2UoY3R4LCBtZXNzYWdlSWQsIGA8YmxvY2txdW90ZT7wn42qIFVQ" +
  "REFURSBCRVJIQVNJTDwvYmxvY2txdW90ZT5cbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxu4pyFIENvb2tpZSBkaXBl" +
  "cmJhcnVpLlxuXG7wn5SEIDxpPk1lbmNvYmEga29uZWtzaS4uLjwvaT5gKTsKICAgICAgIC" +
  "AgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBz" +
  "dWNjZXNzID0gYXdhaXQgY29ubmVjdFJvYnVzdExpdmVTbXMoKTsKICAgICAgICAgICAgIC" +
  "AgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG1lc3NhZ2VJZCwgYDxibG9ja3F1b3Rl" +
  "PvCflIwgU1RBVFVTIEtPTkVLU0k8L2Jsb2NrcXVvdGU+XG7ilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblN0YXR1czog" +
  "JHtzdWNjZXNzID8gJ0Nvbm5lY3RlZCcgOiAnRmFpbGVkJ31cbvCfk6EgU01TOiAke2lzUG" +
  "9sbGluZ0FjdGl2ZSA/ICdBS1RJRicgOiAnT0ZGJ31gKTsKICAgICAgICAgICAgICAgIHJl" +
  "c2V0VXNlclN0YXRlKHVzZXJJZCk7CiAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIC" +
  "AgICBicmVhazsKICAgIH0KfTsKCmNvbnN0IGhhbmRsZVVzZXJBZ2VudFRleHQgPSBhc3lu" +
  "YyAoY3R4LCBzdGF0ZSwgdGV4dCkgPT4gewogICAgY29uc3QgdXNlcklkID0gY3R4LmZyb2" +
  "0uaWQ7CiAgICBjb25zdCB1c2VyQWdlbnQgPSB0ZXh0LnRyaW0oKTsKICAgIGNvbnN0IGhl" +
  "YWRlciA9IGA8YmxvY2txdW90ZT7wn5K7IFVTRVIgQUdFTlQgU0VUVVA8L2Jsb2NrcXVvdG" +
  "U+XG7ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHi" +
  "lIHilIHilIHilIFcbmA7CiAgICAKICAgIGlmICh1c2VyQWdlbnQubGVuZ3RoIDwgMjApIH" +
  "sKICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCBzdGF0ZS5kYXRhLm1lc3Nh" +
  "Z2VJZCwgYCR7aGVhZGVyfeKdjCA8Yj5Vc2VyIEFnZW50IHRlcmxhbHUgcGVuZGVrITwvYj" +
  "5cblxu8J+TnSA8Yj5LaXJpbSBVc2VyIEFnZW50IGJhcnU6PC9iPmApOwogICAgICAgIHJl" +
  "dHVybjsKICAgIH0KICAgIAogICAgdXBkYXRlU2V0dGluZ1NpbGVudCgnQ1VSUkVOVF9VU0" +
  "VSX0FHRU5UJywgdXNlckFnZW50KTsKICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgs" +
  "IHN0YXRlLmRhdGEubWVzc2FnZUlkLCBgJHtoZWFkZXJ94pyFIDxiPlVzZXIgQWdlbnQgZG" +
  "lwZXJiYXJ1aSE8L2I+XG5cbjxjb2RlPiR7dXNlckFnZW50LnN1YnN0cmluZygwLCA0MCl9" +
  "Li4uPC9jb2RlPlxuXG7wn5SEIDxpPlJlc3RhcnRpbmcgYnJvd3Nlci4uLjwvaT5gKTsKIC" +
  "AgIAogICAgcmVzZXRVc2VyU3RhdGUodXNlcklkKTsKICAgIHNldFRpbWVvdXQoYXN5bmMg" +
  "KCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChsaXZlU21zUGFnZSkgey" +
  "Bhd2FpdCBsaXZlU21zUGFnZS5jbG9zZSgpLmNhdGNoKCgpID0+IHt9KTsgbGl2ZVNtc1Bh" +
  "Z2UgPSBudWxsOyB9CiAgICAgICAgICAgIGxpdmVTbXNQYWdlID0gYXdhaXQgYnJvd3Nlci" +
  "5uZXdQYWdlKCk7CiAgICAgICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLnNldFVzZXJBZ2Vu" +
  "dCh1c2VyQWdlbnQpOwogICAgICAgICAgICBpZiAoc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1" +
  "ZBTFVFKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBsaXZlU21zUGFnZS5zZXRDb29raWUo" +
  "eyBuYW1lOiAnY2ZfY2xlYXJhbmNlJywgdmFsdWU6IHNldHRpbmdzLkNGX0NMRUFSQU5DRV" +
  "9WQUxVRSwgZG9tYWluOiAnLml2YXNtcy5jb20nIH0pOwogICAgICAgICAgICB9CiAgICAg" +
  "ICAgICAgIGF3YWl0IGxpdmVTbXNQYWdlLmdvdG8oTElWRV9TTVNfVVJMLCB7IHdhaXRVbn" +
  "RpbDogJ2RvbWNvbnRlbnRsb2FkZWQnLCB0aW1lb3V0OiAzMDAwMCB9KTsKICAgICAgICB9" +
  "IGNhdGNoIChlKSB7fQogICAgfSwgMTAwMCk7Cn07Cgpjb25zdCBoYW5kbGVDVlRleHQgPS" +
  "Bhc3luYyAoY3R4LCBzdGF0ZSwgdGV4dCkgPT4gewogICAgY29uc3QgdXNlcklkID0gY3R4" +
  "LmZyb20uaWQ7CiAgICBjb25zdCBoZWFkZXIgPSBgPGJsb2NrcXVvdGU+8J+TgSBDT05WRV" +
  "JUIFNUQVRVUzwvYmxvY2txdW90ZT5cbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKU" +
  "geKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuYDsKICAgIAogICAgaWYgKHN0YX" +
  "RlLnN0ZXAgPT09ICdhd2FpdGluZ19hbGxfc2VydmljZV9pbnB1dCcpIHsKICAgICAgICBj" +
  "b25zdCBzZXJ2aWNlTmFtZSA9IHRleHQudHJpbSgpOwogICAgICAgIGlmICghc2VydmljZU" +
  "5hbWUpIHsKICAgICAgICAgICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgc3RhdGUu" +
  "ZGF0YS5tZXNzYWdlSWQsIGAke2hlYWRlcn3inYwgTmFtYSBTZXJ2aWNlIGtvc29uZyFcbl" +
  "xuTWFzdWtrYW4gbmFtYSBzZXJ2aWNlLmApOwogICAgICAgICAgICByZXR1cm47CiAgICAg" +
  "ICAgfQogICAgICAgIHN0YXRlLmRhdGEuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTsKIC" +
  "AgICAgICBzdGF0ZS5kYXRhLmZpbGVMaXN0LmZvckVhY2goZmlsZSA9PiBmaWxlLnNlcnZp" +
  "Y2VOYW1lID0gc2VydmljZU5hbWUpOwogICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZS" +
  "hjdHgsIHN0YXRlLmRhdGEubWVzc2FnZUlkLCBgJHtoZWFkZXJ94pyFIFNlcnZpY2U6IDxi" +
  "PiR7c2VydmljZU5hbWV9PC9iPlxu8J+TpiBGaWxlOiAke3N0YXRlLmRhdGEuZmlsZUxpc3" +
  "QubGVuZ3RofVxuXG7ij7MgPGk+TWVtcHJvc2VzIGtvbnZlcnNpLi4uPC9pPmApOwogICAg" +
  "ICAgIGF3YWl0IHNlbmRDb252ZXJ0ZWRGaWxlcyhjdHgsIHN0YXRlLmRhdGEpOwogICAgIC" +
  "AgIHJlc2V0VXNlclN0YXRlKHVzZXJJZCk7CiAgICAgICAgCiAgICB9IGVsc2UgaWYgKHN0" +
  "YXRlLnN0ZXAgPT09ICdhd2FpdGluZ19zaW5nbGVfc2VydmljZV9pbnB1dCcpIHsKICAgIC" +
  "AgICBjb25zdCBzZXJ2aWNlTmFtZSA9IHRleHQudHJpbSgpOwogICAgICAgIGNvbnN0IGN1" +
  "cnJlbnRJbmRleCA9IHN0YXRlLmRhdGEuY3VycmVudEZpbGVJbmRleDsKICAgICAgICBpZi" +
  "AoIXNlcnZpY2VOYW1lKSB7CiAgICAgICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShj" +
  "dHgsIHN0YXRlLmRhdGEubWVzc2FnZUlkLCBgJHtoZWFkZXJ94p2MIE5hbWEgU2VydmljZS" +
  "Brb3NvbmchXG5cbklucHV0IHNlcnZpY2UgdW50dWsgZmlsZSBrZS0ke2N1cnJlbnRJbmRl" +
  "eCArIDF9LmApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHN0YX" +
  "RlLmRhdGEuZmlsZUxpc3RbY3VycmVudEluZGV4XS5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VO" +
  "YW1lOwogICAgICAgIGlmIChjdXJyZW50SW5kZXggKyAxIDwgc3RhdGUuZGF0YS5maWxlTG" +
  "lzdC5sZW5ndGgpIHsKICAgICAgICAgICAgc3RhdGUuZGF0YS5jdXJyZW50RmlsZUluZGV4" +
  "Kys7CiAgICAgICAgICAgIGNvbnN0IG5leHRGaWxlID0gc3RhdGUuZGF0YS5maWxlTGlzdF" +
  "tzdGF0ZS5kYXRhLmN1cnJlbnRGaWxlSW5kZXhdOwogICAgICAgICAgICBhd2FpdCBzYWZl" +
  "RWRpdE1lc3NhZ2UoY3R4LCBzdGF0ZS5kYXRhLm1lc3NhZ2VJZCwgYCR7aGVhZGVyfeKchS" +
  "BTZXJ2aWNlICR7Y3VycmVudEluZGV4ICsgMX0gZGlzaW1wYW4uXG5cbvCfk50gSW5wdXQg" +
  "c2VydmljZSB1bnR1ayBmaWxlIGtlLSR7c3RhdGUuZGF0YS5jdXJyZW50RmlsZUluZGV4IC" +
  "sgMX06XG4ke25leHRGaWxlLmNvdW50cnl9ICgke25leHRGaWxlLmNvdW50fSBObylgKTsK" +
  "ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3" +
  "R4LCBzdGF0ZS5kYXRhLm1lc3NhZ2VJZCwgYCR7aGVhZGVyfeKchSBTZW11YSBzZXJ2aWNl" +
  "IGRpaXNpIVxuXG7ij7MgPGk+TWVtcHJvc2VzIGtvbnZlcnNpLi4uPC9pPmApOwogICAgIC" +
  "AgICAgICBhd2FpdCBzZW5kQ29udmVydGVkRmlsZXMoY3R4LCBzdGF0ZS5kYXRhKTsKICAg" +
  "ICAgICAgICAgcmVzZXRVc2VyU3RhdGUodXNlcklkKTsKICAgICAgICB9CiAgICB9Cn07Cm" +
  "JvdC5hY3Rpb24oJ2xvZ2luX3RyeV9jb25uZWN0Jywgb3duZXJPbmx5LCBhc3luYyAoY3R4" +
  "KSA9PiB7CiAgICBhd2FpdCBjdHguYW5zd2VyQ2JRdWVyeSgnTWVtdWxhaSBwcm9zZXMga2" +
  "9uZWtzaS4uLicpOwogICAgY29uc3QgbWVzc2FnZUlkID0gY3R4LmNhbGxiYWNrUXVlcnku" +
  "bWVzc2FnZS5tZXNzYWdlX2lkOwoKICAgIC8vIFVwZGF0ZSBwZXNhbiBkZW5nYW4gcHJvZ3" +
  "Jlc3MgYmFyCiAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3NhZ2VUZXh0KAogICAg" +
  "ICAgIGN0eC5jaGF0LmlkLAogICAgICAgIG1lc3NhZ2VJZCwKICAgICAgICBudWxsLAogIC" +
  "AgICAgIGA8YmxvY2txdW90ZT7wn5SMIFBST1NFUyBLT05FS1NJPC9ibG9ja3F1b3RlPlxu" +
  "YCArCiAgICAgICAgYOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgVxuYCArCiAgICAgICAgYFvilpHilpHilpHilpHilpHi" +
  "lpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpFdIDAlYCwKIC" +
  "AgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgICApOwoKICAgIC8vIEphbGFua2Fu" +
  "IGtvbmVrc2kgZGkgYmFja2dyb3VuZAogICAgc2V0SW1tZWRpYXRlKGFzeW5jICgpID0+IH" +
  "sKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBTdGVwIDE6IFBlcnNpYXBhbgogICAg" +
  "ICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3NhZ2VUZXh0KAogICAgICAgIC" +
  "AgICAgICAgY3R4LmNoYXQuaWQsCiAgICAgICAgICAgICAgICBtZXNzYWdlSWQsCiAgICAg" +
  "ICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgYDxibG9ja3F1b3RlPvCflIwgUF" +
  "JPU0VTIEtPTkVLU0k8L2Jsb2NrcXVvdGU+XG5gICsKICAgICAgICAgICAgICAgIGDilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIFcbmAgKwogICAgICAgICAgICAgICAgYFvilojilojilojilojilojilojilojiloji" +
  "lpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilpFdIDMzJWAsCiAgICAgICAgIC" +
  "AgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgICAgICAgICAgICk7CgogICAgICAg" +
  "ICAgICAvLyBTdGVwIDI6IFByb3NlcyBrb25la3NpCiAgICAgICAgICAgIGF3YWl0IG5ldy" +
  "BQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAg" +
  "ICAgICAgIAogICAgICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3NhZ2VUZX" +
  "h0KAogICAgICAgICAgICAgICAgY3R4LmNoYXQuaWQsCiAgICAgICAgICAgICAgICBtZXNz" +
  "YWdlSWQsCiAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgYDxibG9ja3" +
  "F1b3RlPvCflIwgUFJPU0VTIEtPTkVLU0k8L2Jsb2NrcXVvdGU+XG5gICsKICAgICAgICAg" +
  "ICAgICAgIGDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIHilIFcbmAgKwogICAgICAgICAgICAgICAgYFvilojilojilojiloji" +
  "lojilojilojilojilojilojilojilojilojilojilojilojilpHilpHilpHilpFdIDY2JW" +
  "AsCiAgICAgICAgICAgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgICAgICAgICAg" +
  "ICk7CgogICAgICAgICAgICAvLyBFa3Nla3VzaSBmdW5nc2kga29uZWtzaQogICAgICAgIC" +
  "AgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgY29ubmVjdFJvYnVzdExpdmVTbXMoKTsKICAg" +
  "ICAgICAgICAgCiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgIC" +
  "Bjb25zdCBjdXJyZW50VXJsID0gbGl2ZVNtc1BhZ2UgPyBhd2FpdCBsaXZlU21zUGFnZS51" +
  "cmwoKSA6ICdOL0EnOwogICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBpc1BvbG" +
  "xpbmdBY3RpdmUgPyAn4pyFIEFLVElGJyA6ICfinYwgTk9OLUFLVElGJzsKICAgICAgICAg" +
  "ICAgICAgIGNvbnN0IGlzU3RhYmxlID0gaXNDb25uZWN0aW9uU3RhYmxlID8gJ+KchSBTVE" +
  "FCSUwnIDogJ+KaoO+4jyBUSURBSyBTVEFCSUwnOwogICAgICAgICAgICAgICAgCiAgICAg" +
  "ICAgICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3NhZ2VUZXh0KAogICAgIC" +
  "AgICAgICAgICAgICAgIGN0eC5jaGF0LmlkLAogICAgICAgICAgICAgICAgICAgIG1lc3Nh" +
  "Z2VJZCwKICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgIG" +
  "A8YmxvY2txdW90ZT7wn5SMIEtPTkVLU0kgQkVSSEFTSUw8L2Jsb2NrcXVvdGU+XG5gICsK" +
  "ICAgICAgICAgICAgICAgICAgICBg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5gICsKICAgICAgICAgICAgICAgICAg" +
  "ICBg4pyFIDxiPlN0YXR1cyBLb25la3NpOjwvYj4gVEVSSFVCVU5HXG5gICsKICAgICAgIC" +
  "AgICAgICAgICAgICBg8J+TiiA8Yj5TdGF0dXMgQm90OjwvYj4gJHtib3RTdGF0dXN9XG5g" +
  "ICsKICAgICAgICAgICAgICAgICAgICBg8J+MkCA8Yj5VUkw6PC9iPiA8Y29kZT4ke2N1cn" +
  "JlbnRVcmx9PC9jb2RlPlxuYCArCiAgICAgICAgICAgICAgICAgICAgYPCfk6EgPGI+TGl2" +
  "ZSBTTVM6PC9iPiAke2lzQWN0aXZlfVxuYCArCiAgICAgICAgICAgICAgICAgICAgYOKaoS" +
  "A8Yj5TdGFiaWxpdGFzOjwvYj4gJHtpc1N0YWJsZX1cbmAgKwogICAgICAgICAgICAgICAg" +
  "ICAgIGDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIFcbmAgKwogICAgICAgICAgICAgICAgICAgIGDwn5WQIDxiPldha3R1" +
  "OjwvYj4gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygnaWQtSUQnKX1cbmAsCi" +
  "AgICAgICAgICAgICAgICAgICAgeyBwYXJzZV9tb2RlOiAnSFRNTCcgfQogICAgICAgICAg" +
  "ICAgICAgKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IGVsc2UgewogICAgIC" +
  "AgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdLb25la3NpIGdhZ2FsIC0gZnVuZ3NpIGNv" +
  "bm5lY3RSb2J1c3RMaXZlU21zIG1lbmdlbWJhbGlrYW4gZmFsc2UnKTsKICAgICAgICAgIC" +
  "AgfQogICAgICAgICAgICAKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAg" +
  "ICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZChgW0FDVElPTl0g4p2MIEVycm9yIGtvbmVrc2" +
  "k6ICR7ZXJyb3IubWVzc2FnZX1gKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQg" +
  "c3VnZ2VzdGlvbnMgPSAnJzsKICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbH" +
  "VkZXMoJ0Nsb3VkZmxhcmUnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdDRicpKSB7" +
  "CiAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucyA9ICcxLiBHdW5ha2FuIC9sb2dpbiB1bn" +
  "R1ayB1cGRhdGUgQ0YgQ2xlYXJhbmNlXG4yLiBBbWJpbCBjb29raWUgY2ZfY2xlYXJhbmNl" +
  "IHRlcmJhcnVcbjMuIENvYmEgYWtzZXMgbWFudWFsIGRpIGJyb3dzZXInOwogICAgICAgIC" +
  "AgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2xvZ2luJykgfHwgZXJy" +
  "b3IubWVzc2FnZS5pbmNsdWRlcygnY3JlZGVudGlhbCcpKSB7CiAgICAgICAgICAgICAgIC" +
  "BzdWdnZXN0aW9ucyA9ICcxLiBQYXN0aWthbiB1c2VybmFtZS9wYXNzd29yZCBiZW5hclxu" +
  "Mi4gR3VuYWthbiAvbG9naW4gdW50dWsgc2V0dXAgdWxhbmdcbjMuIENlayBrb25la3NpIG" +
  "ludGVybmV0JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN1Z2dl" +
  "c3Rpb25zID0gJzEuIENvYmEgL2xvZ2luIHVsYW5nXG4yLiBSZXN0YXJ0IGJvdFxuMy4gSH" +
  "VidW5naSBkZXZlbG9wZXInOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAg" +
  "ICAgICBhd2FpdCBjdHgudGVsZWdyYW0uZWRpdE1lc3NhZ2VUZXh0KAogICAgICAgICAgIC" +
  "AgICAgY3R4LmNoYXQuaWQsCiAgICAgICAgICAgICAgICBtZXNzYWdlSWQsCiAgICAgICAg" +
  "ICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgYDxibG9ja3F1b3RlPuKdjCBLT05FS1" +
  "NJIEdBR0FMPC9ibG9ja3F1b3RlPlxuYCArCiAgICAgICAgICAgICAgICBg4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG" +
  "5gICsKICAgICAgICAgICAgICAgIGDimqDvuI8gPGI+RXJyb3I6PC9iPiA8Y29kZT4ke2Vy" +
  "cm9yLm1lc3NhZ2V9PC9jb2RlPlxuXG5gICsKICAgICAgICAgICAgICAgIGDwn5SnIDxiPl" +
  "NhcmFuIFBlcmJhaWthbjo8L2I+XG4ke3N1Z2dlc3Rpb25zfVxuXG5gICsKICAgICAgICAg" +
  "ICAgICAgIGDwn5SEIDxpPlNpbGFrYW4gY29iYSBsYWdpIGF0YXUgZ3VuYWthbiAvbG9naW" +
  "48L2k+YCwKICAgICAgICAgICAgICAgIHsgcGFyc2VfbW9kZTogJ0hUTUwnIH0KICAgICAg" +
  "ICAgICAgKTsKICAgICAgICB9CiAgICB9KTsKfSk7CgovLyA9PT09PT09PT09PT09PT09PT" +
  "09PT09PT09PT09PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBURVhUIEhBTkRMRVIgPT09" +
  "PT09PT09PT09IC8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS" +
  "AvLwoKYm90Lm9uKCd0ZXh0Jywgb3duZXJPbmx5LCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7" +
  "CiAgICBjb25zdCB1c2VySWQgPSBjdHguZnJvbS5pZDsKICAgIGNvbnN0IHRleHQgPSBjdH" +
  "gubWVzc2FnZS50ZXh0LnRyaW0oKTsKICAgIGNvbnN0IHN0YXRlID0gZ2V0VXNlclN0YXRl" +
  "KHVzZXJJZCk7CgogICAgaWYgKHRleHQuc3RhcnRzV2l0aCgnLycpKSByZXR1cm4gbmV4dC" +
  "gpOwogICAgaWYgKCFzdGF0ZSB8fCAhc3RhdGUuc3RlcCkgcmV0dXJuIG5leHQoKTsKCiAg" +
  "ICB0cnkgewogICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5kZWxldGVNZXNzYWdlKGN0eC" +
  "5jaGF0LmlkLCBjdHgubWVzc2FnZS5tZXNzYWdlX2lkKS5jYXRjaCgoKSA9PiB7fSk7CiAg" +
  "ICB9IGNhdGNoIChlKSB7fQoKICAgIHRyeSB7CiAgICAgICAgc3dpdGNoIChzdGF0ZS50eX" +
  "BlKSB7CiAgICAgICAgICAgIGNhc2UgJ0xPR0lOJzogYXdhaXQgaGFuZGxlTG9naW5UZXh0" +
  "KGN0eCwgc3RhdGUsIHRleHQpOyBicmVhazsKICAgICAgICAgICAgY2FzZSAnVVNFUl9BR0" +
  "VOVCc6IGF3YWl0IGhhbmRsZVVzZXJBZ2VudFRleHQoY3R4LCBzdGF0ZSwgdGV4dCk7IGJy" +
  "ZWFrOwogICAgICAgICAgICBjYXNlICdDVic6IGF3YWl0IGhhbmRsZUNWVGV4dChjdHgsIH" +
  "N0YXRlLCB0ZXh0KTsgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6IHJlc2V0VXNlclN0" +
  "YXRlKHVzZXJJZCk7IHJldHVybiBuZXh0KCk7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZX" +
  "Jyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZChgW1RFWFQgSEFORExF" +
  "Ul0gRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKSk7CiAgICAgICAgdHJ5IHsKICAgICAgIC" +
  "AgICAgYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwoCiAgICAgICAgICAgICAgICBgPGJsb2Nr" +
  "cXVvdGU+4pqg77iPIEVSUk9SIFNZU1RFTTwvYmxvY2txdW90ZT5cbuKUgeKUgeKUgeKUge" +
  "KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxu4p2M" +
  "IDxiPkVycm9yOjwvYj4gJHtlcnJvci5tZXNzYWdlfVxuXG48aT5VbGFuZ2kgcGVyaW50YW" +
  "ggZGFyaSBhd2FsLjwvaT5gLCAKICAgICAgICAgICAgICAgIHsgcmVwbHlfdG9fbWVzc2Fn" +
  "ZV9pZDogY3R4Lm1lc3NhZ2UubWVzc2FnZV9pZCB9CiAgICAgICAgICAgICk7CiAgICAgIC" +
  "AgfSBjYXRjaCAoZSkge30KICAgICAgICByZXNldFVzZXJTdGF0ZSh1c2VySWQpOwogICAg" +
  "fQp9KTsKCgoKLy8gPT09PT09PT09PSBDViBGSUxFIFNZU1RFTSA9PT09PT09PT09IC8vCi" +
  "8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwoKY29uc3QgcmVh" +
  "ZENvbnRhY3RzID0gKGxvY2FsUGF0aCwgdHlwZSkgPT4gewogICAgaWYgKCFmcy5leGlzdH" +
  "NTeW5jKGxvY2FsUGF0aCkpIHJldHVybiBbXTsKICAgIGNvbnN0IGNvbnRhY3RzID0gW107" +
  "CgogICAgaWYgKHR5cGUgPT09ICdjc3YnIHx8IHR5cGUgPT09ICd0eHQnKSB7CiAgICAgIC" +
  "AgbGV0IGZpbGVDb250ZW50ID0gJyc7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZmls" +
  "ZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobG9jYWxQYXRoLCAndXRmOCcpOwogICAgIC" +
  "AgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgIH0KCiAg" +
  "ICAgICAgbGV0IGxpbmVzID0gZmlsZUNvbnRlbnQudHJpbSgpLnNwbGl0KCdcbicpOwogIC" +
  "AgICAgIGNvbnN0IEZJUlNUX0RBVEFfUk9XX0lOREVYID0gMDsKICAgICAgICBpZiAobGlu" +
  "ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gW107CgogICAgICAgIGxldCBwaG9uZUNvbHVtbk" +
  "luZGV4ID0gLTE7CiAgICAgICAgbGV0IGZpbmFsU2VwYXJhdG9yID0gJywnOwogICAgICAg" +
  "IGxldCBtYXhWYWxpZENvdW50ID0gLTE7CgogICAgICAgIGNvbnN0IHBvc3NpYmxlU2VwYX" +
  "JhdG9ycyA9IFsnLCcsICdcdCcsICc7JywgJ3wnXTsKICAgICAgICBjb25zdCBtYXhSb3dz" +
  "Q2hlY2sgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIDUwKTsKCiAgICAgICAgZm9yIChjb2" +
  "5zdCBjdXJyZW50U2VwIG9mIHBvc3NpYmxlU2VwYXJhdG9ycykgewogICAgICAgICAgICBs" +
  "ZXQgbWF4Q29scyA9IDA7CiAgICAgICAgICAgIGZvcihsZXQgaSA9IEZJUlNUX0RBVEFfUk" +
  "9XX0lOREVYOyBpIDwgbWF4Um93c0NoZWNrOyBpKyspIHsKICAgICAgICAgICAgICAgICBj" +
  "b25zdCByb3dDb2xzID0gbGluZXNbaV0udHJpbSgpLnNwbGl0KGN1cnJlbnRTZXApOwogIC" +
  "AgICAgICAgICAgICAgIG1heENvbHMgPSBNYXRoLm1heChtYXhDb2xzLCByb3dDb2xzLmxl" +
  "bmd0aCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAobGV0IGNvbEluZGV4ID" +
  "0gMDsgY29sSW5kZXggPCBtYXhDb2xzOyBjb2xJbmRleCsrKSB7CiAgICAgICAgICAgICAg" +
  "ICBsZXQgdmFsaWRDb3VudCA9IDA7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IE" +
  "ZJUlNUX0RBVEFfUk9XX0lOREVYOyBpIDwgbWF4Um93c0NoZWNrOyBpKyspIHsKICAgICAg" +
  "ICAgICAgICAgICAgICBjb25zdCByb3dDb2xzID0gbGluZXNbaV0udHJpbSgpLnNwbGl0KG" +
  "N1cnJlbnRTZXApOwogICAgICAgICAgICAgICAgICAgIGlmIChyb3dDb2xzLmxlbmd0aCA+" +
  "IGNvbEluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xpa2VseVBob2" +
  "5lTnVtYmVyKHJvd0NvbHNbY29sSW5kZXhdKSkgewogICAgICAgICAgICAgICAgICAgICAg" +
  "ICAgICAgdmFsaWRDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgIC" +
  "AgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlm" +
  "ICh2YWxpZENvdW50ID49IDUgJiYgdmFsaWRDb3VudCA+IG1heFZhbGlkQ291bnQpIHsKIC" +
  "AgICAgICAgICAgICAgICAgICBtYXhWYWxpZENvdW50ID0gdmFsaWRDb3VudDsKICAgICAg" +
  "ICAgICAgICAgICAgICBwaG9uZUNvbHVtbkluZGV4ID0gY29sSW5kZXg7CiAgICAgICAgIC" +
  "AgICAgICAgICAgZmluYWxTZXBhcmF0b3IgPSBjdXJyZW50U2VwOwogICAgICAgICAgICAg" +
  "ICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGhvbmVDb2x1bW" +
  "5JbmRleCA9PT0gLTEgfHwgbWF4VmFsaWRDb3VudCA8PSAwKSB7CiAgICAgICAgICAgIHJl" +
  "dHVybiBbXTsKICAgICAgICB9CgogICAgICAgIGxldCBzZXBhcmF0b3IgPSBmaW5hbFNlcG" +
  "FyYXRvcjsKCiAgICAgICAgZm9yKGxldCBpID0gRklSU1RfREFUQV9ST1dfSU5ERVg7IGkg" +
  "PCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZX" +
  "NbaV07CiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7Cgog" +
  "ICAgICAgICAgICBpZiAodHJpbW1lZExpbmUubGVuZ3RoIDwgOCB8fCB0cmltbWVkTGluZS" +
  "5tYXRjaCgvXlssXFxzXFx0XSokLykpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwog" +
  "ICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBjb2x1bW5zID0gdHJpbW1lZExpbm" +
  "Uuc3BsaXQoc2VwYXJhdG9yKTsKCiAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+" +
  "IHBob25lQ29sdW1uSW5kZXgpIHsKICAgICAgICAgICAgICAgIGxldCByYXdOdW1iZXIgPS" +
  "Bjb2x1bW5zW3Bob25lQ29sdW1uSW5kZXhdLnRyaW0oKS5yZXBsYWNlKC9bXjAtOStdL2cs" +
  "ICcnKTsKCiAgICAgICAgICAgICAgICBpZiAocmF3TnVtYmVyLmxlbmd0aCA+PSA4KSB7Ci" +
  "AgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBnZXRDb3VudHJ5SW5m" +
  "byhyYXdOdW1iZXIpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRyeU5hbWUgIT" +
  "09ICJVTktOT1dOIikgewogICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0cy5wdXNo" +
  "KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogcmF3TnVtYmVyLnN0YX" +
  "J0c1dpdGgoJysnKSA/IHJhd051bWJlci5zdWJzdHJpbmcoMSkgOiByYXdOdW1iZXIsCiAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBjb3VudHJ5TmFtZS50b1VwcG" +
  "VyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJycKICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIC" +
  "AgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KICAgIGVsc2UgaWYg" +
  "KHR5cGUgPT09ICd2Y2YnKSB7CiAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gZnMucmVhZE" +
  "ZpbGVTeW5jKGxvY2FsUGF0aCwgJ3V0ZjgnKTsKICAgICAgICBjb25zdCBsaW5lcyA9IGZp" +
  "bGVDb250ZW50LnRyaW0oKS5zcGxpdCgnXG4nKTsKCiAgICAgICAgY29uc3QgdGVsUmVnZX" +
  "ggPSAvVEVMOyg/OlRZUEU9Q0VMTHxUWVBFPVdPUkt8VFlQRT1IT01FfFRZUEU9Vk9JQ0V8" +
  "Vk9JQ0V8Q0VMTHxXT1JLfEhPTUUpOihbK10qXGQrKS9pOwoKICAgICAgICBsaW5lcy5mb3" +
  "JFYWNoKGxpbmUgPT4gewogICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2go" +
  "dGVsUmVnZXgpOwogICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgIG" +
  "xldCByYXdOdW1iZXIgPSBtYXRjaFsxXS50cmltKCkucmVwbGFjZSgvW14wLTkrXS9nLCAn" +
  "Jyk7CgogICAgICAgICAgICAgICAgaWYgKHJhd051bWJlci5zdGFydHNXaXRoKCcrJykpIH" +
  "sKICAgICAgICAgICAgICAgICAgICByYXdOdW1iZXIgPSByYXdOdW1iZXIuc3Vic3RyaW5n" +
  "KDEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyYXdOdW1iZX" +
  "IubGVuZ3RoID49IDkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudHJ5TmFt" +
  "ZSA9IGdldENvdW50cnlJbmZvKHJhd051bWJlcik7CgogICAgICAgICAgICAgICAgICAgIG" +
  "lmIChjb3VudHJ5TmFtZSAhPT0gIlVOS05PV04iKSB7CiAgICAgICAgICAgICAgICAgICAg" +
  "ICAgIGNvbnRhY3RzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYm" +
  "VyOiByYXdOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBj" +
  "b3VudHJ5TmFtZS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgIC" +
  "AgbmFtZTogJycKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAg" +
  "ICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7Ci" +
  "AgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAneGxzeCcpIHsKICAgICAgICB0cnkgewog" +
  "ICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZEZpbGUobG9jYWxQYXRoKT" +
  "sKICAgICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gd29ya2Jvb2suU2hlZXROYW1lc1sw" +
  "XTsKICAgICAgICAgICAgY29uc3Qgd29ya3NoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3NoZW" +
  "V0TmFtZV07CgogICAgICAgICAgICBjb25zdCBqc29uID0gWExTWC51dGlscy5zaGVldF90" +
  "b19qc29uKHdvcmtzaGVldCwgeyBoZWFkZXI6IDEgfSk7CgogICAgICAgICAgICBpZiAoan" +
  "Nvbi5sZW5ndGggPT09IDApIHJldHVybiBbXTsKCiAgICAgICAgICAgIGxldCBwaG9uZUNv" +
  "bHVtbkluZGV4ID0gLTE7CiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gMDsKICAgIC" +
  "AgICAgICAgbGV0IG1heFZhbGlkQ291bnQgPSAwOwogICAgICAgICAgICBjb25zdCBtYXhD" +
  "b2xzID0ganNvbi5yZWR1Y2UoKG1heCwgcm93KSA9PiBNYXRoLm1heChtYXgsIHJvdy5sZW" +
  "5ndGgpLCAwKTsKICAgICAgICAgICAgY29uc3QgbWF4Um93c0NoZWNrID0gTWF0aC5taW4o" +
  "anNvbi5sZW5ndGgsIDUwKTsKCiAgICAgICAgICAgIGZvciAobGV0IGNvbEluZGV4ID0gMD" +
  "sgY29sSW5kZXggPCBtYXhDb2xzOyBjb2xJbmRleCsrKSB7CiAgICAgICAgICAgICAgICBs" +
  "ZXQgdmFsaWRDb3VudCA9IDA7CiAgICAgICAgICAgICAgICBsZXQgZmlyc3REYXRhUm93ID" +
  "0gLTE7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhSb3dzQ2hl" +
  "Y2s7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGpzb25baV07Ci" +
  "AgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5sZW5ndGggPiBjb2xJbmRleCkgewogICAg" +
  "ICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBTdHJpbmcocm93W2NvbE" +
  "luZGV4XSB8fCAnJykudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNM" +
  "aWtlbHlQaG9uZU51bWJlcihjZWxsVmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgIC" +
  "AgICAgICB2YWxpZENvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo" +
  "Zmlyc3REYXRhUm93ID09PSAtMSkgZmlyc3REYXRhUm93ID0gaTsKICAgICAgICAgICAgIC" +
  "AgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0K" +
  "CiAgICAgICAgICAgICAgICBpZiAodmFsaWRDb3VudCA+PSA1ICYmIHZhbGlkQ291bnQgPi" +
  "BtYXhWYWxpZENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgbWF4VmFsaWRDb3VudCA9" +
  "IHZhbGlkQ291bnQ7CiAgICAgICAgICAgICAgICAgICAgcGhvbmVDb2x1bW5JbmRleCA9IG" +
  "NvbEluZGV4OwogICAgICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBmaXJzdERhdGFS" +
  "b3c7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIC" +
  "hwaG9uZUNvbHVtbkluZGV4ID09PSAtMSB8fCBtYXhWYWxpZENvdW50ID09PSAwKSB7CiAg" +
  "ICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9CgogICAgICAgICAgIC" +
  "Bmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGpzb24ubGVuZ3RoOyBpKyspIHsKICAg" +
  "ICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGpzb25baV07CiAgICAgICAgICAgICAgICBpZi" +
  "Aocm93Lmxlbmd0aCA+IHBob25lQ29sdW1uSW5kZXgpIHsKICAgICAgICAgICAgICAgICAg" +
  "ICBsZXQgcmF3TnVtYmVyID0gU3RyaW5nKHJvd1twaG9uZUNvbHVtbkluZGV4XSB8fCAnJy" +
  "kudHJpbSgpLnJlcGxhY2UoL1teMC05K10vZywgJycpOwoKICAgICAgICAgICAgICAgICAg" +
  "ICBpZiAocmF3TnVtYmVyLmxlbmd0aCA+PSA4KSB7CiAgICAgICAgICAgICAgICAgICAgIC" +
  "AgIGNvbnN0IGNvdW50cnlOYW1lID0gZ2V0Q291bnRyeUluZm8ocmF3TnVtYmVyKTsKCiAg" +
  "ICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudHJ5TmFtZSAhPT0gIlVOS05PV04iKS" +
  "B7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0cy5wdXNoKHsKICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHJhd051bWJlci5zdGFydHNXaX" +
  "RoKCcrJykgPyByYXdOdW1iZXIuc3Vic3RyaW5nKDEpIDogcmF3TnVtYmVyLAogICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IGNvdW50cnlOYW1lLnRvVXBwZX" +
  "JDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJycKICAg" +
  "ICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgIC" +
  "B9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAg" +
  "ICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKC" +
  "JbU1RBVFVTXSBFcnJvciByZWFkaW5nIFhMU1g6IiwgZSk7CiAgICAgICAgICAgIHJldHVy" +
  "biBbXTsKICAgICAgICB9CiAgICB9CgogICAgY29uc3QgdW5pcXVlQ29udGFjdHMgPSBBcn" +
  "JheS5mcm9tKG5ldyBNYXAoY29udGFjdHMubWFwKGl0ZW0gPT4gW2l0ZW0ubnVtYmVyLCBp" +
  "dGVtXSkpLnZhbHVlcygpKTsKICAgIHJldHVybiB1bmlxdWVDb250YWN0czsKfTsKCmNvbn" +
  "N0IGdldENvdW50cnlEYXRhID0gKGNvbnRhY3RzKSA9PiB7CiAgICBjb25zdCBjb3VudHJ5" +
  "RGF0YSA9IHt9OwogICAgY29uc3QgY291bnRyeUxpc3QgPSBbXTsKICAgIAogICAgY29udG" +
  "FjdHMuZm9yRWFjaChjb250YWN0ID0+IHsKICAgICAgICBpZiAoIWNvdW50cnlEYXRhW2Nv" +
  "bnRhY3QuY291bnRyeV0pIHsKICAgICAgICAgICAgY291bnRyeURhdGFbY29udGFjdC5jb3" +
  "VudHJ5XSA9IDA7CiAgICAgICAgfQogICAgICAgIGNvdW50cnlEYXRhW2NvbnRhY3QuY291" +
  "bnRyeV0rKzsKICAgIH0pOwogICAgCiAgICBPYmplY3Qua2V5cyhjb3VudHJ5RGF0YSkuZm" +
  "9yRWFjaChjb3VudHJ5ID0+IHsKICAgICAgICBjb3VudHJ5TGlzdC5wdXNoKGAke2dldENv" +
  "dW50cnlGbGFnKGNvdW50cnkpfSAke2NvdW50cnl9OiAke2NvdW50cnlEYXRhW2NvdW50cn" +
  "ldfSBOdW1iZXJgKTsKICAgIH0pOwogICAgCiAgICByZXR1cm4gewogICAgICAgIGRhdGE6" +
  "IGNvdW50cnlEYXRhLAogICAgICAgIGxpc3Q6IGNvdW50cnlMaXN0LmpvaW4oJ1xuJykKIC" +
  "AgIH07Cn07Cgpjb25zdCBwcm9jZXNzQ29udGFjdHMgPSAoY29udGFjdHMsIHRhcmdldFR5" +
  "cGUsIHNwbGl0QnlDb3VudHJ5LCBjb3VudHJ5RGF0YU1hcCkgPT4gewogICAgZnMubWtkaX" +
  "JTeW5jKFRFTVBfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgIGNvbnN0IHJlc3Vs" +
  "dHMgPSBbXTsKCiAgICBjb25zdCB3cml0ZUNvbnRhY3RGaWxlID0gKGNvdW50cnlOYW1lLC" +
  "BsaXN0Q29udGFjdHMpID0+IHsKICAgICAgICBjb25zdCBjb3VudHJ5RmlsZU5hbWUgPSBj" +
  "b3VudHJ5TmFtZS5yZXBsYWNlKC9bXHMtXS9nLCAnXycpOwogICAgICAgIGNvbnN0IHRhcm" +
  "dldFBhdGggPSBwYXRoLmpvaW4oVEVNUF9ESVIsIGAke2NvdW50cnlGaWxlTmFtZX1fJHtE" +
  "YXRlLm5vdygpfV90ZW1wLiR7dGFyZ2V0VHlwZX1gKTsKCiAgICAgICAgY29uc3QgY29udG" +
  "FjdE51bWJlcnMgPSBsaXN0Q29udGFjdHMubWFwKGMgPT4gW2MubnVtYmVyXSk7CgogICAg" +
  "ICAgIGlmICh0YXJnZXRUeXBlID09PSAneGxzeCcpIHsKICAgICAgICAgICAgY29uc3Qgd3" +
  "MgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldChbWydOVU1CRVInXSwgLi4uY29udGFjdE51" +
  "bWJlcnNdKTsKICAgICAgICAgICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KC" +
  "k7CiAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIHdzLCAi" +
  "Q29udGFjdHMiKTsKICAgICAgICAgICAgWExTWC53cml0ZUZpbGUod2IsIHRhcmdldFBhdG" +
  "gpOwoKICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFR5cGUgPT09ICd2Y2YnKSB7CiAgICAg" +
  "ICAgICAgIGxldCB2Y2ZDb250ZW50ID0gJyc7CiAgICAgICAgICAgIGxpc3RDb250YWN0cy" +
  "5mb3JFYWNoKChjKSA9PiB7CiAgICAgICAgICAgICAgICB2Y2ZDb250ZW50ICs9IGBCRUdJ" +
  "TjpWQ0FSRFxuVkVSU0lPTjozLjBcbk46OyR7Yy5udW1iZXJ9Ozs7XG5GTjoke2MubnVtYm" +
  "VyfVxuVEVMO1RZUEU9Q0VMTDoke2MubnVtYmVyfVxuRU5EOlZDQVJEXG5gOwogICAgICAg" +
  "ICAgICB9KTsKICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyh0YXJnZXRQYXRoLCB2Y2" +
  "ZDb250ZW50LCAndXRmOCcpOwoKICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFR5cGUgPT09" +
  "ICdjc3YnIHx8IHRhcmdldFR5cGUgPT09ICd0eHQnKSB7CiAgICAgICAgICAgIGxldCBmaW" +
  "xlQ29udGVudCA9ICcnOwogICAgICAgICAgICBsaXN0Q29udGFjdHMuZm9yRWFjaChjID0+" +
  "IHsKICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxOdW1iZXIgPSBjLm51bWJlcjsKICAgIC" +
  "AgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAke2Z1bGxOdW1iZXJ9XG5gOwogICAgICAg" +
  "ICAgICB9KTsKICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyh0YXJnZXRQYXRoLCBmaW" +
  "xlQ29udGVudCwgJ3V0ZjgnKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdHMucHVzaCh7" +
  "CiAgICAgICAgICAgIHBhdGg6IHRhcmdldFBhdGgsCiAgICAgICAgICAgIGNvdW50cnk6IG" +
  "NvdW50cnlOYW1lLAogICAgICAgICAgICBjb3VudDogbGlzdENvbnRhY3RzLmxlbmd0aCwK" +
  "ICAgICAgICAgICAgc2VydmljZU5hbWU6IG51bGwKICAgICAgICB9KTsKICAgIH07CgogIC" +
  "AgaWYgKHNwbGl0QnlDb3VudHJ5KSB7CiAgICAgICAgLy8gR3JvdXAgY29udGFjdHMgYnkg" +
  "Y291bnRyeQogICAgICAgIGNvbnN0IGNvbnRhY3RzQnlDb3VudHJ5ID0ge307CiAgICAgIC" +
  "AgY29udGFjdHMuZm9yRWFjaChjb250YWN0ID0+IHsKICAgICAgICAgICAgaWYgKCFjb250" +
  "YWN0c0J5Q291bnRyeVtjb250YWN0LmNvdW50cnldKSB7CiAgICAgICAgICAgICAgICBjb2" +
  "50YWN0c0J5Q291bnRyeVtjb250YWN0LmNvdW50cnldID0gW107CiAgICAgICAgICAgIH0K" +
  "ICAgICAgICAgICAgY29udGFjdHNCeUNvdW50cnlbY29udGFjdC5jb3VudHJ5XS5wdXNoKG" +
  "NvbnRhY3QpOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIEJ1YXQgZmlsZSB1" +
  "bnR1ayBzZXRpYXAgbmVnYXJhCiAgICAgICAgZm9yIChjb25zdCBjb3VudHJ5TmFtZSBpbi" +
  "Bjb250YWN0c0J5Q291bnRyeSkgewogICAgICAgICAgICBpZiAoY29udGFjdHNCeUNvdW50" +
  "cnlbY291bnRyeU5hbWVdLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHdyaXRlQ2" +
  "9udGFjdEZpbGUoY291bnRyeU5hbWUsIGNvbnRhY3RzQnlDb3VudHJ5W2NvdW50cnlOYW1l" +
  "XSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIC8vIF" +
  "Blcmlrc2EgYmVyYXBhIGJhbnlhayBuZWdhcmEgdW5payBkYWxhbSBrb250YWsKICAgICAg" +
  "ICBjb25zdCB1bmlxdWVDb3VudHJpZXMgPSBbLi4ubmV3IFNldChjb250YWN0cy5tYXAoYy" +
  "A9PiBjLmNvdW50cnkpKV07CiAgICAgICAgCiAgICAgICAgaWYgKHVuaXF1ZUNvdW50cmll" +
  "cy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgLy8gSmlrYSBoYW55YSBhZGEgMSBuZW" +
  "dhcmEsIGd1bmFrYW4gbmFtYSBuZWdhcmEgdGVyc2VidXQKICAgICAgICAgICAgY29uc3Qg" +
  "c2luZ2xlQ291bnRyeU5hbWUgPSB1bmlxdWVDb3VudHJpZXNbMF07CiAgICAgICAgICAgIH" +
  "dyaXRlQ29udGFjdEZpbGUoc2luZ2xlQ291bnRyeU5hbWUsIGNvbnRhY3RzKTsKICAgICAg" +
  "ICB9IGVsc2UgewogICAgICAgICAgICAvLyBKaWthIGFkYSBtdWx0aXBsZSBjb3VudHJpZX" +
  "MsIGd1bmFrYW4gJ0FMTF9DT1VOVFJJRVMnCiAgICAgICAgICAgIHdyaXRlQ29udGFjdEZp" +
  "bGUoJ0FMTF9DT1VOVFJJRVMnLCBjb250YWN0cyk7CiAgICAgICAgfQogICAgfQoKICAgIH" +
  "JldHVybiByZXN1bHRzOwp9OwoKY29uc3Qgc2VuZENvbnZlcnRlZEZpbGVzID0gYXN5bmMg" +
  "KGN0eCwgY3ZEYXRhKSA9PiB7CiAgICBjb25zdCB1c2VySWQgPSBjdHguZnJvbS5pZDsKIC" +
  "AgIGNvbnN0IHdhaXRNZXNzYWdlID0gYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwoIuKPsyBT" +
  "ZWRhbmcgbWVuZ2tvbnZlcnNpIGRhbiBtZW5naXJpbSBmaWxlLi4uIik7CgogICAgdHJ5IH" +
  "sKICAgICAgICBjb25zdCBmaWxlc1RvU2VuZCA9IGN2RGF0YS5maWxlTGlzdDsKCiAgICAg" +
  "ICAgaWYgKCFmaWxlc1RvU2VuZCB8fCBmaWxlc1RvU2VuZC5sZW5ndGggPT09IDApIHsKIC" +
  "AgICAgICAgICAgYXdhaXQgY3R4LnRlbGVncmFtLmRlbGV0ZU1lc3NhZ2UoY3R4LmNoYXQu" +
  "aWQsIHdhaXRNZXNzYWdlLm1lc3NhZ2VfaWQpLmNhdGNoKGUgPT4ge30pOwogICAgICAgIC" +
  "AgICBhd2FpdCBjdHgucmVwbHlXaXRoSFRNTCgi4p2MIFRpZGFrIGFkYSBmaWxlIHlhbmcg" +
  "ZGFwYXQgZGlraXJpbS4iKTsKICAgICAgICAgICAgcmVzZXRVc2VyU3RhdGUodXNlcklkKT" +
  "sKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgY3VycmVu" +
  "dERhdGUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnaWQtSUQnLCB7CiAgIC" +
  "AgICAgICAgIHllYXI6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgZGF5OiAnbnVtZXJp" +
  "YycKICAgICAgICB9KTsKCiAgICAgICAgZm9yIChjb25zdCBmaWxlSW5mbyBvZiBmaWxlc1" +
  "RvU2VuZCkgewogICAgICAgICAgICBjb25zdCBmaW5hbFNlcnZpY2VOYW1lID0gZmlsZUlu" +
  "Zm8uc2VydmljZU5hbWUgfHwgY3ZEYXRhLnNlcnZpY2VOYW1lIHx8ICdOb19TZXJ2aWNlJz" +
  "sKICAgICAgICAgICAgY29uc3QgY291bnRyeUZsYWcgPSBnZXRDb3VudHJ5RmxhZyhmaWxl" +
  "SW5mby5jb3VudHJ5KTsKCiAgICAgICAgICAgIGNvbnN0IGNvdW50cnlGaWxlTmFtZSA9IG" +
  "ZpbGVJbmZvLmNvdW50cnkucmVwbGFjZSgvW1xzLV0vZywgJ18nKTsKICAgICAgICAgICAg" +
  "Y29uc3Qgc2VydmljZUZpbGVOYW1lID0gZmluYWxTZXJ2aWNlTmFtZS5yZXBsYWNlKC9bXH" +
  "MtXS9nLCAnXycpOwogICAgICAgICAgICBjb25zdCBmaW5hbEZpbGVOYW1lID0gYCR7Y291" +
  "bnRyeUZsYWd9XyR7Y291bnRyeUZpbGVOYW1lfV8ke3NlcnZpY2VGaWxlTmFtZX1fJHtmaW" +
  "xlSW5mby5jb3VudH0uJHtjdkRhdGEudGFyZ2V0VHlwZX1gOwoKICAgICAgICAgICAgY29u" +
  "c3QgZmluYWxDYXB0aW9uID0gYDxibG9ja3F1b3RlPiR7Y291bnRyeUZsYWd9ICR7ZmlsZU" +
  "luZm8uY291bnRyeS50b1VwcGVyQ2FzZSgpfTwvYmxvY2txdW90ZT4K4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBCiR7Zm" +
  "lsZUluZm8uY291bnR9IE51bWJlcgoke2ZpbmFsU2VydmljZU5hbWV9CuKUgeKUgeKUgeKU" +
  "geKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQo8Yj" +
  "48aT5EYXRlIDogJHtjdXJyZW50RGF0ZX08L2k+PC9iPmAudHJpbSgpOwoKICAgICAgICAg" +
  "ICAgYXdhaXQgY3R4LnJlcGx5V2l0aERvY3VtZW50KHsgc291cmNlOiBmaWxlSW5mby5wYX" +
  "RoLCBmaWxlbmFtZTogZmluYWxGaWxlTmFtZSB9LCB7IAogICAgICAgICAgICAgICAgY2Fw" +
  "dGlvbjogZmluYWxDYXB0aW9uLCAKICAgICAgICAgICAgICAgIHBhcnNlX21vZGU6ICdIVE" +
  "1MJyAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBDbGVhbnVwIGZpbGUgdGVt" +
  "cG9yYXJ5CiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVJbmZvLnBhdGgpKS" +
  "B7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZzLnVubGlu" +
  "a1N5bmMoZmlsZUluZm8ucGF0aCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7Ci" +
  "AgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiW1NUQVRVU10gR2FnYWwgbWVu" +
  "Z2hhcHVzIGZpbGUgc2VtZW50YXJhOiIsIGUubWVzc2FnZSk7CiAgICAgICAgICAgICAgIC" +
  "B9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGF3YWl0IGN0eC50ZWxlZ3Jh" +
  "bS5kZWxldGVNZXNzYWdlKGN0eC5jaGF0LmlkLCB3YWl0TWVzc2FnZS5tZXNzYWdlX2lkKS" +
  "5jYXRjaChlID0+IHt9KTsKICAgICAgICBhd2FpdCBjdHgucmVwbHlXaXRoSFRNTChg4pyF" +
  "IFNlbGVzYWkhICR7ZmlsZXNUb1NlbmQubGVuZ3RofSBmaWxlIGJlcmhhc2lsIGRpa2lyaW" +
  "0uYCk7CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUu" +
  "ZXJyb3IoIltTVEFUVVNdIEVycm9yIHNhYXQgbWVuZ2lyaW0gZmlsZSBrb252ZXJzaToiLC" +
  "BlcnJvcik7CiAgICAgICAgYXdhaXQgY3R4LnRlbGVncmFtLmRlbGV0ZU1lc3NhZ2UoY3R4" +
  "LmNoYXQuaWQsIHdhaXRNZXNzYWdlLm1lc3NhZ2VfaWQpLmNhdGNoKGUgPT4ge30pOwogIC" +
  "AgICAgIGF3YWl0IGN0eC5yZXBseVdpdGhIVE1MKGDinYwgRXJyb3I6ICR7ZXJyb3IubWVz" +
  "c2FnZX1gKTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgcmVzZXRVc2VyU3RhdGUodXNlck" +
  "lkKTsKICAgIH0KfTsKCmNvbnN0IHNob3dTcGxpdE9wdGlvbnMgPSBhc3luYyAoY3R4LCBz" +
  "dGF0ZSwgdGFyZ2V0VHlwZSkgPT4gewogICAgY29uc3QgbWVzc2FnZUlkID0gc3RhdGUuZG" +
  "F0YS5tZXNzYWdlSWQ7CiAgICBjb25zdCBudW1Db3VudHJpZXMgPSBPYmplY3Qua2V5cyhz" +
  "dGF0ZS5kYXRhLmNvdW50cnlEYXRhKS5sZW5ndGg7CiAgICBzdGF0ZS5kYXRhLnRhcmdldF" +
  "R5cGUgPSB0YXJnZXRUeXBlOwoKICAgIGNvbnN0IG5ld1RleHQgPSBgPHByZT5Db252ZXJ0" +
  "IFN0YXR1cwoK4p6h77iPIFBpbGloYW4gRm9ybWF0IDogJHt0YXJnZXRUeXBlLnRvVXBwZX" +
  "JDYXNlKCl9CuKeoe+4jyBKdW1sYWggTmVnYXJhIDogJHtudW1Db3VudHJpZXN9CiR7bnVt" +
  "Q291bnRyaWVzID4gMSA/CiAgICBgVGVyZGV0ZWtzaSAke251bUNvdW50cmllc30gbmVnYX" +
  "JhLiBBcGFrYWggQW5kYSBpbmdpbiBbcGlzYWhdIGZpbGUgcGVyIG5lZ2FyYSBhdGF1IFtn" +
  "YWJ1bmddIG1lbmphZGkgc2F0dSBmaWxlP2AgOgogICAgYEhhbnlhIHRlcmRldGVrc2kgMS" +
  "BuZWdhcmEuIFNpbGFrYW4gbGFuanV0LmAKfTwvcHJlPmA7CgogICAgY29uc3Qga2V5Ym9h" +
  "cmQgPSBNYXJrdXAuaW5saW5lS2V5Ym9hcmQoWwogICAgICAgIFtNYXJrdXAuYnV0dG9uLm" +
  "NhbGxiYWNrKCdQSVNBSCcsICdjdl9zcGxpdF90cnVlJyksIE1hcmt1cC5idXR0b24uY2Fs" +
  "bGJhY2soJ0dBQlVORycsICdjdl9zcGxpdF9mYWxzZScpXQogICAgXSk7CgogICAgc3RhdG" +
  "Uuc3RlcCA9ICdzZXJ2aWNlX3NlbGVjdGlvbic7CiAgICAKICAgIGlmIChudW1Db3VudHJp" +
  "ZXMgPD0gMSkgewogICAgICAgIHN0YXRlLmRhdGEuc3BsaXRCeUNvdW50cnkgPSBmYWxzZT" +
  "sKICAgICAgICBhd2FpdCBzaG93U2VydmljZU9wdGlvbnMoY3R4LCBzdGF0ZSk7CiAgICAg" +
  "ICAgcmV0dXJuOwogICAgfQoKICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIG1lc3" +
  "NhZ2VJZCwgbmV3VGV4dCwga2V5Ym9hcmQpOwp9OwoKY29uc3Qgc2hvd1NlcnZpY2VPcHRp" +
  "b25zID0gYXN5bmMgKGN0eCwgc3RhdGUpID0+IHsKICAgIGNvbnN0IG1lc3NhZ2VJZCA9IH" +
  "N0YXRlLmRhdGEubWVzc2FnZUlkOwogICAgY29uc3QgbnVtQ291bnRyaWVzID0gT2JqZWN0" +
  "LmtleXMoc3RhdGUuZGF0YS5jb3VudHJ5RGF0YSkubGVuZ3RoOwoKICAgIHN0YXRlLmRhdG" +
  "EuZmlsZUxpc3QgPSBwcm9jZXNzQ29udGFjdHMoc3RhdGUuZGF0YS5jb250YWN0cywgc3Rh" +
  "dGUuZGF0YS50YXJnZXRUeXBlLCBzdGF0ZS5kYXRhLnNwbGl0QnlDb3VudHJ5LCBzdGF0ZS" +
  "5kYXRhLmNvdW50cnlEYXRhKTsKCiAgICBjb25zdCBmaWxlc1RvQ3JlYXRlID0gc3RhdGUu" +
  "ZGF0YS5maWxlTGlzdC5sZW5ndGg7CiAgICBjb25zdCBzcGxpdFRleHQgPSBzdGF0ZS5kYX" +
  "RhLnNwbGl0QnlDb3VudHJ5ID8gJ1BJU0FIJyA6IChudW1Db3VudHJpZXMgPiAxID8gJ0dB" +
  "QlVORycgOiAnU0FUVScpOwoKICAgIGNvbnN0IG5ld1RleHQgPSBgPHByZT5Db252ZXJ0IF" +
  "N0YXR1cwoK4p6h77iPIEZvcm1hdCBLb252ZXJzaSA6ICR7c3RhdGUuZGF0YS50YXJnZXRU" +
  "eXBlLnRvVXBwZXJDYXNlKCl9CuKeoe+4jyBNb2RlIEZpbGUgOiAke3NwbGl0VGV4dH0gKC" +
  "R7ZmlsZXNUb0NyZWF0ZX0gZmlsZSBha2FuIGRpYnVhdCkKClNpbGFrYW4ga29uZmlybWFz" +
  "aSB0ZXJsZWJpaCBkYWh1bHU6IFNlcnZpY2UgYWthbiBkaWlzaSBzYXR1LXNhdHUgKHBlci" +
  "BmaWxlKSBhdGF1IGxhbmdzdW5nIHNlbXVhIGRlbmdhbiBuYW1hIHNlcnZpY2UgeWFuZyBz" +
  "YW1hLi4/CjwvcHJlPmA7CgogICAgc3RhdGUuc3RlcCA9ICdzZXJ2aWNlX2lucHV0X21vZG" +
  "UnOwoKICAgIGNvbnN0IGtleWJvYXJkID0gTWFya3VwLmlubGluZUtleWJvYXJkKFsKICAg" +
  "ICAgICBbTWFya3VwLmJ1dHRvbi5jYWxsYmFjaygnU0FUVUFOJywgJ2N2X3NlcnZpY2VfbW" +
  "9kZV9zaW5nbGUnKSwgTWFya3VwLmJ1dHRvbi5jYWxsYmFjaygnU0VNVUEnLCAnY3Zfc2Vy" +
  "dmljZV9tb2RlX2FsbCcpXQogICAgXSk7CgogICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKG" +
  "N0eCwgbWVzc2FnZUlkLCBuZXdUZXh0LCBrZXlib2FyZCk7Cn07Cgpib3QuY29tbWFuZCgn" +
  "Y3YnLCBvd25lck9ubHksIGFzeW5jIChjdHgpID0+IHsKICAgIGNvbnN0IHVzZXJJZCA9IG" +
  "N0eC5mcm9tLmlkOwogICAgCiAgICAvLyBDbGVhciBhbnkgZXhpc3Rpbmcgc3RhdGUKICAg" +
  "IHJlc2V0VXNlclN0YXRlKHVzZXJJZCk7CiAgICAKICAgIGxldCBkb2MgPSBudWxsOwogIC" +
  "AgbGV0IGxvY2FsUGF0aCA9IG51bGw7CgogICAgLy8gQ2FzZSAxOiBSZXBseSB0byBhIGZp" +
  "bGUgd2l0aCAvY3YKICAgIGlmIChjdHgubWVzc2FnZS5yZXBseV90b19tZXNzYWdlICYmIG" +
  "N0eC5tZXNzYWdlLnJlcGx5X3RvX21lc3NhZ2UuZG9jdW1lbnQpIHsKICAgICAgICBkb2Mg" +
  "PSBjdHgubWVzc2FnZS5yZXBseV90b19tZXNzYWdlLmRvY3VtZW50OwogICAgfQogICAgLy" +
  "8gQ2FzZSAyOiBNZXNzYWdlIHdpdGggZG9jdW1lbnQgYW5kIGNhcHRpb24gL2N2CiAgICBl" +
  "bHNlIGlmIChjdHgubWVzc2FnZS5kb2N1bWVudCkgewogICAgICAgIGNvbnN0IG1lc3NhZ2" +
  "VUZXh0ID0gY3R4Lm1lc3NhZ2UudGV4dCB8fCAnJzsKICAgICAgICBpZiAobWVzc2FnZVRl" +
  "eHQudHJpbSgpID09PSAnL2N2JyB8fCBtZXNzYWdlVGV4dC5pbmNsdWRlcygnL2N2ICcpKS" +
  "B7CiAgICAgICAgICAgIGRvYyA9IGN0eC5tZXNzYWdlLmRvY3VtZW50OwogICAgICAgIH0K" +
  "ICAgIH0KCiAgICBpZiAoIWRvYykgewogICAgICAgIHJldHVybiByZXBseUhUTUwoY3R4LA" +
  "ogICAgICAgICAgICBgPHByZT5FcnJvcgoK4pqg77iPIENhcmEgcGVuZ2d1bmFhbjoKMS4g" +
  "QmFsYXMgZmlsZSBkZW5nYW4gbWVuZ2V0aWsgL2N2CjIuIEF0YXUga2lyaW0gZmlsZSBkZW" +
  "5nYW4gY2FwdGlvbiAvY3YKCkZvcm1hdCBmaWxlIHlhbmcgZGlkdWt1bmc6Ci5jc3YsIC50" +
  "eHQsIC52Y2YsIC54bHN4LCAueGxzPC9wcmU+YCwKICAgICAgICAgICAgeyByZXBseV90b1" +
  "9tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNzYWdlX2lkIH0KICAgICAgICApOwogICAg" +
  "fQoKICAgIHRyeSB7CiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBkb2MuZmlsZV9uYW1lIH" +
  "x8ICdmaWxlJzsKICAgICAgICBjb25zdCBpbml0aWFsVHlwZSA9IGRldGVjdFR5cGVCeU5h" +
  "bWUoZmlsZU5hbWUpOwoKICAgICAgICBpZiAoIWluaXRpYWxUeXBlKSB7CiAgICAgICAgIC" +
  "AgIHJldHVybiByZXBseUhUTUwoY3R4LAogICAgICAgICAgICAgICAgYDxwcmU+RXJyb3IK" +
  "CuKdjCBGb3JtYXQgZmlsZSB0aWRhayBkaWR1a3VuZy4KRm9ybWF0IHlhbmcgZGlkdWt1bm" +
  "c6IC5jc3YsIC50eHQsIC52Y2YsIC54bHN4LCAueGxzPC9wcmU+YCwKICAgICAgICAgICAg" +
  "ICAgIHsgcmVwbHlfdG9fbWVzc2FnZV9pZDogY3R4Lm1lc3NhZ2UubWVzc2FnZV9pZCB9Ci" +
  "AgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkb3dubG9hZE1zZyA9" +
  "IGF3YWl0IHJlcGx5SFRNTChjdHgsCiAgICAgICAgICAgIGA8cHJlPkNvbnZlcnQgU3RhdH" +
  "VzCgrij7MgTWVuZ3VuZHVoIGZpbGUgJHtmaWxlTmFtZX0uLi48L3ByZT5gLAogICAgICAg" +
  "ICAgICB7IHJlcGx5X3RvX21lc3NhZ2VfaWQ6IGN0eC5tZXNzYWdlLm1lc3NhZ2VfaWQgfQ" +
  "ogICAgICAgICk7CgogICAgICAgIGxvY2FsUGF0aCA9IGF3YWl0IGRvd25sb2FkRmlsZShk" +
  "b2MuZmlsZV9pZCwgZmlsZU5hbWUpOwoKICAgICAgICB0cnkgeyBhd2FpdCBjdHgudGVsZW" +
  "dyYW0uZGVsZXRlTWVzc2FnZShjdHguY2hhdC5pZCwgZG93bmxvYWRNc2cubWVzc2FnZV9p" +
  "ZCk7IH0gY2F0Y2ggeyB9CgogICAgICAgIGNvbnN0IGNvbnRhY3RzID0gcmVhZENvbnRhY3" +
  "RzKGxvY2FsUGF0aCwgaW5pdGlhbFR5cGUpIHx8IFtdOwoKICAgICAgICBpZiAoY29udGFj" +
  "dHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiByZXBseUhUTUwoY3R4LA" +
  "ogICAgICAgICAgICAgICAgYDxwcmU+RXJyb3IKCuKdjCBUaWRhayBhZGEgbm9tb3IgdGVs" +
  "ZXBvbiB5YW5nIHRlcmRldGVrc2kgZGFsYW0gZmlsZS4KUGFzdGlrYW4gZmlsZSBtZW1pbG" +
  "lraSBrb2xvbSBub21vciB0ZWxlcG9uIHlhbmcgdmFsaWQuPC9wcmU+YCwKICAgICAgICAg" +
  "ICAgICAgIHsgcmVwbHlfdG9fbWVzc2FnZV9pZDogY3R4Lm1lc3NhZ2UubWVzc2FnZV9pZC" +
  "B9CiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB7IGRhdGE6IGNv" +
  "dW50cnlEYXRhLCBsaXN0OiBjb3VudHJ5TGlzdCB9ID0gZ2V0Q291bnRyeURhdGEoY29udG" +
  "FjdHMpOwogICAgICAgIGNvbnN0IG51bUNvdW50cmllcyA9IE9iamVjdC5rZXlzKGNvdW50" +
  "cnlEYXRhKS5sZW5ndGg7CgogICAgICAgIC8vIFNldCBzdGF0ZSB1bnR1ayBDViBkZW5nYW" +
  "4gc2lzdGVtIGJhcnUKICAgICAgICBjb25zdCBzdGF0ZSA9IHNldFVzZXJTdGF0ZSh1c2Vy" +
  "SWQsICdDVicsIHsKICAgICAgICAgICAgY29udGFjdHM6IGNvbnRhY3RzLAogICAgICAgIC" +
  "AgICBjb3VudHJ5RGF0YTogY291bnRyeURhdGEsCiAgICAgICAgICAgIGZpbGVOYW1lOiBm" +
  "aWxlTmFtZSwKICAgICAgICAgICAgZmlsZVR5cGU6IGluaXRpYWxUeXBlLAogICAgICAgIC" +
  "AgICBjaGF0SWQ6IGN0eC5jaGF0LmlkLAogICAgICAgICAgICB0YXJnZXRUeXBlOiAnJywK" +
  "ICAgICAgICAgICAgc3BsaXRCeUNvdW50cnk6IGZhbHNlLAogICAgICAgICAgICBzZXJ2aW" +
  "NlTW9kZTogbnVsbCwKICAgICAgICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICAgICAgICBj" +
  "dXJyZW50RmlsZUluZGV4OiAwLAogICAgICAgICAgICBzZXJ2aWNlTmFtZTogbnVsbAogIC" +
  "AgICAgIH0pOwogICAgICAgIHN0YXRlLnN0ZXAgPSAnY291bnRyeV9zcGxpdF9zZWxlY3Rp" +
  "b24nOwoKICAgICAgICBjb25zdCBpbmZvID0gYDxwcmU+Q29udmVydCBTdGF0dXMKCvCfk4" +
  "QgRmlsZSBBc2xpOiAke2ZpbGVOYW1lfSAoJHtpbml0aWFsVHlwZS50b1VwcGVyQ2FzZSgp" +
  "fSkK8J+RpSBUb3RhbCBOb21vcjogJHtjb250YWN0cy5sZW5ndGh9Cgrwn5OLIERhZnRhci" +
  "BOZWdhcmEgVGVyZGV0ZWtzaSAoJHtudW1Db3VudHJpZXN9IE5lZ2FyYSk6CiR7Y291bnRy" +
  "eUxpc3R9CgrinIUgU2lsYWthbiBwaWxpaCBmb3JtYXQga29udmVyc2kgeWFuZyBBbmRhIG" +
  "luZ2lua2FuLjwvcHJlPmA7CgogICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbCiAgICAgICAg" +
  "ICAgIE1hcmt1cC5idXR0b24uY2FsbGJhY2soJ/Cfk4QgVFhUJywgJ2N2X3RvX3R4dCcpLA" +
  "ogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5OYIFhMU1gnLCAnY3Zf" +
  "dG9feGxzeCcpLAogICAgICAgICAgICBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCfwn5OxIF" +
  "ZDRicsICdjdl90b192Y2YnKSwKICAgICAgICAgICAgTWFya3VwLmJ1dHRvbi5jYWxsYmFj" +
  "aygn8J+TjiBDU1YnLCAnY3ZfdG9fY3N2JykKICAgICAgICBdOwoKICAgICAgICBjb25zdC" +
  "BzZW50TWVzc2FnZSA9IGF3YWl0IHJlcGx5SFRNTChjdHgsIGluZm8sIE1hcmt1cC5pbmxp" +
  "bmVLZXlib2FyZChjaHVua0FycmF5KGJ1dHRvbnMsIDIpKSk7CiAgICAgICAgc3RhdGUuZG" +
  "F0YS5tZXNzYWdlSWQgPSBzZW50TWVzc2FnZS5tZXNzYWdlX2lkOwoKICAgIH0gY2F0Y2gg" +
  "KGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJbU1RBVFVTXSBFcnJvciBDVjoiLCBlLm" +
  "1lc3NhZ2UpOwogICAgICAgIHJldHVybiByZXBseUhUTUwoY3R4LAogICAgICAgICAgICBg" +
  "PHByZT5FcnJvcgoK4p2MIFRlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVtcHJvc2VzIGZpbG" +
  "U6CiR7ZS5tZXNzYWdlfTwvcHJlPmAsCiAgICAgICAgICAgIHsgcmVwbHlfdG9fbWVzc2Fn" +
  "ZV9pZDogY3R4Lm1lc3NhZ2UubWVzc2FnZV9pZCB9CiAgICAgICAgKTsKICAgIH0gZmluYW" +
  "xseSB7CiAgICAgICAgaWYgKGxvY2FsUGF0aCAmJiBmcy5leGlzdHNTeW5jKGxvY2FsUGF0" +
  "aCkpIHsKICAgICAgICAgICAgdHJ5IHsgZnMudW5saW5rU3luYyhsb2NhbFBhdGgpOyB9IG" +
  "NhdGNoIHsgfQogICAgICAgIH0KICAgIH0KfSk7Cgpib3QuYWN0aW9uKC9jdl90b18odHh0" +
  "fHhsc3h8dmNmfGNzdikvLCBvd25lck9ubHksIGFzeW5jIChjdHgpID0+IHsKICAgIGNvbn" +
  "N0IHVzZXJJZCA9IGN0eC5mcm9tLmlkOwogICAgY29uc3Qgc3RhdGUgPSBnZXRVc2VyU3Rh" +
  "dGUodXNlcklkKTsKICAgIAogICAgaWYgKCFzdGF0ZSB8fCBzdGF0ZS50eXBlICE9PSAnQ1" +
  "YnIHx8IHN0YXRlLnN0ZXAgIT09ICdjb3VudHJ5X3NwbGl0X3NlbGVjdGlvbicpIHsKICAg" +
  "ICAgICBhd2FpdCBjdHguYW5zd2VyQ2JRdWVyeSgn4pqg77iPIFNlc2kgYmVyYWtoaXIuJy" +
  "k7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHRhcmdldFR5cGUgPSBjdHgu" +
  "bWF0Y2hbMV07CiAgICAKICAgIC8vIFVwZGF0ZSBzdGF0ZQogICAgc3RhdGUuZGF0YS50YX" +
  "JnZXRUeXBlID0gdGFyZ2V0VHlwZTsKICAgIGNvbnN0IG51bUNvdW50cmllcyA9IE9iamVj" +
  "dC5rZXlzKHN0YXRlLmRhdGEuY291bnRyeURhdGEpLmxlbmd0aDsKCiAgICBjb25zdCBuZX" +
  "dUZXh0ID0gYDxwcmU+Q29udmVydCBTdGF0dXMKCuKeoe+4jyBQaWxpaGFuIEZvcm1hdCA6" +
  "ICR7dGFyZ2V0VHlwZS50b1VwcGVyQ2FzZSgpfQrinqHvuI8gSnVtbGFoIE5lZ2FyYSA6IC" +
  "R7bnVtQ291bnRyaWVzfQoke251bUNvdW50cmllcyA+IDEgPwogICAgYFRlcmRldGVrc2kg" +
  "JHtudW1Db3VudHJpZXN9IG5lZ2FyYS4gQXBha2FoIEFuZGEgaW5naW4gW3Bpc2FoXSBmaW" +
  "xlIHBlciBuZWdhcmEgYXRhdSBbZ2FidW5nXSBtZW5qYWRpIHNhdHUgZmlsZT9gIDoKICAg" +
  "IGBIYW55YSB0ZXJkZXRla3NpIDEgbmVnYXJhLiBTaWxha2FuIGxhbmp1dC5gCn08L3ByZT" +
  "5gOwoKICAgIGlmIChudW1Db3VudHJpZXMgPD0gMSkgewogICAgICAgIHN0YXRlLmRhdGEu" +
  "c3BsaXRCeUNvdW50cnkgPSBmYWxzZTsKICAgICAgICBzdGF0ZS5zdGVwID0gJ3NlcnZpY2" +
  "Vfc2VsZWN0aW9uJzsKICAgICAgICBzdGF0ZS5kYXRhLmZpbGVMaXN0ID0gcHJvY2Vzc0Nv" +
  "bnRhY3RzKHN0YXRlLmRhdGEuY29udGFjdHMsIHN0YXRlLmRhdGEudGFyZ2V0VHlwZSwgc3" +
  "RhdGUuZGF0YS5zcGxpdEJ5Q291bnRyeSwgc3RhdGUuZGF0YS5jb3VudHJ5RGF0YSk7CiAg" +
  "ICAgICAgCiAgICAgICAgY29uc3QgZmlsZXNUb0NyZWF0ZSA9IHN0YXRlLmRhdGEuZmlsZU" +
  "xpc3QubGVuZ3RoOwogICAgICAgIGNvbnN0IG5ld1RleHQyID0gYDxwcmU+Q29udmVydCBT" +
  "dGF0dXMKCuKeoe+4jyBGb3JtYXQgS29udmVyc2kgOiAke3N0YXRlLmRhdGEudGFyZ2V0VH" +
  "lwZS50b1VwcGVyQ2FzZSgpfQrinqHvuI8gTW9kZSBGaWxlIDogU0FUVSAoJHtmaWxlc1Rv" +
  "Q3JlYXRlfSBmaWxlIGFrYW4gZGlidWF0KQoKU2lsYWthbiBrb25maXJtYXNpIHRlcmxlYm" +
  "loIGRhaHVsdTogU2VydmljZSBha2FuIGRpaXNpIHNhdHUtc2F0dSAocGVyIGZpbGUpIGF0" +
  "YXUgbGFuZ3N1bmcgc2VtdWEgZGVuZ2FuIG5hbWEgc2VydmljZSB5YW5nIHNhbWEuLj8KPC" +
  "9wcmU+YDsKCiAgICAgICAgc3RhdGUuc3RlcCA9ICdzZXJ2aWNlX2lucHV0X21vZGUnOwog" +
  "ICAgICAgIGNvbnN0IGtleWJvYXJkID0gTWFya3VwLmlubGluZUtleWJvYXJkKFsKICAgIC" +
  "AgICAgICAgW01hcmt1cC5idXR0b24uY2FsbGJhY2soJ1NBVFVBTicsICdjdl9zZXJ2aWNl" +
  "X21vZGVfc2luZ2xlJyksIE1hcmt1cC5idXR0b24uY2FsbGJhY2soJ1NFTVVBJywgJ2N2X3" +
  "NlcnZpY2VfbW9kZV9hbGwnKV0KICAgICAgICBdKTsKCiAgICAgICAgYXdhaXQgc2FmZUVk" +
  "aXRNZXNzYWdlKGN0eCwgc3RhdGUuZGF0YS5tZXNzYWdlSWQsIG5ld1RleHQyLCBrZXlib2" +
  "FyZCk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGtleWJvYXJkID0gTWFy" +
  "a3VwLmlubGluZUtleWJvYXJkKFsKICAgICAgICBbTWFya3VwLmJ1dHRvbi5jYWxsYmFjay" +
  "gnUElTQUgnLCAnY3Zfc3BsaXRfdHJ1ZScpLCBNYXJrdXAuYnV0dG9uLmNhbGxiYWNrKCdH" +
  "QUJVTkcnLCAnY3Zfc3BsaXRfZmFsc2UnKV0KICAgIF0pOwoKICAgIHN0YXRlLnN0ZXAgPS" +
  "Anc2VydmljZV9zZWxlY3Rpb24nOwogICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwg" +
  "c3RhdGUuZGF0YS5tZXNzYWdlSWQsIG5ld1RleHQsIGtleWJvYXJkKTsKfSk7Cgpib3QuYW" +
  "N0aW9uKC9jdl9zcGxpdF8odHJ1ZXxmYWxzZSkvLCBvd25lck9ubHksIGFzeW5jIChjdHgp" +
  "ID0+IHsKICAgIGNvbnN0IHVzZXJJZCA9IGN0eC5mcm9tLmlkOwogICAgY29uc3Qgc3RhdG" +
  "UgPSBnZXRVc2VyU3RhdGUodXNlcklkKTsKICAgIAogICAgaWYgKCFzdGF0ZSB8fCBzdGF0" +
  "ZS50eXBlICE9PSAnQ1YnIHx8IHN0YXRlLnN0ZXAgIT09ICdzZXJ2aWNlX3NlbGVjdGlvbi" +
  "cpIHsKICAgICAgICBhd2FpdCBjdHguYW5zd2VyQ2JRdWVyeSgn4pqg77iPIFNlc2kgYmVy" +
  "YWtoaXIuJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHN0YXRlLmRhdGEuc3BsaX" +
  "RCeUNvdW50cnkgPSBjdHgubWF0Y2hbMV0gPT09ICd0cnVlJzsKICAgIHN0YXRlLmRhdGEu" +
  "ZmlsZUxpc3QgPSBwcm9jZXNzQ29udGFjdHMoc3RhdGUuZGF0YS5jb250YWN0cywgc3RhdG" +
  "UuZGF0YS50YXJnZXRUeXBlLCBzdGF0ZS5kYXRhLnNwbGl0QnlDb3VudHJ5LCBzdGF0ZS5k" +
  "YXRhLmNvdW50cnlEYXRhKTsKCiAgICBjb25zdCBmaWxlc1RvQ3JlYXRlID0gc3RhdGUuZG" +
  "F0YS5maWxlTGlzdC5sZW5ndGg7CiAgICBjb25zdCBzcGxpdFRleHQgPSBzdGF0ZS5kYXRh" +
  "LnNwbGl0QnlDb3VudHJ5ID8gJ1BJU0FIJyA6ICdHQUJVTkcnOwogICAgY29uc3QgbnVtQ2" +
  "91bnRyaWVzID0gT2JqZWN0LmtleXMoc3RhdGUuZGF0YS5jb3VudHJ5RGF0YSkubGVuZ3Ro" +
  "OwoKICAgIGNvbnN0IG5ld1RleHQgPSBgPHByZT5Db252ZXJ0IFN0YXR1cwoK4p6h77iPIE" +
  "Zvcm1hdCBLb252ZXJzaSA6ICR7c3RhdGUuZGF0YS50YXJnZXRUeXBlLnRvVXBwZXJDYXNl" +
  "KCl9CuKeoe+4jyBNb2RlIEZpbGUgOiAke3NwbGl0VGV4dH0gKCR7ZmlsZXNUb0NyZWF0ZX" +
  "0gZmlsZSBha2FuIGRpYnVhdCkKClNpbGFrYW4ga29uZmlybWFzaSB0ZXJsZWJpaCBkYWh1" +
  "bHU6IFNlcnZpY2UgYWthbiBkaWlzaSBzYXR1LXNhdHUgKHBlciBmaWxlKSBhdGF1IGxhbm" +
  "dzdW5nIHNlbXVhIGRlbmdhbiBuYW1hIHNlcnZpY2UgeWFuZyBzYW1hLi4/CjwvcHJlPmA7" +
  "CgogICAgc3RhdGUuc3RlcCA9ICdzZXJ2aWNlX2lucHV0X21vZGUnOwogICAgY29uc3Qga2" +
  "V5Ym9hcmQgPSBNYXJrdXAuaW5saW5lS2V5Ym9hcmQoWwogICAgICAgIFtNYXJrdXAuYnV0" +
  "dG9uLmNhbGxiYWNrKCdTQVRVQU4nLCAnY3Zfc2VydmljZV9tb2RlX3NpbmdsZScpLCBNYX" +
  "JrdXAuYnV0dG9uLmNhbGxiYWNrKCdTRU1VQScsICdjdl9zZXJ2aWNlX21vZGVfYWxsJyld" +
  "CiAgICBdKTsKCiAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCBzdGF0ZS5kYXRhLm" +
  "1lc3NhZ2VJZCwgbmV3VGV4dCwga2V5Ym9hcmQpOwp9KTsKCmJvdC5hY3Rpb24oL2N2X3Nl" +
  "cnZpY2VfbW9kZV8oc2luZ2xlfGFsbCkvLCBvd25lck9ubHksIGFzeW5jIChjdHgpID0+IH" +
  "sKICAgIGNvbnN0IHVzZXJJZCA9IGN0eC5mcm9tLmlkOwogICAgY29uc3Qgc3RhdGUgPSBn" +
  "ZXRVc2VyU3RhdGUodXNlcklkKTsKICAgIAogICAgaWYgKCFzdGF0ZSB8fCBzdGF0ZS50eX" +
  "BlICE9PSAnQ1YnIHx8IHN0YXRlLnN0ZXAgIT09ICdzZXJ2aWNlX2lucHV0X21vZGUnKSB7" +
  "CiAgICAgICAgYXdhaXQgY3R4LmFuc3dlckNiUXVlcnkoJ+KaoO+4jyBTZXNpIGJlcmFraG" +
  "lyLicpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBtb2RlID0gY3R4Lm1h" +
  "dGNoWzFdOwogICAgc3RhdGUuZGF0YS5zZXJ2aWNlTW9kZSA9IG1vZGU7CiAgICBzdGF0ZS" +
  "5kYXRhLmN1cnJlbnRGaWxlSW5kZXggPSAwOwoKICAgIGF3YWl0IGN0eC5hbnN3ZXJDYlF1" +
  "ZXJ5KG1vZGUgPT09ICdzaW5nbGUnID8gJ01vZGUgU2F0dWFuIGRpcGlsaWguJyA6ICdNb2" +
  "RlIFNlbXVhIGRpcGlsaWguJyk7CgogICAgaWYgKG1vZGUgPT09ICdzaW5nbGUnKSB7CiAg" +
  "ICAgICAgc3RhdGUuc3RlcCA9ICdhd2FpdGluZ19zaW5nbGVfc2VydmljZV9pbnB1dCc7Ci" +
  "AgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSBzdGF0ZS5kYXRhLmZpbGVMaXN0WzBdOwog" +
  "ICAgICAgIGNvbnN0IG5ld1RleHQgPSBgPHByZT5Db252ZXJ0IFN0YXR1cwoK4p6h77iPIF" +
  "NlcnZpY2UgTW9kZSA6IFNBVFVBTiAoJHtzdGF0ZS5kYXRhLmZpbGVMaXN0Lmxlbmd0aH0g" +
  "RmlsZSkKClNpbGFrYW4gYmVyaWthbiBuYW1hIFNlcnZpY2UgKENvbnRvaDogV2hhdHNBcH" +
  "AsIEdvb2dsZSwgZGxsLikgdW50dWsgZmlsZSAxIGRhcmkgJHtzdGF0ZS5kYXRhLmZpbGVM" +
  "aXN0Lmxlbmd0aH0gOgoke2dldENvdW50cnlGbGFnKGN1cnJlbnRGaWxlLmNvdW50cnkpfS" +
  "Ake2N1cnJlbnRGaWxlLmNvdW50cnl9ICgke2N1cnJlbnRGaWxlLmNvdW50fSBOdW1iZXIp" +
  "PC9wcmU+CmA7CgogICAgICAgIGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIHN0YXRlLm" +
  "RhdGEubWVzc2FnZUlkLCBuZXdUZXh0KTsKICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUu" +
  "c3RlcCA9ICdhd2FpdGluZ19hbGxfc2VydmljZV9pbnB1dCc7CiAgICAgICAgY29uc3Qgbm" +
  "V3VGV4dCA9IGA8cHJlPkNvbnZlcnQgU3RhdHVzCgrinqHvuI8gU2VydmljZSBNb2RlIDog" +
  "U0VNVUEgKCR7c3RhdGUuZGF0YS5maWxlTGlzdC5sZW5ndGh9IEZpbGUpCgpTaWxha2FuIG" +
  "JlcmlrYW4gc2F0dSBuYW1hIFNlcnZpY2UgKENvbnRvaDogV2hhdHNBcHApIHlhbmcgYWth" +
  "biBkaWd1bmFrYW4gdW50dWsgc2VtdWEgJHtzdGF0ZS5kYXRhLmZpbGVMaXN0Lmxlbmd0aH" +
  "0gZmlsZSB5YW5nIGFrYW4gZGlrb252ZXJzaS48L3ByZT4KICAgICAgICBgOwogICAgICAg" +
  "IGF3YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIHN0YXRlLmRhdGEubWVzc2FnZUlkLCBuZX" +
  "dUZXh0KTsKICAgIH0KfSk7CgoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09IC8vCi8vID09PT09PT09PT0gU0NSRUVOU0hPVCBTWVNURU0gPT09PT09PSAvLw" +
  "ovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy8KCmNvbnN0IHRh" +
  "a2VTY3JlZW5zaG90ID0gYXN5bmMgKGN0eCwgdXJsLCBjYXB0aW9uVGl0bGUpID0+IHsKIC" +
  "AgIGlmICghaXNCcm93c2VyUmVhZHkgfHwgIWJyb3dzZXIpIHsKICAgICAgICByZXR1cm4g" +
  "cmVwbHlIVE1MKGN0eCwgIuKdjCBCcm93c2VyIHRpZGFrIHJlYWR5LiIpOwogICAgfQoKIC" +
  "AgIGxldCBwYWdlID0gbnVsbDsKICAgIGxldCBzc1BhdGggPSBudWxsOwogICAgY29uc3Qg" +
  "d2FpdE1zZyA9IGF3YWl0IHJlcGx5SFRNTChjdHgsIGDij7MgU2VkYW5nIG1lbXByb3Nlcy" +
  "4uLmApOwoKICAgIHRyeSB7CiAgICAgICAgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFn" +
  "ZSgpOwogICAgICAgIGF3YWl0IHBhZ2Uuc2V0RGVmYXVsdFRpbWVvdXQoU0NSRUVOU0hPVF" +
  "9USU1FT1VUX01TKTsKICAgICAgICBhd2FpdCBwYWdlLnNldFZpZXdwb3J0KG51bGwpOwog" +
  "ICAgICAgIGF3YWl0IHBhZ2Uuc2V0VXNlckFnZW50KHNldHRpbmdzLkNVUlJFTlRfVVNFUl" +
  "9BR0VOVCk7CgogICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJ2l2YXNtcy5jb20nKSAmJiBz" +
  "ZXR0aW5ncy5DRl9DTEVBUkFOQ0VfVkFMVUUpIHsKICAgICAgICAgICAgYXdhaXQgcGFnZS" +
  "5zZXRDb29raWUoewogICAgICAgICAgICAgICAgbmFtZTogJ2NmX2NsZWFyYW5jZScsCiAg" +
  "ICAgICAgICAgICAgICB2YWx1ZTogc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1ZBTFVFLAogIC" +
  "AgICAgICAgICAgICAgZG9tYWluOiAnLml2YXNtcy5jb20nCiAgICAgICAgICAgIH0pOwog" +
  "ICAgICAgIH0KCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYWdlLmdvdG8odX" +
  "JsLCB7IAogICAgICAgICAgICB3YWl0VW50aWw6ICduZXR3b3JraWRsZTInLCAKICAgICAg" +
  "ICAgICAgdGltZW91dDogU0NSRUVOU0hPVF9USU1FT1VUX01TIAogICAgICAgIH0pOwogIC" +
  "AgICAgIAogICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlID8gcmVzcG9uc2Uuc3Rh" +
  "dHVzKCkgOiAnTi9BJzsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbW" +
  "VvdXQociwgMzAwMCkpOwoKICAgICAgICBzc1BhdGggPSBwYXRoLmpvaW4oU1NfRElSLCBg" +
  "c2NyZWVuc2hvdF8ke0RhdGUubm93KCl9LmpwZWdgKTsKICAgICAgICBhd2FpdCBwYWdlLn" +
  "NjcmVlbnNob3QoeyAKICAgICAgICAgICAgcGF0aDogc3NQYXRoLCAKICAgICAgICAgICAg" +
  "ZnVsbFBhZ2U6IGZhbHNlLAogICAgICAgICAgICB0eXBlOiAnanBlZycsIAogICAgICAgIC" +
  "AgICBxdWFsaXR5OiA4NQogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCBjdHgudGVsZWdy" +
  "YW0uZGVsZXRlTWVzc2FnZShjdHguY2hhdC5pZCwgd2FpdE1zZy5tZXNzYWdlX2lkKS5jYX" +
  "RjaCgoKSA9PiB7fSk7CgogICAgICAgIGNvbnN0IGNhcHRpb25UZXh0ID0gYDxwcmU+8J+T" +
  "uCBIYXNpbCBzY3JlZW5zaG90XG5cblVSTCA6ICR7dXJsfVxuU3RhdHVzIDogJHtzdGF0dX" +
  "N9XG5XYWt0dSA6ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2lkLUlEJyl9" +
  "PC9wcmU+YDsKICAgICAgICBhd2FpdCBjdHgucmVwbHlXaXRoUGhvdG8oeyBzb3VyY2U6IH" +
  "NzUGF0aCB9LCB7IGNhcHRpb246IGNhcHRpb25UZXh0LCBwYXJzZV9tb2RlOiAnSFRNTCcg" +
  "fSk7CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBhd2FpdCBjdHgudGVsZWdyYW" +
  "0uZWRpdE1lc3NhZ2VUZXh0KAogICAgICAgICAgICBjdHguY2hhdC5pZCwgCiAgICAgICAg" +
  "ICAgIHdhaXRNc2cubWVzc2FnZV9pZCwgCiAgICAgICAgICAgIG51bGwsIAogICAgICAgIC" +
  "AgICBgPHByZT7inYwgR2FnYWwgYW1iaWwgc2NyZWVuc2hvdFxuJHtlcnJvci5tZXNzYWdl" +
  "fTwvcHJlPmAsIAogICAgICAgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgICAgIC" +
  "AgKTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKHBhZ2UpIGF3YWl0IHBhZ2UuY2xv" +
  "c2UoKTsKICAgICAgICBpZiAoc3NQYXRoICYmIGZzLmV4aXN0c1N5bmMoc3NQYXRoKSkgZn" +
  "MudW5saW5rU3luYyhzc1BhdGgpOwogICAgfQp9OwoKY29uc3QgdGFrZURhc2hib2FyZFNj" +
  "cmVlbnNob3QgPSBhc3luYyAoY3R4KSA9PiB7CiAgICBhd2FpdCB0YWtlU2NyZWVuc2hvdC" +
  "hjdHgsIERBU0hfVVJMLCAnRGFzaGJvYXJkIHNjcmVlbnNob3QnKTsKfTsKCmNvbnN0IHRh" +
  "a2VMaXZlU21zU2NyZWVuc2hvdCA9IGFzeW5jIChjdHgpID0+IHsKICAgIGF3YWl0IHRha2" +
  "VTY3JlZW5zaG90KGN0eCwgTElWRV9TTVNfVVJMLCAnTGl2ZSBTTVMgc2NyZWVuc2hvdCcp" +
  "Owp9OwoKY29uc3QgdGFrZU1hY2Jvb2tTY3JlZW5zaG90ID0gYXN5bmMgKGN0eCwgdGFyZ2" +
  "V0VXJsKSA9PiB7CiAgICBpZiAoIWlzQnJvd3NlclJlYWR5IHx8ICFicm93c2VyKSB7CiAg" +
  "ICAgICAgcmV0dXJuIHJlcGx5SFRNTChjdHgsICLinYwgQnJvd3NlciB0aWRhayByZWFkeS" +
  "4iKTsKICAgIH0KCiAgICBsZXQgcGFnZSA9IG51bGw7CiAgICBsZXQgc3NQYXRoID0gbnVs" +
  "bDsKICAgIGNvbnN0IHdhaXRNc2cgPSBhd2FpdCByZXBseUhUTUwoY3R4LCBgPHByZT5TY3" +
  "JlZW5zaG90IFN0YXR1c1xuXG5TZWRhbmcgbWVuZ2FtYmlsIHNjcmVlbnNob3RcbuKPsyBM" +
  "b2FkaW5nIDogJHt0YXJnZXRVcmx9PC9wcmU+YCk7CgogICAgdHJ5IHsKICAgICAgICBpZi" +
  "AoIXRhcmdldFVybC5zdGFydHNXaXRoKCdodHRwJykpIHsKICAgICAgICAgICAgdGhyb3cg" +
  "bmV3IEVycm9yKCdVUkwgaGFydXMgZGlhd2FsaSBkZW5nYW4gaHR0cDovLyBhdGF1IGh0dH" +
  "BzOi8vJyk7CiAgICAgICAgfQoKICAgICAgICBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQ" +
  "YWdlKCk7CiAgICAgICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydChudWxsKTsKICAgICAgIC" +
  "Bhd2FpdCBwYWdlLnNldFVzZXJBZ2VudChNQUNCT09LX1VTRVJfQUdFTlQpOwogICAgICAg" +
  "IAogICAgICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGVPbk5ld0RvY3VtZW50KCgpID0+IHsKIC" +
  "AgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3dlYmRyaXZl" +
  "cicsIHsKICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdW5kZWZpbmVkCiAgICAgICAgIC" +
  "AgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAodGFyZ2V0VXJsLmluY2x1ZGVzKCdp" +
  "dmFzbXMuY29tJykgJiYgc2V0dGluZ3MuQ0ZfQ0xFQVJBTkNFX1ZBTFVFKSB7CiAgICAgIC" +
  "AgICAgIGF3YWl0IHBhZ2Uuc2V0Q29va2llKHsKICAgICAgICAgICAgICAgIG5hbWU6ICdj" +
  "Zl9jbGVhcmFuY2UnLAogICAgICAgICAgICAgICAgdmFsdWU6IHNldHRpbmdzLkNGX0NMRU" +
  "FSQU5DRV9WQUxVRSwKICAgICAgICAgICAgICAgIGRvbWFpbjogJy5pdmFzbXMuY29tJwog" +
  "ICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYX" +
  "dhaXQgcGFnZS5nb3RvKHRhcmdldFVybCwgeyAKICAgICAgICAgICAgd2FpdFVudGlsOiAn" +
  "bmV0d29ya2lkbGUyJywKICAgICAgICAgICAgdGltZW91dDogNDUwMDAKICAgICAgICB9KT" +
  "sKICAgICAgICAKICAgICAgICBjb25zdCBzdGF0dXMgPSByZXNwb25zZSA/IHJlc3BvbnNl" +
  "LnN0YXR1cygpIDogJ04vQSc7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZS" +
  "A9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApKTsKCiAgICAgICAgc3NQYXRoID0gcGF0" +
  "aC5qb2luKFNTX0RJUiwgYG1hY2Jvb2tfc3NfJHtEYXRlLm5vdygpfS5qcGVnYCk7CiAgIC" +
  "AgICAgYXdhaXQgcGFnZS5zY3JlZW5zaG90KHsgCiAgICAgICAgICAgIHBhdGg6IHNzUGF0" +
  "aCwgCiAgICAgICAgICAgIGZ1bGxQYWdlOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogJ2" +
  "pwZWcnLCAKICAgICAgICAgICAgcXVhbGl0eTogOTAKICAgICAgICB9KTsKCiAgICAgICAg" +
  "YXdhaXQgY3R4LnRlbGVncmFtLmRlbGV0ZU1lc3NhZ2UoY3R4LmNoYXQuaWQsIHdhaXRNc2" +
  "cubWVzc2FnZV9pZCkuY2F0Y2goKCkgPT4ge30pOwoKICAgICAgICBjb25zdCBjYXB0aW9u" +
  "VGV4dCA9IGA8cHJlPkhhc2lsIFNjcmVlbnNob3RcblxuVVJMIDogJHt0YXJnZXRVcmx9XG" +
  "5TdGF0dXMgOiAke3N0YXR1c308L3ByZT5gOwogICAgICAgIAogICAgICAgIGF3YWl0IGN0" +
  "eC5yZXBseVdpdGhQaG90bygKICAgICAgICAgICAgeyBzb3VyY2U6IHNzUGF0aCB9LCAKIC" +
  "AgICAgICAgICAgeyBjYXB0aW9uOiBjYXB0aW9uVGV4dCwgcGFyc2VfbW9kZTogJ0hUTUwn" +
  "IH0KICAgICAgICApOwoKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS" +
  "5lcnJvcihjaGFsay5yZWQoYFtTVEFUVVNdIOKdjCBTY3JlZW5zaG90IEVycm9yOiAke2Vy" +
  "cm9yLm1lc3NhZ2V9YCkpOwogICAgICAgIGF3YWl0IGN0eC50ZWxlZ3JhbS5lZGl0TWVzc2" +
  "FnZVRleHQoCiAgICAgICAgICAgIGN0eC5jaGF0LmlkLCAKICAgICAgICAgICAgd2FpdE1z" +
  "Zy5tZXNzYWdlX2lkLCAKICAgICAgICAgICAgbnVsbCwgCiAgICAgICAgICAgIGA8cHJlPk" +
  "Vycm9yXG5cbuKdjCBHYWdhbCBtZW5nYW1iaWwgc2NyZWVuc2hvdFxuJHtlcnJvci5tZXNz" +
  "YWdlfTwvcHJlPmAsIAogICAgICAgICAgICB7IHBhcnNlX21vZGU6ICdIVE1MJyB9CiAgIC" +
  "AgICAgKTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKHBhZ2UpIGF3YWl0IHBhZ2Uu" +
  "Y2xvc2UoKS5jYXRjaCgoKSA9PiB7fSk7CiAgICAgICAgaWYgKHNzUGF0aCAmJiBmcy5leG" +
  "lzdHNTeW5jKHNzUGF0aCkpIHsKICAgICAgICAgICAgdHJ5IHsgZnMudW5saW5rU3luYyhz" +
  "c1BhdGgpOyB9IGNhdGNoIChlKSB7fQogICAgICAgIH0KICAgIH0KfTsKCi8vID09PT09PT" +
  "09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwovLyA9PT09PT09PT09IEVYUE9S" +
  "VCBOVU1CRVJTID09PT09PT09PT0gLy8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT" +
  "09PT09PT09PT09IC8vCgpjb25zdCBzaW1wbGVEaXJlY3RFeHBvcnQgPSBhc3luYyAoY3R4" +
  "KSA9PiB7CiAgICAvLyBDZWsgYXBha2FoIHN1ZGFoIGFkYSBjcmVkZW50aWFscwogICAgaW" +
  "YgKCFzZXR0aW5ncy5DRl9DTEVBUkFOQ0VfVkFMVUUpIHsKICAgICAgICByZXR1cm4gYXdh" +
  "aXQgY3R4LnJlcGx5V2l0aEhUTUwoCiAgICAgICAgICAgIGA8cHJlPkV4cG9ydCBTdGF0dX" +
  "Ncblxu4p2MIDxiPkNGIENsZWFyYW5jZSB0aWRhayBkaXRlbXVrYW48L2I+XG5cblNpbGFr" +
  "YW4gbG9naW4gZHVsdSBkZW5nYW4gL2xvZ2luPC9wcmU+YCwKICAgICAgICAgICAgeyByZX" +
  "BseV90b19tZXNzYWdlX2lkOiBjdHgubWVzc2FnZS5tZXNzYWdlX2lkIH0KICAgICAgICAp" +
  "OwogICAgfQogICAgCiAgICBjb25zdCB3YWl0TXNnID0gYXdhaXQgcmVwbHlIVE1MKGN0eC" +
  "wgYDxwcmU+RVhQT1JUIE5VTUJFUlxuXG7wn5OlIE1lbXVsYWkgZXhwb3J0IG51bWJlcnMu" +
  "Li48L3ByZT5gKTsKICAgIAogICAgbGV0IHBhZ2UgPSBudWxsOwogICAgCiAgICB0cnkgew" +
  "ogICAgICAgIGlmICghaXNCcm93c2VyUmVhZHkgfHwgIWJyb3dzZXIpIHsKICAgICAgICAg" +
  "ICAgdGhyb3cgbmV3IEVycm9yKCJCcm93c2VyIHRpZGFrIHJlYWR5Iik7CiAgICAgICAgfQ" +
  "ogICAgICAgIAogICAgICAgIC8vIEJ1YXQgcGFnZSBiYXJ1CiAgICAgICAgcGFnZSA9IGF3" +
  "YWl0IGJyb3dzZXIubmV3UGFnZSgpOwogICAgICAgIGF3YWl0IHBhZ2Uuc2V0RGVmYXVsdE" +
  "5hdmlnYXRpb25UaW1lb3V0KDQ1MDAwKTsKICAgICAgICBhd2FpdCBwYWdlLnNldERlZmF1" +
  "bHRUaW1lb3V0KDQ1MDAwKTsKICAgICAgICAKICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3" +
  "NhZ2UoY3R4LCB3YWl0TXNnLm1lc3NhZ2VfaWQsIGA8cHJlPkVYUE9SVCBOVU1CRVJcblxu" +
  "8J+MkCBTZXR1cCBicm93c2VyLi4uPC9wcmU+YCk7CiAgICAgICAgCiAgICAgICAgLy8gU2" +
  "V0IFVzZXIgQWdlbnQKICAgICAgICBhd2FpdCBwYWdlLnNldFVzZXJBZ2VudChzZXR0aW5n" +
  "cy5DVVJSRU5UX1VTRVJfQUdFTlQgfHwgTUFDQk9PS19VU0VSX0FHRU5UKTsKICAgICAgIC" +
  "AKICAgICAgICAvLyBTZXQgY29va2llcyAoaGFueWEgY2ZfY2xlYXJhbmNlIHlhbmcgcGVu" +
  "dGluZykKICAgICAgICBhd2FpdCBwYWdlLnNldENvb2tpZSh7CiAgICAgICAgICAgIG5hbW" +
  "U6ICdjZl9jbGVhcmFuY2UnLAogICAgICAgICAgICB2YWx1ZTogc2V0dGluZ3MuQ0ZfQ0xF" +
  "QVJBTkNFX1ZBTFVFLAogICAgICAgICAgICBkb21haW46ICcuaXZhc21zLmNvbScsCiAgIC" +
  "AgICAgICAgIHBhdGg6ICcvJywKICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsCiAgICAg" +
  "ICAgICAgIHNlY3VyZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIF" +
  "NldHVwIGRvd25sb2FkIHBhdGgKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBj" +
  "bGllbnQgPSBhd2FpdCBwYWdlLnRhcmdldCgpLmNyZWF0ZUNEUFNlc3Npb24oKTsKICAgIC" +
  "AgICAgICAgYXdhaXQgY2xpZW50LnNlbmQoJ1BhZ2Uuc2V0RG93bmxvYWRCZWhhdmlvcics" +
  "IHsKICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAnYWxsb3cnLAogICAgICAgICAgICAgIC" +
  "AgZG93bmxvYWRQYXRoOiBURU1QX0RJUgogICAgICAgICAgICB9KTsKICAgICAgICB9IGNh" +
  "dGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdygnW0VYUE" +
  "9SVF0g4pqg77iPIENEUFNlc3Npb24gZXJyb3IsIGNvbnRpbnVlIGFueXdheScpKTsKICAg" +
  "ICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gU3RlcCAxOiBBa3NlcyBoYWxhbWFuIG51bW" +
  "JlcnMKICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0TXNnLm1lc3Nh" +
  "Z2VfaWQsIGA8cHJlPkVYUE9SVCBOVU1CRVJcblxu8J+MkCBNZW5nYWtzZXMgaGFsYW1hbi" +
  "BudW1iZXJzLi4uPC9wcmU+YCk7CiAgICAgICAgCiAgICAgICAgY29uc3QgbnVtYmVyc1Vy" +
  "bCA9ICdodHRwczovL3d3dy5pdmFzbXMuY29tL3BvcnRhbC9udW1iZXJzJzsKICAgICAgIC" +
  "Bjb25zb2xlLmxvZyhjaGFsay5jeWFuKGBbRVhQT1JUXSBNZW5nYWtzZXM6ICR7bnVtYmVy" +
  "c1VybH1gKSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYW" +
  "dlLmdvdG8obnVtYmVyc1VybCwgewogICAgICAgICAgICB3YWl0VW50aWw6ICdkb21jb250" +
  "ZW50bG9hZGVkJywKICAgICAgICAgICAgdGltZW91dDogMzAwMDAKICAgICAgICB9KTsKIC" +
  "AgICAgICAKICAgICAgICBjb25zdCBzdGF0dXMgPSByZXNwb25zZSA/IHJlc3BvbnNlLnN0" +
  "YXR1cygpIDogJ04vQSc7CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsuY3lhbihgW0VYUE" +
  "9SVF0gU3RhdHVzOiAke3N0YXR1c31gKSk7CiAgICAgICAgCiAgICAgICAgLy8gVHVuZ2d1" +
  "IGhhbGFtYW4gbG9hZAogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2" +
  "V0VGltZW91dChyZXNvbHZlLCA1MDAwKSk7CiAgICAgICAgCiAgICAgICAgLy8gU3RlcCAy" +
  "OiBDZWsgYXBha2FoIGRpIGhhbGFtYW4gbnVtYmVycwogICAgICAgIGNvbnN0IGN1cnJlbn" +
  "RVcmwgPSBhd2FpdCBwYWdlLnVybCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgaWYg" +
  "KCFjdXJyZW50VXJsLmluY2x1ZGVzKCcvbnVtYmVycycpKSB7CiAgICAgICAgICAgIC8vIE" +
  "11bmdraW4gZGlhcmFoa2FuIGtlIGxvZ2luIGF0YXUgZXJyb3IKICAgICAgICAgICAgaWYg" +
  "KGN1cnJlbnRVcmwuaW5jbHVkZXMoJy9sb2dpbicpKSB7CiAgICAgICAgICAgICAgICBhd2" +
  "FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0TXNnLm1lc3NhZ2VfaWQsIGA8cHJlPkVY" +
  "UE9SVCBOVU1CRVJcblxu8J+UkSBUZXJkZXRla3NpIGhhbGFtYW4gbG9naW48L3ByZT5gKT" +
  "sKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ29iYSBsb2dpbiBkZW5n" +
  "YW4gdXNlcm5hbWUvcGFzc3dvcmQgamlrYSBhZGEKICAgICAgICAgICAgICAgIGlmIChzZX" +
  "R0aW5ncy5JVkFTX1VTRVJOQU1FICYmIHNldHRpbmdzLklWQVNfUEFTU1dPUkQpIHsKICAg" +
  "ICAgICAgICAgICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0TXNnLm" +
  "1lc3NhZ2VfaWQsIGA8cHJlPkVYUE9SVCBOVU1CRVJcblxu8J+TpyBMb2dpbiBkZW5nYW4g" +
  "JHtzZXR0aW5ncy5JVkFTX1VTRVJOQU1FfS4uLjwvcHJlPmApOwogICAgICAgICAgICAgIC" +
  "AgICAgIAogICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoKHVzZXJu" +
  "YW1lLCBwYXNzd29yZCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXJpIG" +
  "ZpZWxkIGxvZ2luCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsRmllbGQg" +
  "PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPSJlbWFpbCJdLCBpbnB1dF" +
  "tuYW1lPSJlbWFpbCJdLCBpbnB1dFtuYW1lPSJ1c2VybmFtZSJdJyk7CiAgICAgICAgICAg" +
  "ICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbG" +
  "VjdG9yKCdpbnB1dFt0eXBlPSJwYXNzd29yZCJdJyk7CiAgICAgICAgICAgICAgICAgICAg" +
  "ICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbl" +
  "t0eXBlPSJzdWJtaXQiXSwgaW5wdXRbdHlwZT0ic3VibWl0Il0nKTsKICAgICAgICAgICAg" +
  "ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbWFpbEZpZWxkKS" +
  "BlbWFpbEZpZWxkLnZhbHVlID0gdXNlcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAg" +
  "IGlmIChwYXNzd29yZEZpZWxkKSBwYXNzd29yZEZpZWxkLnZhbHVlID0gcGFzc3dvcmQ7Ci" +
  "AgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJtaXRCdG4pIHN1Ym1pdEJ0bi5jbGlj" +
  "aygpOwogICAgICAgICAgICAgICAgICAgIH0sIHNldHRpbmdzLklWQVNfVVNFUk5BTUUsIH" +
  "NldHRpbmdzLklWQVNfUEFTU1dPUkQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAg" +
  "ICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dC" +
  "hyZXNvbHZlLCA1MDAwKSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg" +
  "ICAgICAgLy8gQ29iYSBha3NlcyBudW1iZXJzIGxhZ2kKICAgICAgICAgICAgICAgICAgIC" +
  "Bhd2FpdCBwYWdlLmdvdG8obnVtYmVyc1VybCwgewogICAgICAgICAgICAgICAgICAgICAg" +
  "ICB3YWl0VW50aWw6ICdkb21jb250ZW50bG9hZGVkJywKICAgICAgICAgICAgICAgICAgIC" +
  "AgICAgdGltZW91dDogMzAwMDAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAg" +
  "ICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZX" +
  "NvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMCkpOwogICAgICAgICAgICAgICAg" +
  "fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkRpYXJhaG" +
  "thbiBrZSBsb2dpbiBwYWdlLiBTZXR1cCBsb2dpbiBkZW5nYW4gL2xvZ2luIik7CiAgICAg" +
  "ICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aH" +
  "JvdyBuZXcgRXJyb3IoYFRpZGFrIGJpc2EgbWVuZ2Frc2VzIGhhbGFtYW4gbnVtYmVycy4g" +
  "VVJMOiAke2N1cnJlbnRVcmx9YCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIC" +
  "AgCiAgICAgICAgLy8gU3RlcCAzOiBDYXJpIGRhbiBrbGlrIHRvbWJvbCBleHBvcnQKICAg" +
  "ICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0TXNnLm1lc3NhZ2VfaWQsIG" +
  "A8cHJlPkVYUE9SVCBOVU1CRVJcblxu8J+UjSBNZW5jYXJpIHRvbWJvbCBleHBvcnQuLi48" +
  "L3ByZT5gKTsKICAgICAgICAKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID" +
  "0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpOwogICAgICAgIAogICAgICAgIGxldCBl" +
  "eHBvcnRDbGlja2VkID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgLy8gQ29iYSBiZWJlcm" +
  "FwYSBjYXJhIGtsaWsgZXhwb3J0CiAgICAgICAgZXhwb3J0Q2xpY2tlZCA9IGF3YWl0IHBh" +
  "Z2UuZXZhbHVhdGUoKCkgPT4gewogICAgICAgICAgICAvLyBDYXJhIDE6IENhcmkgdG9tYm" +
  "9sIGRlbmdhbiB0ZXh0ICJFeHBvcnQiCiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBk" +
  "b2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24sIGEsIC5idG4sIGlucHV0W3R5cG" +
  "U9ImJ1dHRvbiJdJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgKGNvbnN0IGJ0" +
  "biBvZiBidXR0b25zKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gKGJ0bi50ZX" +
  "h0Q29udGVudCB8fCBidG4uaW5uZXJUZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpOwogICAg" +
  "ICAgICAgICAgICAgY29uc3QgaHJlZiA9IGJ0bi5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fC" +
  "AnJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVk" +
  "ZXMoJ2V4cG9ydCcpIHx8IHRleHQuaW5jbHVkZXMoJ2Rvd25sb2FkJykgfHwgCiAgICAgIC" +
  "AgICAgICAgICAgICAgdGV4dC5pbmNsdWRlcygndW5kdWgnKSB8fCB0ZXh0LmluY2x1ZGVz" +
  "KCdla3Nwb3InKSB8fAogICAgICAgICAgICAgICAgICAgIGhyZWYuaW5jbHVkZXMoJ2V4cG" +
  "9ydCcpIHx8IGhyZWYuaW5jbHVkZXMoJ2Rvd25sb2FkJykpIHsKICAgICAgICAgICAgICAg" +
  "ICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgZXhwb3J0IG" +
  "J1dHRvbjonLCB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg" +
  "ICAgICBpZiAoYnRuLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnKSB7CiAgICAgIC" +
  "AgICAgICAgICAgICAgICAgIC8vIFVudHVrIGxpbmssIGtsaWsgbGFuZ3N1bmcKICAgICAg" +
  "ICAgICAgICAgICAgICAgICAgYnRuLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgIC" +
  "AgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg" +
  "ICAgICAgICAgICAgICAgIC8vIFVudHVrIGJ1dHRvbiwga2xpawogICAgICAgICAgICAgIC" +
  "AgICAgICAgICBidG4uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu" +
  "IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgIC" +
  "AgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDYXJhIDI6IENhcmkgbGlu" +
  "ayBkZW5nYW4gaHJlZiB5YW5nIG1lbmdhbmR1bmcgZXhwb3J0CiAgICAgICAgICAgIGNvbn" +
  "N0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj0iZXhwb3J0" +
  "Il0sIGFbaHJlZio9ImRvd25sb2FkIl0nKTsKICAgICAgICAgICAgaWYgKGxpbmtzLmxlbm" +
  "d0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxpbmtzWzBdLmNsaWNrKCk7CiAgICAgICAg" +
  "ICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIC" +
  "AgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGlm" +
  "ICghZXhwb3J0Q2xpY2tlZCkgewogICAgICAgICAgICAvLyBDYXJhIDM6IENvYmEgY2FyaS" +
  "BkZW5nYW4gY2xhc3MgYXRhdSBJRAogICAgICAgICAgICBleHBvcnRDbGlja2VkID0gYXdh" +
  "aXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBleHBvcn" +
  "RFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzcyo9ImV4cG9y" +
  "dCJdLCBbaWQqPSJleHBvcnQiXSwgW2NsYXNzKj0iZG93bmxvYWQiXSwgW2lkKj0iZG93bm" +
  "xvYWQiXScpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0" +
  "IGVsIG9mIGV4cG9ydEVsZW1lbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKIC" +
  "AgICAgICAgICAgICAgICAgICAgICAgZWwuY2xpY2soKTsKICAgICAgICAgICAgICAgICAg" +
  "ICAgICAgY29uc29sZS5sb2coJ0NsaWNrZWQgZXhwb3J0IGVsZW1lbnQgYnkgY2xhc3MvaW" +
  "QnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAg" +
  "ICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW" +
  "51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAg" +
  "ICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIC" +
  "AgICAKICAgICAgICBpZiAoIWV4cG9ydENsaWNrZWQpIHsKICAgICAgICAgICAgLy8gQ2Fy" +
  "YSA0OiBDb2JhIGFrc2VzIFVSTCBleHBvcnQgbGFuZ3N1bmcKICAgICAgICAgICAgYXdhaX" +
  "Qgc2FmZUVkaXRNZXNzYWdlKGN0eCwgd2FpdE1zZy5tZXNzYWdlX2lkLCBgPHByZT5FWFBP" +
  "UlQgTlVNQkVSXG5cbvCflJcgTWVuY29iYSBVUkwgZXhwb3J0IGxhbmdzdW5nLi4uPC9wcm" +
  "U+YCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBleHBvcnRVcmwgPSAnaHR0" +
  "cHM6Ly93d3cuaXZhc21zLmNvbS9wb3J0YWwvbnVtYmVycy9leHBvcnQnOwogICAgICAgIC" +
  "AgICAKICAgICAgICAgICAgYXdhaXQgcGFnZS5nb3RvKGV4cG9ydFVybCwgewogICAgICAg" +
  "ICAgICAgICAgd2FpdFVudGlsOiAnbmV0d29ya2lkbGUwJywKICAgICAgICAgICAgICAgIH" +
  "RpbWVvdXQ6IDMwMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAg" +
  "ICAgZXhwb3J0Q2xpY2tlZCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIG" +
  "lmICghZXhwb3J0Q2xpY2tlZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRp" +
  "ZGFrIGJpc2EgbWVuZW11a2FuIHRvbWJvbCBleHBvcnQiKTsKICAgICAgICB9CiAgICAgIC" +
  "AgCiAgICAgICAgLy8gU3RlcCA0OiBUdW5nZ3UgZmlsZSBkb3dubG9hZAogICAgICAgIGF3" +
  "YWl0IHNhZmVFZGl0TWVzc2FnZShjdHgsIHdhaXRNc2cubWVzc2FnZV9pZCwgYDxwcmU+RV" +
  "hQT1JUIE5VTUJFUlxuXG7ij7MgTWVudW5nZ3UgZmlsZSBkb3dubG9hZC4uLiAoMTUgZGV0" +
  "aWspPC9wcmU+YCk7CiAgICAgICAgCiAgICAgICAgbGV0IGRvd25sb2FkZWRGaWxlID0gbn" +
  "VsbDsKICAgICAgICBjb25zdCBtYXhXYWl0VGltZSA9IDE1MDAwOyAvLyAxNSBkZXRpawog" +
  "ICAgICAgIGNvbnN0IGNoZWNrSW50ZXJ2YWwgPSAxMDAwOyAvLyBDZWsgc2V0aWFwIDEgZG" +
  "V0aWsKICAgICAgICAKICAgICAgICBmb3IgKGxldCBlbGFwc2VkID0gMDsgZWxhcHNlZCA8" +
  "IG1heFdhaXRUaW1lOyBlbGFwc2VkICs9IGNoZWNrSW50ZXJ2YWwpIHsKICAgICAgICAgIC" +
  "AgLy8gQ2FyaSBmaWxlIGJhcnUgZGkgVEVNUF9ESVIKICAgICAgICAgICAgY29uc3QgZmls" +
  "ZXMgPSBmcy5yZWFkZGlyU3luYyhURU1QX0RJUik7CiAgICAgICAgICAgIGNvbnN0IGV4Y2" +
  "VsRmlsZXMgPSBmaWxlcy5maWx0ZXIoZiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBs" +
  "b3dlciA9IGYudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiBsb3dlci" +
  "5lbmRzV2l0aCgnLnhsc3gnKSB8fCAKICAgICAgICAgICAgICAgICAgICAgICBsb3dlci5l" +
  "bmRzV2l0aCgnLnhscycpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIuaW5jbH" +
  "VkZXMoJ251bWJlcnMnKSB8fAogICAgICAgICAgICAgICAgICAgICAgIGxvd2VyLmluY2x1" +
  "ZGVzKCdleHBvcnQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIC" +
  "AgICBpZiAoZXhjZWxGaWxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAvLyBB" +
  "bWJpbCBmaWxlIHRlcmJhcnUgYmVyZGFzYXJrYW4gd2FrdHUgbW9kaWZpa2FzaQogICAgIC" +
  "AgICAgICAgICAgZXhjZWxGaWxlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAg" +
  "ICAgICAgY29uc3Qgc3RhdEEgPSBmcy5zdGF0U3luYyhwYXRoLmpvaW4oVEVNUF9ESVIsIG" +
  "EpKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0QiA9IGZzLnN0YXRTeW5jKHBh" +
  "dGguam9pbihURU1QX0RJUiwgYikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG" +
  "F0Qi5tdGltZU1zIC0gc3RhdEEubXRpbWVNczsKICAgICAgICAgICAgICAgIH0pOwogICAg" +
  "ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBsYXRlc3RGaWxlID0gZXhjZW" +
  "xGaWxlc1swXTsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2lu" +
  "KFRFTVBfRElSLCBsYXRlc3RGaWxlKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID" +
  "0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAg" +
  "ICAgICAvLyBQYXN0aWthbiBmaWxlIGN1a3VwIGJlc2FyICh0aWRhayBjb3JydXB0ZWQpCi" +
  "AgICAgICAgICAgICAgICBpZiAoc3RhdHMuc2l6ZSA+IDEwMjQpIHsKICAgICAgICAgICAg" +
  "ICAgICAgICBkb3dubG9hZGVkRmlsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcG" +
  "F0aDogZmlsZVBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGxhdGVzdEZp" +
  "bGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHN0YXRzLnNpemUsCiAgICAgIC" +
  "AgICAgICAgICAgICAgICAgIG10aW1lOiBzdGF0cy5tdGltZQogICAgICAgICAgICAgICAg" +
  "ICAgIH07CiAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgIGJyZW" +
  "FrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAg" +
  "ICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3Mgc2V0aWFwIDUgZGV0aWsKICAgICAgICAgIC" +
  "AgaWYgKGVsYXBzZWQgPiAwICYmIGVsYXBzZWQgJSA1MDAwID09PSAwKSB7CiAgICAgICAg" +
  "ICAgICAgICBjb25zdCByZW1haW5pbmcgPSAobWF4V2FpdFRpbWUgLSBlbGFwc2VkKSAvID" +
  "EwMDA7CiAgICAgICAgICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0" +
  "TXNnLm1lc3NhZ2VfaWQsIAogICAgICAgICAgICAgICAgICAgIGA8cHJlPkVYUE9SVCBOVU" +
  "1CRVJcblxu4o+zIE1lbnVuZ2d1IGZpbGUuLi4gKCR7cmVtYWluaW5nfXMgdGVyc2lzYSk8" +
  "L3ByZT5gKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgYXdhaX" +
  "QgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGNoZWNrSW50" +
  "ZXJ2YWwpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCFkb3dubG9hZGVkRm" +
  "lsZSkgewogICAgICAgICAgICAvLyBDb2JhIHR1bmdndSBla3N0cmEgNSBkZXRpawogICAg" +
  "ICAgICAgICBhd2FpdCBzYWZlRWRpdE1lc3NhZ2UoY3R4LCB3YWl0TXNnLm1lc3NhZ2VfaW" +
  "QsIGA8cHJlPkVYUE9SVCBOVU1CRVJcblxu4o+zIFR1bmdndSBla3N0cmEgNSBkZXRpay4u" +
  "LjwvcHJlPmApOwogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IH" +
  "NldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpOwogICAgICAgICAgICAKICAgICAgICAgICAg" +
  "Ly8gQ2VrIGxhZ2kKICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYy" +
  "hURU1QX0RJUik7CiAgICAgICAgICAgIGNvbnN0IGV4Y2VsRmlsZXMgPSBmaWxlcy5maWx0" +
  "ZXIoZiA9PiBmLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy54bHN4JykgfHwgZi50b0xvd2" +
  "VyQ2FzZSgpLmVuZHNXaXRoKCcueGxzJykpOwogICAgICAgICAgICAKICAgICAgICAgICAg" +
  "aWYgKGV4Y2VsRmlsZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZXhjZWxGaW" +
  "xlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdEEg" +
  "PSBmcy5zdGF0U3luYyhwYXRoLmpvaW4oVEVNUF9ESVIsIGEpKTsKICAgICAgICAgICAgIC" +
  "AgICAgICBjb25zdCBzdGF0QiA9IGZzLnN0YXRTeW5jKHBhdGguam9pbihURU1QX0RJUiwg" +
  "YikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0Qi5tdGltZU1zIC0gc3RhdE" +
  "EubXRpbWVNczsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAg" +
  "ICAgICAgICAgICBjb25zdCBsYXRlc3RGaWxlID0gZXhjZWxGaWxlc1swXTsKICAgICAgIC" +
  "AgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKFRFTVBfRElSLCBsYXRlc3RG" +
  "aWxlKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gZnMuc3RhdFN5bmMoZmlsZV" +
  "BhdGgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoc3RhdHMuc2l6" +
  "ZSA+IDEwMjQpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZGVkRmlsZSA9IHsKIC" +
  "AgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZVBhdGgsCiAgICAgICAgICAgICAg" +
  "ICAgICAgICAgIG5hbWU6IGxhdGVzdEZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIH" +
  "NpemU6IHN0YXRzLnNpemUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAg" +
  "ICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWRvd2" +
  "5sb2FkZWRGaWxlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkZpbGUg" +
  "dGlkYWsgdGVyZG93bmxvYWQgc2V0ZWxhaCAyMCBkZXRpayIpOwogICAgICAgICAgICB9Ci" +
  "AgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFN0ZXAgNTogUHJvc2VzIGZpbGUgeWFu" +
  "ZyBkaWRvd25sb2FkCiAgICAgICAgYXdhaXQgc2FmZUVkaXRNZXNzYWdlKGN0eCwgd2FpdE" +
  "1zZy5tZXNzYWdlX2lkLCBgPHByZT5FWFBPUlQgTlVNQkVSXG5cbvCfk4ogTWVtcHJvc2Vz" +
  "IGZpbGUuLi48L3ByZT5gKTsKICAgICAgICAKICAgICAgICAvLyBSZW5hbWUgZmlsZSBkZW" +
  "5nYW4gdGltZXN0YW1wCiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50" +
  "b0xvY2FsZVN0cmluZygnaWQtSUQnKS5yZXBsYWNlKC9bLzpcc10vZywgJy0nKTsKICAgIC" +
  "AgICBjb25zdCBuZXdGaWxlTmFtZSA9IGBpdmFzbXNfbnVtYmVyc18ke3RpbWVzdGFtcH0u" +
  "eGxzeGA7CiAgICAgICAgY29uc3QgbmV3RmlsZVBhdGggPSBwYXRoLmpvaW4oVEVNUF9ESV" +
  "IsIG5ld0ZpbGVOYW1lKTsKICAgICAgICAKICAgICAgICAvLyBQYXN0aWthbiBleHRlbnNp" +
  "b24gLnhsc3gKICAgICAgICBpZiAoIWRvd25sb2FkZWRGaWxlLnBhdGgudG9Mb3dlckNhc2" +
  "UoKS5lbmRzV2l0aCgnLnhsc3gnKSkgewogICAgICAgICAgICBmcy5yZW5hbWVTeW5jKGRv" +
  "d25sb2FkZWRGaWxlLnBhdGgsIGRvd25sb2FkZWRGaWxlLnBhdGggKyAnLnhsc3gnKTsKIC" +
  "AgICAgICAgICAgZnMucmVuYW1lU3luYyhkb3dubG9hZGVkRmlsZS5wYXRoICsgJy54bHN4" +
  "JywgbmV3RmlsZVBhdGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZzLnJlbm" +
  "FtZVN5bmMoZG93bmxvYWRlZEZpbGUucGF0aCwgbmV3RmlsZVBhdGgpOwogICAgICAgIH0K" +
  "ICAgICAgICAKICAgICAgICAvLyBIaXR1bmcganVtbGFoIGJhcmlzIGRhdGEKICAgICAgIC" +
  "BsZXQgcm93Q291bnQgPSAwOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHdv" +
  "cmtib29rID0gWExTWC5yZWFkRmlsZShuZXdGaWxlUGF0aCk7CiAgICAgICAgICAgIGNvbn" +
  "N0IHNoZWV0TmFtZSA9IHdvcmtib29rLlNoZWV0TmFtZXNbMF07CiAgICAgICAgICAgIGNv" +
  "bnN0IGRhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya2Jvb2suU2hlZXRzW3" +
  "NoZWV0TmFtZV0pOwogICAgICAgICAgICByb3dDb3VudCA9IGRhdGEubGVuZ3RoOwogICAg" +
  "ICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG" +
  "93KGBbRVhQT1JUXSDinYwgVGlkYWsgYmlzYSBtZW1iYWNhIGZpbGU6ICR7ZS5tZXNzYWdl" +
  "fWApKTsKICAgICAgICAgICAgcm93Q291bnQgPSAnTi9BJzsKICAgICAgICB9CiAgICAgIC" +
  "AgCiAgICAgICAgLy8gU3RlcCA2OiBLaXJpbSBmaWxlIGtlIFRlbGVncmFtCiAgICAgICAg" +
  "YXdhaXQgY3R4LnRlbGVncmFtLmRlbGV0ZU1lc3NhZ2UoY3R4LmNoYXQuaWQsIHdhaXRNc2" +
  "cubWVzc2FnZV9pZCkuY2F0Y2goKCkgPT4ge30pOwogICAgICAgIAogICAgICAgIGNvbnN0" +
  "IGZpbGVTaXplS0IgPSAoZG93bmxvYWRlZEZpbGUuc2l6ZSAvIDEwMjQpLnRvRml4ZWQoMS" +
  "k7CiAgICAgICAgCiAgICAgICAgYXdhaXQgY3R4LnJlcGx5V2l0aERvY3VtZW50KAogICAg" +
  "ICAgICAgICB7IHNvdXJjZTogbmV3RmlsZVBhdGgsIGZpbGVuYW1lOiBuZXdGaWxlTmFtZS" +
  "B9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjYXB0aW9uOiBgPHByZT7inIUg" +
  "RVhQT1JUIEJFUkhBU0lMXG5cbvCfk4EgRmlsZTogJHtuZXdGaWxlTmFtZX1cbvCfk4ogRG" +
  "F0YTogJHtyb3dDb3VudH0gYmFyaXNcbvCfk48gU2l6ZTogJHtmaWxlU2l6ZUtCfSBLQlxu" +
  "4o+wIFdha3R1OiAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdpZC1JRCcpfV" +
  "xuXG5DcmVhdGVkIGJ5IEBLYW5nRGF5WjwvcHJlPmAsCiAgICAgICAgICAgICAgICBwYXJz" +
  "ZV9tb2RlOiAnSFRNTCcsCiAgICAgICAgICAgICAgICByZXBseV90b19tZXNzYWdlX2lkOi" +
  "BjdHgubWVzc2FnZS5tZXNzYWdlX2lkCiAgICAgICAgICAgIH0KICAgICAgICApOwogICAg" +
  "ICAgIAogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKGBbRVhQT1JUXSDinIUgRm" +
  "lsZSBiZXJoYXNpbCBkaWtpcmltOiAke25ld0ZpbGVOYW1lfWApKTsKICAgICAgICAKICAg" +
  "ICAgICAvLyBDbGVhbnVwIGZpbGUgc2V0ZWxhaCAxMCBkZXRpawogICAgICAgIHNldFRpbW" +
  "VvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhuZXdGaWxlUGF0" +
  "aCkpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZnMudW" +
  "5saW5rU3luYyhuZXdGaWxlUGF0aCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7" +
  "fQogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMDApOwogICAgICAgIAogICAgfSBjYX" +
  "RjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZChgW0VYUE9S" +
  "VF0g4p2MIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCkpOwogICAgICAgIAogICAgICAgIC" +
  "8vIEhhcHVzIHBlc2FuIHByb2dyZXNzCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXdh" +
  "aXQgY3R4LnRlbGVncmFtLmRlbGV0ZU1lc3NhZ2UoY3R4LmNoYXQuaWQsIHdhaXRNc2cubW" +
  "Vzc2FnZV9pZCk7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAKICAgICAgICBs" +
  "ZXQgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsKICAgICAgICBsZXQgc3VnZ2VzdG" +
  "lvbnMgPSAnJzsKICAgICAgICAKICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRl" +
  "cygnRVJSX0FCT1JURUQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXQ6OicpKS" +
  "B7CiAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gJ1xuXG7wn5KhIDxiPlNvbHVzaTo8L2I+" +
  "XG4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICcxLiBVcGRhdGUgQ0YgQ2xlYXJhbm" +
  "NlIGRlbmdhbiAvbG9naW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgICAgJzIuIENv" +
  "YmEgYWtzZXMgbWFudWFsIGRpIGJyb3dzZXIgZHVsdVxuJyArCiAgICAgICAgICAgICAgIC" +
  "AgICAgICAgICAnMy4gVHVuZ2d1IGJlYmVyYXBhIG1lbml0IGxhbHUgY29iYSBsYWdpJzsK" +
  "ICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKS" +
  "B8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdUaW1lb3V0JykpIHsKICAgICAgICAgICAg" +
  "c3VnZ2VzdGlvbnMgPSAnXG5cbvCfkqEgPGI+U29sdXNpOjwvYj5cbicgKwogICAgICAgIC" +
  "AgICAgICAgICAgICAgICAgJzEuIENvYmEgbGFnaSBuYW50aVxuJyArCiAgICAgICAgICAg" +
  "ICAgICAgICAgICAgICAnMi4gQ2VrIGtvbmVrc2kgaW50ZXJuZXRcbicgKwogICAgICAgIC" +
  "AgICAgICAgICAgICAgICAgJzMuIFNlcnZlciBtdW5na2luIHNpYnVrJzsKICAgICAgICB9" +
  "CiAgICAgICAgCiAgICAgICAgYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwoCiAgICAgICAgIC" +
  "AgIGA8cHJlPkV4cG9ydCBTdGF0dXNcblxu4p2MIDxiPkdhZ2FsIEV4cG9ydDwvYj5cblxu" +
  "JHtlcnJvck1lc3NhZ2V9JHtzdWdnZXN0aW9uc308L3ByZT5gLAogICAgICAgICAgICB7IH" +
  "JlcGx5X3RvX21lc3NhZ2VfaWQ6IGN0eC5tZXNzYWdlLm1lc3NhZ2VfaWQgfQogICAgICAg" +
  "ICk7CiAgICAgICAgCiAgICB9IGZpbmFsbHkgewogICAgICAgIC8vIFR1dHVwIHBhZ2UKIC" +
  "AgICAgICBpZiAocGFnZSAmJiAhcGFnZS5pc0Nsb3NlZCgpKSB7CiAgICAgICAgICAgIHRy" +
  "eSB7CiAgICAgICAgICAgICAgICBhd2FpdCBwYWdlLmNsb3NlKCk7CiAgICAgICAgICAgIH" +
  "0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfQogICAgfQp9OwoKYm90LmNvbW1hbmQoJ2V4cG9y" +
  "dG51bScsIG93bmVyT25seSwgYXN5bmMgKGN0eCkgPT4gewogICAgYXdhaXQgc2ltcGxlRG" +
  "lyZWN0RXhwb3J0KGN0eCk7Cn0pOwoKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT09PSAvLwovLyA9PT09PT09PT09IElOVEVSVkFMIFNZU1RFTSA9PT09PT09PT" +
  "0gLy8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vCgpjb25z" +
  "dCBsb2dTdGF0dXMgPSAoKSA9PiB7CiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwoKIC" +
  "AgIGlmIChsYXN0TG9nZ2VkU3RhdHVzICE9PSBib3RTdGF0dXMgfHwgbm93IC0gbGFzdFN0" +
  "YXR1c0xvZyA+IFNUQVRVU19MT0dfSU5URVJWQUwpIHsKICAgICAgICAKICAgICAgICBjb2" +
  "5zdCB1cHRpbWUgPSBpc0Nvbm5lY3Rpb25TdGFibGUgCiAgICAgICAgICAgID8gTWF0aC5m" +
  "bG9vcigobm93IC0gc3RhYmxlQ29ubmVjdGlvblN0YXJ0VGltZSkgLyA2MDAwMCkgKyAnbS" +
  "cgCiAgICAgICAgICAgIDogJ04vQSc7CgogICAgICAgIC8vIFN0eWxpbmcgQm9sZAogICAg" +
  "ICAgIGNvbnN0IGJXaGl0ZSA9IGNoYWxrLmJvbGQud2hpdGVCcmlnaHQ7CiAgICAgICAgY2" +
  "9uc3QgYkN5YW4gPSBjaGFsay5ib2xkLmN5YW5CcmlnaHQ7CiAgICAgICAgY29uc3QgYkJs" +
  "dWUgPSBjaGFsay5ib2xkLmJsdWVCcmlnaHQ7CiAgICAgICAgY29uc3QgYkdyZWVuID0gY2" +
  "hhbGsuYm9sZC5ncmVlbkJyaWdodDsKICAgICAgICBjb25zdCBiWWVsbG93ID0gY2hhbGsu" +
  "Ym9sZC55ZWxsb3dCcmlnaHQ7CgogICAgICAgIC8vIFBlbmVudHVhbiB3YXJuYSBzdGF0dX" +
  "MKICAgICAgICBjb25zdCBjdXJyZW50U3RhdHVzQ29sb3IgPSAoYm90U3RhdHVzLmluY2x1" +
  "ZGVzKCdSRUFEWScpIHx8IGJvdFN0YXR1cyA9PT0gJ0NPTk5FQ1RFRCcpID8gYkdyZWVuID" +
  "ogYlllbGxvdzsKICAgICAgICBjb25zdCBzdGFiaWxpdHlDb2xvciA9IGlzQ29ubmVjdGlv" +
  "blN0YWJsZSA/IGJHcmVlbiA6IGJZZWxsb3c7CgogICAgICAgIGNvbnN0IHN0YXR1c0JveC" +
  "A9IGAKJHtiQ3lhbign4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSTJyl9CiR7YkN5YW4oJ+KUgycpfSAgICAke2JDeWFuKCfwn5qAIFNZU1" +
  "RFTSBNT05JVE9SJyl9ICDilIHilIEgICR7YldoaXRlKFBST0pFQ1RfTkFNRSB8fCAnQk9U" +
  "Jyl9ICAgICAke2JDeWFuKCfilIMnKX0KJHtiQ3lhbign4pSj4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB" +
  "4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4p" +
  "SB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSrJyl9CiR7YkN5YW4oJ+KUgycpfSAg" +
  "JHtiV2hpdGUoJ/CflZIgTEFTVCBDSEVDSycpfSAgJHtiQ3lhbign4pSDJyl9ICR7YldoaX" +
  "RlKGxhc3RDaGVja1RpbWUpfSAgICAgICAke2JDeWFuKCfilIMnKX0KJHtiQ3lhbign4pSD" +
  "Jyl9ICAke2JXaGl0ZSgn8J+TiiBCT1QgU1RBVFVTJyl9ICAke2JDeWFuKCfilIMnKX0gJH" +
  "tjdXJyZW50U3RhdHVzQ29sb3IoYm90U3RhdHVzKX0gICAgICAgICAgICAgJHtiQ3lhbign" +
  "4pSDJyl9CiR7YkN5YW4oJ+KUgycpfSAgJHtiV2hpdGUoJ/Cfm6HvuI8gIFNUQUJJTElUWS" +
  "cpfSAgICR7YkN5YW4oJ+KUgycpfSAke3N0YWJpbGl0eUNvbG9yKGlzQ29ubmVjdGlvblN0" +
  "YWJsZSA/ICfinIUgU1RBQkxFJyA6ICfimqDvuI8gVU5TVEFCTEUnKX0gICAgICR7YkN5YW" +
  "4oJ+KUgycpfQoke2JDeWFuKCfilIMnKX0gICR7YldoaXRlKCfij7MgQ09OTiBUSU1FJyl9" +
  "ICAgJHtiQ3lhbign4pSDJyl9ICR7YkJsdWUodXB0aW1lKX0gICAgICAgICAgICAgICAgIC" +
  "AgICAgICR7YkN5YW4oJ+KUgycpfQoke2JDeWFuKCfilJfilIHilIHilIHilIHilIHilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilI" +
  "HilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHi" +
  "lIHilIHilIHilIHilIHilIHilIHilIHilIHilJsnKX0KICAgICAgICBgLnRyaW0oKTsKCi" +
  "AgICAgICAgY29uc29sZS5sb2coJ1xuJyArIHN0YXR1c0JveCArICdcbicpOwoKICAgICAg" +
  "ICBsYXN0TG9nZ2VkU3RhdHVzID0gYm90U3RhdHVzOwogICAgICAgIGxhc3RTdGF0dXNMb2" +
  "cgPSBub3c7CiAgICB9Cn07CgoKCgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09" +
  "PT09PT09PT0gLy8KLy8gPT09PT09PT09PSBTVEFSVCBCT1QgPT09PT09PT09PT09PT09IC" +
  "8vCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwoKc2V0SW50" +
  "ZXJ2YWwobWFpbnRhaW5Db25uZWN0aW9uLCA2MDAwMCk7CnNldEludGVydmFsKGxvZ1N0YX" +
  "R1cywgMjE2MDAwMDApOwoKcHJvY2Vzcy5vbmNlKCdTSUdJTlQnLCAoKSA9PiB7CiAgICBj" +
  "b25zb2xlLmxvZyhjaGFsay55ZWxsb3coIlxuQm90IFN0b3BwZWQgYnkgU0lHSU5ULiIpKT" +
  "sKICAgIGJvdC5zdG9wKCdTSUdJTlQnKTsKfSk7Cgptb2R1bGUuZXhwb3J0cyA9IHsKICAg" +
  "IGJvdCwKICAgIGJyb3dzZXIsCiAgICBsaXZlU21zUGFnZSwKICAgIGlzUG9sbGluZ0FjdG" +
  "l2ZSwKICAgIGlzQnJvd3NlclJlYWR5LAogICAgZ2V0Qm90U3RhdHVzOiAoKSA9PiBib3RT" +
  "dGF0dXMKfTsKCg==";

eval(Buffer.from(_0x_src, "base64").toString("utf8"));
